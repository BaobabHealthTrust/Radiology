Script started on Thu 22 Oct 2015 08:20:48 AM CAT
]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ rails s -p 5000cd /var/www/nkhoma[3Prails s -p 5000[Kscript/server
=> Booting WEBrick
=> Rails 2.3.5 application starting on http://0.0.0.0:3000
/home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/gems/1.8/gems/rails-2.3.5/lib/rails/gem_dependency.rb:119:Warning: Gem::Dependency#version_requirements is deprecated and will be removed on or after August 2010.  Use #requirement
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2015-10-22 08:21:05] INFO  WEBrick 1.3.1
[2015-10-22 08:21:05] INFO  ruby 1.8.7 (2013-06-27) [x86_64-linux]
[2015-10-22 08:21:05] INFO  WEBrick::HTTPServer#start: pid=4953 port=3000
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mTask Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#index (for 127.0.0.1 at 2015-10-22 08:21:10) [GET]
  Parameters: {"action"=>"index", "controller"=>"dde"}
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing SessionsController#new (for 127.0.0.1 at 2015-10-22 08:21:11) [GET]
  Parameters: {"unauthenticated"=>"true", "action"=>"new", "controller"=>"sessions"}
Rendering template within layouts/application
Rendering sessions/new
  [4;35;1mGlobalProperty Load (0.4ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 468ms (View: 465, DB: 22) | 200 OK [http://localhost/users/sign_in?unauthenticated=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.4ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing SessionsController#create (for 127.0.0.1 at 2015-10-22 08:21:42) [POST]
  Parameters: {"password"=>"[FILTERED]", "login"=>"admin", "action"=>"create", "controller"=>"sessions"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`username` = 'admin') AND (users.retired = 0) LIMIT 1[0m
Redirected to http://localhost:3000/clinic
Completed in 5ms (DB: 15) | 302 Found [http://localhost/sessions/create]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#index (for 127.0.0.1 at 2015-10-22 08:21:42) [GET]
  Parameters: {"action"=>"index", "controller"=>"dde"}
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Redirected to http://localhost:3000/location
Filter chain halted as [:location_required] rendered_or_redirected.
Completed in 4ms (DB: 27) | 302 Found [http://localhost/clinic]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing SessionsController#location (for 127.0.0.1 at 2015-10-22 08:21:43) [GET]
  Parameters: {"action"=>"location", "controller"=>"sessions"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering sessions/location
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 36ms (View: 30, DB: 18) | 200 OK [http://localhost/location]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing SessionsController#update (for 127.0.0.1 at 2015-10-22 08:21:51) [POST]
  Parameters: {"location"=>"721", "action"=>"update", "controller"=>"sessions"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.4ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mLocation Load (2.8ms)[0m   [0;1mSELECT *
 FROM location
 WHERE location_id IN (SELECT location_id
 FROM location_tag_map
 WHERE location_tag_id = (SELECT location_tag_id
 FROM location_tag
 WHERE name = 'Workstation Location'))
 ORDER BY name ASC[0m
Redirected to http://localhost:3000/clinic
Completed in 30ms (DB: 26) | 302 Found [http://localhost/sessions/update]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#index (for 127.0.0.1 at 2015-10-22 08:21:51) [GET]
  Parameters: {"action"=>"index", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.4ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.5ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mLocation Load (0.5ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mPerson Load (0.6ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 1) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.7ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mUserRole Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `user_role`[0m
  [4;35;1mUserRole Load (0.4ms)[0m   [0mSELECT * FROM `user_role` WHERE (`user_role`.`user_id` = 1) [0m
Rendering dde/index
Completed in 95ms (View: 32, DB: 27) | 200 OK [http://localhost/clinic]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 08:21:53) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.4ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;36;1mEncounterType Load (6.6ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.6ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.4ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;36;1mPerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 105ms (View: 45, DB: 28) | 200 OK [http://localhost/clinic/overview_tab]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 08:21:53) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.3ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 19ms (View: 1, DB: 23) | 200 OK [http://localhost/clinic/overview_tab]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#search (for 127.0.0.1 at 2015-10-22 08:21:58) [GET]
  Parameters: {"action"=>"search", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering dde/search
Completed in 33ms (View: 10, DB: 21) | 200 OK [http://localhost/dde/search]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 08:21:59) [GET]
  Parameters: {"search_string"=>"", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE '%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'') WHEN 0 THEN 9999 ELSE INSTR(given_name,'') END ASC LIMIT 10[0m
Completed in 51ms (View: 22, DB: 26) | 200 OK [http://localhost/dde/given_names?search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:22:02) [GET]
  Parameters: {"search_string"=>"", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.7ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'') WHEN 0 THEN 9999 ELSE INSTR(family_name,'') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/family_names?search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_search (for 127.0.0.1 at 2015-10-22 08:22:07) [GET]
  Parameters: {"gender"=>"F", "given_name"=>"Zellece", "family_name"=>"Jamali", "page"=>"1", "action"=>"ajax_search", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPerson Load (0.9ms)[0m   [0;1mSELECT `person`.* FROM `person` INNER JOIN `person_name` ON person_name.person_id = person.person_id AND person_name.`voided` = 0 WHERE (given_name = 'Zellece' AND family_name = 'Jamali' AND gender = 'F') AND (person.voided = 0) LIMIT 0, 6[0m
  [4;35;1mPatient Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 26 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 26 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 187ms (View: 1, DB: 27) | 200 OK [http://localhost/ajax_search?given_name=Zellece&family_name=Jamali&gender=F&page=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.4ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_scan_data (for 127.0.0.1 at 2015-10-22 08:22:23) [POST]
  Parameters: {"gender"=>"F", "selected_patient"=>"", "person"=>"{\"national_id\":\"000F56\",\"gender\":\"F\",\"site_code\":\"MPC\",\"names\":{\"middle_name\":\"Grace\",\"given_name\":\"Zellece\",\"maiden_name\":\"\",\"family_name\":\"Jamali\"},\"age\":19,\"addresses\":{\"current_village\":\"Area 25a Houses\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Chidothi\",\"current_ta\":\"Area 25\",\"home_ta\":\"Mponela Urban\",\"home_district\":\"Dowa \"},\"person_attributes\":{\"cell_phone_number\":\"0884142600\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Student\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"application\":\"Radiology\",\"birthdate\":\"1995-12-01\"}", "given_name"=>"Zellece", "family_name"=>"Jamali", "action"=>"process_scan_data", "patient"=>"0", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/process_scan_data
Completed in 243ms (View: 28, DB: 17) | 200 OK [http://localhost/dde/process_scan_data]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 08:22:24) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"Zellece\",\"middle_name\":\"Grace\",\"maiden_name\":\"\",\"given_name_code\":\"Z42\",\"family_name\":\"Jamali\",\"family_name_code\":\"Y54\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-21T14:25:49.180Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"0884142600\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Student\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25a Houses\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Chidothi\",\"current_ta\":\"Area 25\",\"home_ta\":\"Mponela Urban\",\"home_district\":\"Dowa \"},\"created_at\":\"2015-10-21T14:25:49.180Z\",\"type\":\"Person\",\"_id\":\"000F56\",\"_rev\":\"1-fa02fc79a2c4281dcbdc3b6474f4100a\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1995-12-01\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000F56') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 26 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.4ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 26 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.5ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 26 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 26 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 26 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 26 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 26 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 26 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 26 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 26 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 26 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.4ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 26 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 26 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 26 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 26 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:64:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (28.2ms)
Rendered rescues/_request_and_response (1.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_scan_data (for 127.0.0.1 at 2015-10-22 08:27:01) [POST]
  Parameters: {"gender"=>"F", "selected_patient"=>"", "person"=>"{\"national_id\":\"000F56\",\"gender\":\"F\",\"site_code\":\"MPC\",\"names\":{\"middle_name\":\"Grace\",\"given_name\":\"Zellece\",\"maiden_name\":\"\",\"family_name\":\"Jamali\"},\"age\":19,\"addresses\":{\"current_village\":\"Area 25a Houses\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Chidothi\",\"current_ta\":\"Area 25\",\"home_ta\":\"Mponela Urban\",\"home_district\":\"Dowa \"},\"person_attributes\":{\"cell_phone_number\":\"0884142600\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Student\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"application\":\"Radiology\",\"birthdate\":\"1995-12-01\"}", "given_name"=>"Zellece", "family_name"=>"Jamali", "action"=>"process_scan_data", "patient"=>"0", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/process_scan_data
Completed in 348ms (View: 2, DB: 24) | 200 OK [http://localhost/dde/process_scan_data]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 08:27:02) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"Zellece\",\"middle_name\":\"Grace\",\"maiden_name\":\"\",\"given_name_code\":\"Z42\",\"family_name\":\"Jamali\",\"family_name_code\":\"Y54\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-21T14:25:49.180Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"0884142600\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Student\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25a Houses\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Chidothi\",\"current_ta\":\"Area 25\",\"home_ta\":\"Mponela Urban\",\"home_district\":\"Dowa \"},\"created_at\":\"2015-10-21T14:25:49.180Z\",\"type\":\"Person\",\"_id\":\"000F56\",\"_rev\":\"1-fa02fc79a2c4281dcbdc3b6474f4100a\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1995-12-01\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (1.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000F56') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 26 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 26 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 26 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 26 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 26 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 26 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 26 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 26 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 26 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 26 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 26 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 26 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 26 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 26 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 26 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:64:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (64.7ms)
Rendered rescues/_request_and_response (0.5ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing SessionsController#update (for 127.0.0.1 at 2015-10-22 08:27:09) [POST]
  Parameters: {"location"=>"721", "action"=>"update", "controller"=>"sessions"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT *
 FROM location
 WHERE location_id IN (SELECT location_id
 FROM location_tag_map
 WHERE location_tag_id = (SELECT location_tag_id
 FROM location_tag
 WHERE name = 'Workstation Location'))
 ORDER BY name ASC[0m
Redirected to http://localhost:3000/clinic
Completed in 10ms (DB: 22) | 302 Found [http://localhost/sessions/update]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#index (for 127.0.0.1 at 2015-10-22 08:27:09) [GET]
  Parameters: {"action"=>"index", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 1) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mUserRole Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `user_role`[0m
  [4;35;1mUserRole Load (3.8ms)[0m   [0mSELECT * FROM `user_role` WHERE (`user_role`.`user_id` = 1) [0m
Rendering dde/index
Completed in 70ms (View: 10, DB: 26) | 200 OK [http://localhost/clinic]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 08:27:09) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.0ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.0ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;36;1mPerson Load (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 18ms (View: 1, DB: 22) | 200 OK [http://localhost/clinic/overview_tab]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 08:27:10) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 18ms (View: 1, DB: 25) | 200 OK [http://localhost/clinic/overview_tab]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#search (for 127.0.0.1 at 2015-10-22 08:27:12) [GET]
  Parameters: {"action"=>"search", "controller"=>"dde"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering dde/search
Completed in 9ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/search]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 08:27:12) [GET]
  Parameters: {"search_string"=>"", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.1ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE '%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'') WHEN 0 THEN 9999 ELSE INSTR(given_name,'') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 22) | 200 OK [http://localhost/dde/given_names?search_string=]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 08:27:18) [GET]
  Parameters: {"search_string"=>"T", "action"=>"given_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.7ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'T%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'T') WHEN 0 THEN 9999 ELSE INSTR(given_name,'T') END ASC LIMIT 10[0m
Completed in 11ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/given_names?search_string=T]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (5.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 08:27:18) [GET]
  Parameters: {"search_string"=>"T", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (3.6ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.1ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'T%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'T') WHEN 0 THEN 9999 ELSE INSTR(given_name,'T') END ASC LIMIT 10[0m
Completed in 42ms (View: 1, DB: 34) | 200 OK [http://localhost/dde/given_names?search_string=T]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 08:27:19) [GET]
  Parameters: {"search_string"=>"Tes", "action"=>"given_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.5ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'T6%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'Tes') WHEN 0 THEN 9999 ELSE INSTR(given_name,'Tes') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 23) | 200 OK [http://localhost/dde/given_names?search_string=Tes]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 08:27:19) [GET]
  Parameters: {"search_string"=>"Test", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'T63%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'Test') WHEN 0 THEN 9999 ELSE INSTR(given_name,'Test') END ASC LIMIT 10[0m
Completed in 11ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/given_names?search_string=Test]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 08:27:19) [GET]
  Parameters: {"search_string"=>"Test", "action"=>"given_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.1ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'T63%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'Test') WHEN 0 THEN 9999 ELSE INSTR(given_name,'Test') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/given_names?search_string=Test]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:27:21) [GET]
  Parameters: {"search_string"=>"", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.1ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'') WHEN 0 THEN 9999 ELSE INSTR(family_name,'') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/family_names?search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:27:24) [GET]
  Parameters: {"search_string"=>"P", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.5ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'P%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'P') WHEN 0 THEN 9999 ELSE INSTR(family_name,'P') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/family_names?search_string=P]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:27:24) [GET]
  Parameters: {"search_string"=>"P", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.4ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.1ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'P%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'P') WHEN 0 THEN 9999 ELSE INSTR(family_name,'P') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 27) | 200 OK [http://localhost/dde/family_names?search_string=P]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:27:24) [GET]
  Parameters: {"search_string"=>"Pa", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'P%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Pa') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Pa') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 27) | 200 OK [http://localhost/dde/family_names?search_string=Pa]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:27:24) [GET]
  Parameters: {"search_string"=>"Pat", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'P3%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Pat') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Pat') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/family_names?search_string=Pat]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:27:25) [GET]
  Parameters: {"search_string"=>"Pati", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'P3%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Pati') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Pati') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/family_names?search_string=Pati]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (4.5ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:27:25) [GET]
  Parameters: {"search_string"=>"Patie", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (4.6ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'P3%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Patie') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Patie') END ASC LIMIT 10[0m
Completed in 44ms (View: 1, DB: 33) | 200 OK [http://localhost/dde/family_names?search_string=Patie]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:27:25) [GET]
  Parameters: {"search_string"=>"Patien", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'P35%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Patien') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Patien') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/family_names?search_string=Patien]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:27:25) [GET]
  Parameters: {"search_string"=>"Patient", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'P353%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Patient') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Patient') END ASC LIMIT 10[0m
Completed in 11ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/family_names?search_string=Patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (4.8ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_search (for 127.0.0.1 at 2015-10-22 08:27:30) [GET]
  Parameters: {"gender"=>"F", "given_name"=>"Test", "family_name"=>"Patient", "page"=>"1", "action"=>"ajax_search", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPerson Load (0.6ms)[0m   [0mSELECT `person`.* FROM `person` INNER JOIN `person_name` ON person_name.person_id = person.person_id AND person_name.`voided` = 0 WHERE (given_name = 'Test' AND family_name = 'Patient' AND gender = 'F') AND (person.voided = 0) LIMIT 0, 6[0m
Completed in 103ms (View: 1, DB: 28) | 200 OK [http://localhost/ajax_search?given_name=Test&family_name=Patient&gender=F&page=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#new_patient (for 127.0.0.1 at 2015-10-22 08:27:32) [GET]
  Parameters: {"gender"=>"F", "given_name"=>"Test", "family_name"=>"Patient", "action"=>"new_patient", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering dde/new_patient
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 32ms (View: 24, DB: 24) | 200 OK [http://localhost/new_patient?given_name=Test&family_name=Patient&gender=F]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#nationality (for 127.0.0.1 at 2015-10-22 08:27:57) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"", "action"=>"nationality", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDENationality Load (0.7ms)[0m   [0mSELECT * FROM `dde_nationality` WHERE (name LIKE ('%%')) ORDER BY weight[0m
  [4;36;1mDDENationality Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `dde_nationality`[0m
Completed in 18ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/nationality?filter_value=&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#district (for 127.0.0.1 at 2015-10-22 08:28:00) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Central Region", "action"=>"district", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDERegion Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `dde_region`[0m
  [4;35;1mDDERegion Load (0.4ms)[0m   [0mSELECT * FROM `dde_region` WHERE (`dde_region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mDDEDistrict Load (0.6ms)[0m   [0;1mSELECT * FROM `dde_district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mDDEDistrict Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `dde_district`[0m
Completed in 17ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/district?filter_value=Central+Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (2.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#traditional_authority (for 127.0.0.1 at 2015-10-22 08:28:02) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Kasungu", "action"=>"traditional_authority", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDEDistrict Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `dde_district`[0m
  [4;36;1mDDEDistrict Load (0.3ms)[0m   [0;1mSELECT * FROM `dde_district` WHERE (`dde_district`.`name` = 'Kasungu') LIMIT 1[0m
  [4;35;1mDDETraditionalAuthority Load (0.8ms)[0m   [0mSELECT * FROM `dde_traditional_authority` WHERE (name LIKE ('%%') AND district_id = 2) ORDER BY name[0m
  [4;36;1mDDETraditionalAuthority Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `dde_traditional_authority`[0m
Completed in 19ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/traditional_authority?filter_value=Kasungu&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#village (for 127.0.0.1 at 2015-10-22 08:28:03) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Chidzuma", "action"=>"village", "controller"=>"dde"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDETraditionalAuthority Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `dde_traditional_authority`[0m
  [4;35;1mDDETraditionalAuthority Load (1.0ms)[0m   [0mSELECT * FROM `dde_traditional_authority` WHERE (`dde_traditional_authority`.`name` = 'Chidzuma') LIMIT 1[0m
  [4;36;1mDDEVillage Load (12.2ms)[0m   [0;1mSELECT * FROM `dde_village` WHERE (name LIKE ('%%') AND traditional_authority_id = 378) ORDER BY name[0m
Completed in 28ms (View: 1, DB: 38) | 200 OK [http://localhost/dde/village?filter_value=Chidzuma&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#country (for 127.0.0.1 at 2015-10-22 08:28:04) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"", "action"=>"country", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDECountry Load (0.7ms)[0m   [0;1mSELECT * FROM `dde_country` WHERE (name LIKE ('%%')) ORDER BY weight[0m
  [4;35;1mDDECountry Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `dde_country`[0m
Completed in 13ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/country?filter_value=&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#country (for 127.0.0.1 at 2015-10-22 08:28:08) [GET]
  Parameters: {"search_string"=>"Tanzania", "filter_value"=>"Tanzania", "action"=>"country", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDECountry Load (0.5ms)[0m   [0mSELECT * FROM `dde_country` WHERE (name LIKE ('%Tanzania%')) ORDER BY weight[0m
  [4;36;1mDDECountry Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `dde_country`[0m
Completed in 12ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/country?filter_value=Tanzania&search_string=Tanzania]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#country (for 127.0.0.1 at 2015-10-22 08:28:11) [GET]
  Parameters: {"search_string"=>"Other", "filter_value"=>"Other", "action"=>"country", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDECountry Load (0.5ms)[0m   [0;1mSELECT * FROM `dde_country` WHERE (name LIKE ('%Other%')) ORDER BY weight[0m
Completed in 11ms (View: 1, DB: 22) | 200 OK [http://localhost/dde/country?filter_value=Other&search_string=Other]
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#country (for 127.0.0.1 at 2015-10-22 08:28:15) [GET]
  Parameters: {"search_string"=>"Other", "filter_value"=>"Other", "action"=>"country", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDECountry Load (0.1ms)[0m   [0;1mSELECT * FROM `dde_country` WHERE (name LIKE ('%Other%')) ORDER BY weight[0m
Completed in 10ms (View: 1, DB: 23) | 200 OK [http://localhost/dde/country?filter_value=Other&search_string=Other]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#village (for 127.0.0.1 at 2015-10-22 08:28:17) [GET]
  Parameters: {"search_string"=>"Other", "filter_value"=>"Chidzuma", "action"=>"village", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDETraditionalAuthority Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `dde_traditional_authority`[0m
  [4;35;1mDDETraditionalAuthority Load (0.0ms)[0m   [0mSELECT * FROM `dde_traditional_authority` WHERE (`dde_traditional_authority`.`name` = 'Chidzuma') LIMIT 1[0m
  [4;36;1mDDEVillage Load (0.5ms)[0m   [0;1mSELECT * FROM `dde_village` WHERE (name LIKE ('%Other%') AND traditional_authority_id = 378) ORDER BY name[0m
Completed in 47ms (View: 1, DB: 22) | 200 OK [http://localhost/dde/village?filter_value=Chidzuma&search_string=Other]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#traditional_authority (for 127.0.0.1 at 2015-10-22 08:28:19) [GET]
  Parameters: {"search_string"=>"Chidzuma", "filter_value"=>"Kasungu", "action"=>"traditional_authority", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDEDistrict Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `dde_district`[0m
  [4;35;1mDDEDistrict Load (0.0ms)[0m   [0mSELECT * FROM `dde_district` WHERE (`dde_district`.`name` = 'Kasungu') LIMIT 1[0m
  [4;36;1mDDETraditionalAuthority Load (0.6ms)[0m   [0;1mSELECT * FROM `dde_traditional_authority` WHERE (name LIKE ('%Chidzuma%') AND district_id = 2) ORDER BY name[0m
  [4;35;1mDDETraditionalAuthority Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `dde_traditional_authority`[0m
Completed in 18ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/traditional_authority?filter_value=Kasungu&search_string=Chidzuma]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#district (for 127.0.0.1 at 2015-10-22 08:28:20) [GET]
  Parameters: {"search_string"=>"Kasungu", "filter_value"=>"Central Region", "action"=>"district", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDERegion Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `dde_region`[0m
  [4;36;1mDDERegion Load (0.1ms)[0m   [0;1mSELECT * FROM `dde_region` WHERE (`dde_region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mDDEDistrict Load (0.5ms)[0m   [0mSELECT * FROM `dde_district` WHERE (name LIKE ('Kasungu%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mDDEDistrict Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `dde_district`[0m
Completed in 16ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/district?filter_value=Central+Region&search_string=Kasungu]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#traditional_authority (for 127.0.0.1 at 2015-10-22 08:28:22) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Kasungu", "action"=>"traditional_authority", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDEDistrict Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `dde_district`[0m
  [4;35;1mDDEDistrict Load (0.1ms)[0m   [0mSELECT * FROM `dde_district` WHERE (`dde_district`.`name` = 'Kasungu') LIMIT 1[0m
  [4;36;1mDDETraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `dde_traditional_authority` WHERE (name LIKE ('%%') AND district_id = 2) ORDER BY name[0m
  [4;35;1mDDETraditionalAuthority Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `dde_traditional_authority`[0m
Completed in 21ms (View: 1, DB: 27) | 200 OK [http://localhost/dde/traditional_authority?filter_value=Kasungu&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#village (for 127.0.0.1 at 2015-10-22 08:28:24) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Chambwe", "action"=>"village", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDETraditionalAuthority Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `dde_traditional_authority`[0m
  [4;36;1mDDETraditionalAuthority Load (0.8ms)[0m   [0;1mSELECT * FROM `dde_traditional_authority` WHERE (`dde_traditional_authority`.`name` = 'Chambwe') LIMIT 1[0m
  [4;35;1mDDEVillage Load (0.4ms)[0m   [0mSELECT * FROM `dde_village` WHERE (name LIKE ('%%') AND traditional_authority_id = 379) ORDER BY name[0m
Completed in 16ms (View: 1, DB: 27) | 200 OK [http://localhost/dde/village?filter_value=Chambwe&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#country (for 127.0.0.1 at 2015-10-22 08:28:26) [GET]
  Parameters: {"search_string"=>"Other", "filter_value"=>"Other", "action"=>"country", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDECountry Load (0.1ms)[0m   [0mSELECT * FROM `dde_country` WHERE (name LIKE ('%Other%')) ORDER BY weight[0m
Completed in 9ms (View: 1, DB: 23) | 200 OK [http://localhost/dde/country?filter_value=Other&search_string=Other]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#send_to_dde (for 127.0.0.1 at 2015-10-22 08:28:41) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"national_id\":null,\"names\":{\"middle_name\":\"Unknown\",\"given_name\":\"Test\",\"maiden_name\":\"\",\"family_name\":\"Patient\",\"gender\":\"F\"},\"site_code\":\"MPC\",\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"current_village\":\"\",\"current_district\":\"\",\"current_residence\":\"\",\"home_village\":\"Other\",\"current_ta\":\"\",\"home_ta\":\"Chambwe\",\"landmark\":\"\",\"home_district\":\"Kasungu\"},\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Housewife\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Other\"},\"birthdate_estimated\":true,\"patient\":{\"identifiers\":[]},\"birthdate\":\"1970-07-05\",\"application\":\"Radiology\",\"print_barcode\":true}", "action"=>"send_to_dde", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/send_to_dde
Completed in 148ms (View: 16, DB: 24) | 200 OK [http://localhost/dde/send_to_dde]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_process_data (for 127.0.0.1 at 2015-10-22 08:28:42) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"national_id\":null,\"names\":{\"middle_name\":\"Unknown\",\"given_name\":\"Test\",\"maiden_name\":\"\",\"family_name\":\"Patient\",\"gender\":\"F\"},\"site_code\":\"MPC\",\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"current_village\":\"\",\"current_district\":\"\",\"current_residence\":\"\",\"home_village\":\"Other\",\"current_ta\":\"\",\"home_ta\":\"Chambwe\",\"landmark\":\"\",\"home_district\":\"Kasungu\"},\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Housewife\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Other\"},\"birthdate_estimated\":true,\"patient\":{\"identifiers\":[]},\"birthdate\":\"1970-07-05\",\"application\":\"Radiology\",\"print_barcode\":true}", "page"=>1, "action"=>"ajax_process_data", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` IS NULL) AND (patient_identifier.voided = 0) LIMIT 1[0m
Completed in 104ms (View: 1, DB: 21) | 200 OK [http://localhost/dde/ajax_process_data]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (4.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_confirmation (for 127.0.0.1 at 2015-10-22 08:28:44) [POST]
  Parameters: {"target"=>"create", "person"=>"{\"gender\":\"F\",\"national_id\":null,\"names\":{\"middle_name\":\"Unknown\",\"given_name\":\"Test\",\"maiden_name\":\"\",\"family_name\":\"Patient\",\"gender\":\"F\"},\"site_code\":\"MPC\",\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"current_village\":\"\",\"current_district\":\"\",\"current_residence\":\"\",\"home_village\":\"Other\",\"current_ta\":\"\",\"home_ta\":\"Chambwe\",\"landmark\":\"\",\"home_district\":\"Kasungu\"},\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Housewife\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Other\"},\"birthdate_estimated\":true,\"patient\":{\"identifiers\":[]},\"birthdate\":\"1970-07-05\",\"application\":\"Radiology\",\"print_barcode\":true}", "action"=>"process_confirmation", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Completed in 158ms (View: 2, DB: 25) | 200 OK [http://localhost/dde/process_confirmation]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 08:28:44) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"national_id\":\"000KV5\",\"names\":{\"middle_name\":\"Unknown\",\"given_name\":\"Test\",\"maiden_name\":\"\",\"family_name\":\"Patient\",\"gender\":\"F\"},\"site_code\":\"MPC\",\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"current_village\":\"\",\"current_district\":\"\",\"current_residence\":\"\",\"home_village\":\"Other\",\"current_ta\":\"\",\"home_ta\":\"Chambwe\",\"landmark\":\"\",\"home_district\":\"Kasungu\"},\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Housewife\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Other\"},\"birthdate_estimated\":true,\"patient\":{\"identifiers\":[]},\"birthdate\":\"1970-07-05\",\"application\":\"Radiology\",\"print_barcode\":true,\"assigned_site\":\"MPC\",\"patient_assigned\":true}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KV5') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (1.7ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPerson Create (0.4ms)[0m   [0mINSERT INTO `person` (`gender`, `dead`, `date_created`, `uuid`, `date_voided`, `cause_of_death`, `death_date`, `changed_by`, `voided`, `birthdate_estimated`, `date_changed`, `void_reason`, `creator`, `birthdate`, `voided_by`) VALUES('F', 0, '2015-10-22 08:28:44', '25005684-7886-11e5-a02d-30f9edcc2607', NULL, NULL, NULL, 1, 0, 0, '2015-10-22 08:28:44', NULL, 1, NULL, NULL)[0m
  [4;36;1mSQL (70.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mPerson Update (0.4ms)[0m   [0;1mUPDATE `person` SET `birthdate` = '1970-07-05', `birthdate_estimated` = 1, `date_changed` = '2015-10-22 08:28:44' WHERE `person_id` = 27[0m
  [4;35;1mSQL (63.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mPersonNameCode Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonName Create (0.5ms)[0m   [0mINSERT INTO `person_name` (`date_created`, `uuid`, `preferred`, `date_voided`, `person_id`, `given_name`, `middle_name`, `family_name`, `family_name_suffix`, `changed_by`, `degree`, `family_name2`, `voided`, `family_name_prefix`, `void_reason`, `date_changed`, `prefix`, `creator`, `voided_by`) VALUES('2015-10-22 08:28:44', '25179866-7886-11e5-a02d-30f9edcc2607', 0, NULL, 27, 'Test', 'Unknown', 'Patient', NULL, NULL, NULL, '', 0, NULL, NULL, NULL, NULL, 1, NULL)[0m
  [4;36;1mPersonNameCode Create (0.3ms)[0m   [0;1mINSERT INTO `person_name_code` (`person_name_id`, `family_name_suffix_code`, `given_name_code`, `family_name_code`, `family_name2_code`, `middle_name_code`) VALUES(27, NULL, 'T63', 'P353', NULL, 'U525')[0m
  [4;35;1mSQL (60.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonAddress Create (0.2ms)[0m   [0;1mINSERT INTO `person_address` (`address1`, `address2`, `date_created`, `uuid`, `preferred`, `date_voided`, `neighborhood_cell`, `person_id`, `country`, `township_division`, `latitude`, `longitude`, `voided`, `county_district`, `subregion`, `void_reason`, `state_province`, `creator`, `city_village`, `postal_code`, `voided_by`, `region`) VALUES('', 'Kasungu', '2015-10-22 08:28:44', '25228ad7-7886-11e5-a02d-30f9edcc2607', 0, NULL, 'Other', 27, NULL, '', NULL, NULL, 0, 'Chambwe', NULL, NULL, '', 1, '', NULL, NULL, NULL)[0m
  [4;35;1mSQL (58.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonAttribute Create (0.4ms)[0m   [0mINSERT INTO `person_attribute` (`date_created`, `uuid`, `date_voided`, `person_id`, `changed_by`, `voided`, `date_changed`, `void_reason`, `value`, `person_attribute_type_id`, `creator`, `voided_by`) VALUES('2015-10-22 08:28:44', '252d755e-7886-11e5-a02d-30f9edcc2607', NULL, 27, 1, 0, '2015-10-22 08:28:44', NULL, 'Housewife', 13, 1, NULL)[0m
  [4;36;1mSQL (64.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonAttribute Create (0.3ms)[0m   [0;1mINSERT INTO `person_attribute` (`date_created`, `uuid`, `date_voided`, `person_id`, `changed_by`, `voided`, `date_changed`, `void_reason`, `value`, `person_attribute_type_id`, `creator`, `voided_by`) VALUES('2015-10-22 08:28:45', '25383ff5-7886-11e5-a02d-30f9edcc2607', NULL, 27, 1, 0, '2015-10-22 08:28:45', NULL, 'Unknown', 12, 1, NULL)[0m
  [4;35;1mSQL (61.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonAttribute Create (0.2ms)[0m   [0mINSERT INTO `person_attribute` (`date_created`, `uuid`, `date_voided`, `person_id`, `changed_by`, `voided`, `date_changed`, `void_reason`, `value`, `person_attribute_type_id`, `creator`, `voided_by`) VALUES('2015-10-22 08:28:45', '25425eaf-7886-11e5-a02d-30f9edcc2607', NULL, 27, 1, 0, '2015-10-22 08:28:45', NULL, 'Unknown', 15, 1, NULL)[0m
  [4;36;1mSQL (62.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonAttribute Create (0.3ms)[0m   [0;1mINSERT INTO `person_attribute` (`date_created`, `uuid`, `date_voided`, `person_id`, `changed_by`, `voided`, `date_changed`, `void_reason`, `value`, `person_attribute_type_id`, `creator`, `voided_by`) VALUES('2015-10-22 08:28:45', '254c9f3c-7886-11e5-a02d-30f9edcc2607', NULL, 27, 1, 0, '2015-10-22 08:28:45', NULL, 'Unknown', 14, 1, NULL)[0m
  [4;35;1mSQL (50.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mPersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonAttribute Create (0.4ms)[0m   [0mINSERT INTO `person_attribute` (`date_created`, `uuid`, `date_voided`, `person_id`, `changed_by`, `voided`, `date_changed`, `void_reason`, `value`, `person_attribute_type_id`, `creator`, `voided_by`) VALUES('2015-10-22 08:28:45', '2555265a-7886-11e5-a02d-30f9edcc2607', NULL, 27, 1, 0, '2015-10-22 08:28:45', NULL, 'Malawian', 3, 1, NULL)[0m
  [4;36;1mSQL (50.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.4ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 27 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mPatient Create (0.3ms)[0m   [0mINSERT INTO `patient` (`date_created`, `date_voided`, `tribe`, `changed_by`, `voided`, `patient_id`, `date_changed`, `void_reason`, `creator`, `voided_by`) VALUES('2015-10-22 08:28:45', NULL, NULL, 1, 0, 27, '2015-10-22 08:28:45', NULL, 1, NULL)[0m
  [4;36;1mSQL (53.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mLocation Load (0.3ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPatientIdentifier Create (0.3ms)[0m   [0;1mINSERT INTO `patient_identifier` (`date_created`, `uuid`, `preferred`, `date_voided`, `identifier`, `patient_id`, `location_id`, `voided`, `void_reason`, `creator`, `identifier_type`, `voided_by`) VALUES('2015-10-22 08:28:45', '25685b8f-7886-11e5-a02d-30f9edcc2607', 0, NULL, '000KV5', 27, 700, 0, NULL, 1, 3, NULL)[0m
  [4;35;1mPatientIdentifierType Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 27 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 27 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 27 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.3ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.4ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonName Load (0.4ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.3ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.3ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (5.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.5ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 27 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mRelationship Load (0.5ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 27) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: Table 'openmrs_demographx.patient' doesn't exist: INSERT INTO openmrs_demographx.patient (patient_id,gender,birthdate,birthdate_estimated,creator,date_created,date_changed)
VALUES(27,"Female","1970-07-05",1,1,'2015-10-22 08:28:44','2015-10-22 08:28:44');
[0m
  [4;36;1mSQL (46.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KV5') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 27) AND (patient.voided = 0) [0m
Rendering template within layouts/application
Rendering print/print
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 849ms (View: 7, DB: 693) | 200 OK [http://localhost/dde/process_result]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing PatientsController#national_id_label (for 127.0.0.1 at 2015-10-22 08:28:45) [GET]
  Parameters: {"patient_id"=>"27", "action"=>"national_id_label", "controller"=>"patients"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 27) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 27 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 27 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.3ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.5ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.4ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonName Load (0.4ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.3ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.3ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.3ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.5ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.5ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 27 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mRelationship Load (0.4ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 27) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'label_width_height') LIMIT 1[0m
Sending data 278560.lbl
Completed in 109ms (View: 6, DB: 33) | 200 OK [http://localhost/patients/national_id_label?patient_id=27]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing PatientsController#show (for 127.0.0.1 at 2015-10-22 08:28:51) [GET]
  Parameters: {"action"=>"show", "controller"=>"patients", "id"=>"27"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 27) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 27 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 27 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 27 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mRelationship Load (0.1ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 27) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.4ms)[0m   [0mSELECT * FROM `encounter` WHERE ((`encounter`.`patient_id` = 27) AND (`encounter`.`voided` = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) AND (encounter.voided = 0) [0m
  [4;36;1mConceptName Load (16.7ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'SERVICES') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.4ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 27 AND concept_id = 31 AND DATE(obs_datetime) = '2015-10-22') AND (obs.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Diabetes Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 14 AND patient_id = 27) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mOrder Load Including Associations (0.3ms)[0m   [0;1mSELECT `orders`.`order_id` AS t0_r0, `orders`.`order_type_id` AS t0_r1, `orders`.`concept_id` AS t0_r2, `orders`.`orderer` AS t0_r3, `orders`.`encounter_id` AS t0_r4, `orders`.`instructions` AS t0_r5, `orders`.`start_date` AS t0_r6, `orders`.`auto_expire_date` AS t0_r7, `orders`.`discontinued` AS t0_r8, `orders`.`discontinued_date` AS t0_r9, `orders`.`discontinued_by` AS t0_r10, `orders`.`discontinued_reason` AS t0_r11, `orders`.`creator` AS t0_r12, `orders`.`date_created` AS t0_r13, `orders`.`voided` AS t0_r14, `orders`.`voided_by` AS t0_r15, `orders`.`date_voided` AS t0_r16, `orders`.`void_reason` AS t0_r17, `orders`.`patient_id` AS t0_r18, `orders`.`accession_number` AS t0_r19, `orders`.`obs_id` AS t0_r20, `orders`.`uuid` AS t0_r21, `orders`.`discontinued_reason_non_coded` AS t0_r22, `drug_order`.`order_id` AS t1_r0, `drug_order`.`drug_inventory_id` AS t1_r1, `drug_order`.`dose` AS t1_r2, `drug_order`.`equivalent_daily_dose` AS t1_r3, `drug_order`.`units` AS t1_r4, `drug_order`.`frequency` AS t1_r5, `drug_order`.`prn` AS t1_r6, `drug_order`.`complex` AS t1_r7, `drug_order`.`quantity` AS t1_r8 FROM `orders` LEFT OUTER JOIN `drug_order` ON drug_order.order_id = orders.order_id WHERE (((((orders.voided = 0) AND (drug_order.drug_inventory_id is NOT NULL)) AND (discontinued = 0 AND auto_expire_date > NOW())) AND ((orders.voided = 0) AND ((`orders`.`patient_id` = 27) AND (`orders`.`voided` = 0)))) AND ((`orders`.`patient_id` = 27) AND (`orders`.`voided` = 0))) [0m
  [4;35;1mPatientProgram Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_program`[0m
  [4;36;1mPatientState Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_state`[0m
  [4;35;1mPatientProgram Load (0.5ms)[0m   [0mSELECT * FROM `patient_program` WHERE ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 27) AND (`patient_program`.`voided` = 0))) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 27) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mEncounterType Load (0.5ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'APPOINTMENT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (6.7ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.7ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 27
 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.6ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 27
 AND obs_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;36;1mEncounter Load (0.4ms)[0m   [0;1mSELECT * FROM encounter WHERE patient_id = 27 AND encounter_type IN (SELECT encounter_type_id FROM encounter_type WHERE name IN ('VITALS', 'TREATMENT', 'HIV RECEPTION', 'HIV STAGING', 'HIV CLINIC CONSULTATION', 'DISPENSING'))[0m
  [4;35;1mEncounter Load (0.4ms)[0m   [0mSELECT * FROM `encounter` WHERE (NOT (DATE_FORMAT(encounter_datetime, '%Y-%m-%d') IN (NULL)) AND encounter_datetime < NOW()) AND (((encounter.voided = 0) AND ((`encounter`.`patient_id` = 27) AND (`encounter`.`voided` = 0))) AND (`encounter`.`encounter_type` = 7)) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;36;1mConceptName Load (18.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'What was the patients adherence for this drug order') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mEncounterType Load (0.7ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'ART ADHERENCE') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mObservation Load (0.6ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter e USING(encounter_id) WHERE (concept_id = 6987 AND encounter_type = 68 AND patient_id = 27 AND
 encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY obs_datetime DESC[0m
  [4;35;1mEncounterType Load (0.6ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'DISPENSING') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.5ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (`encounter`.`encounter_type` = 54) AND ((encounter.voided = 0) AND ((`encounter`.`patient_id` = 27) AND (`encounter`.`voided` = 0))) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 27) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (1.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.5ms)[0m   [0mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5089)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 27 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 27 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 27) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (13.5ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HEIGHT (CM)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.6ms)[0m   [0;1mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5090)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 27 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 27 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mProgram Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `program`[0m
  [4;36;1mProgram Load (0.4ms)[0m   [0;1mSELECT * FROM `program` WHERE (`program`.`name` = 'HIV PROGRAM') AND (program.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;35;1mPatientProgram Load (0.5ms)[0m   [0mSELECT * FROM `patient_program` WHERE (voided = 0 AND patient_id = 27 AND program_id = 1 AND location_id = 700) AND (patient_program.voided = 0) [0m
  [4;36;1mConceptName Load (16.4ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HIV STATUS') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.6ms)[0m   [0mSELECT * FROM `obs` WHERE (value_coded IS NOT NULL AND person_id = 27 AND concept_id = 3753) AND (obs.voided = 0) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mPatientProgram Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 27) AND (`patient_program`.`voided` = 0)) AND (patient_program.voided = 0) [0m
  [4;35;1mLocation Load (2.7ms)[0m   [0mSELECT * FROM `location` WHERE (name LIKE '%Martin Preuss Centre - %') AND (location.retired = 0) [0m
  [4;36;1mPatientProgram Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 27) AND (`patient_program`.`voided` = 0)) AND ((((patient_program.voided = 0) AND (location_id IN (700))) AND (date_enrolled < NOW() AND (date_completed IS NULL OR date_completed > NOW()))) AND ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 27) AND (`patient_program`.`voided` = 0)))) [0m
  [4;35;1mConceptName Load (28.5ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mConceptName Load (0.4ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Tests ordered') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.3ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 27 AND concept_id = 1271 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mConceptName Load (11.9ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mObservation Load (0.5ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 27 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mConceptName Load (14.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Sputum submission') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.5ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 27 AND concept_id = 7818 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 27 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mEncounterType Load (0.8ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'HIV Staging') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.5ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (encounter_type = 52 and patient_id = 27) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;35;1mEncounterType Load (0.6ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB Registration') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.4ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (encounter_type = 78 and patient_id = 27) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;35;1mEncounterType Load (0.6ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB CLINIC VISIT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.3ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (patient_id = 27 AND encounter_type = 86 AND DATE(encounter_datetime) = '2015-10-22' ) AND (encounter.voided = 0) [0m
  [4;35;1mProgramLocationRestriction Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `program_location_restriction`[0m
  [4;36;1mProgramLocationRestriction Load (0.3ms)[0m   [0;1mSELECT * FROM `program_location_restriction` WHERE (`program_location_restriction`.`location_id` = 700) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mTask Load (0.6ms)[0m   [0;1mSELECT * FROM `task` WHERE (task.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HIV STATUS') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `obs` WHERE (value_coded IS NOT NULL AND person_id = 27 AND concept_id = 3753) AND (obs.voided = 0) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mConceptName Load (6.7ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'REASON FOR ART ELIGIBILITY') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.4ms)[0m   [0;1mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 7563)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 27 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 27 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
Rendering patients/index
Completed in 1383ms (View: 9, DB: 184) | 200 OK [http://localhost/patients/show/27]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing PatientsController#visit_history (for 127.0.0.1 at 2015-10-22 08:28:53) [GET]
  Parameters: {"patient_id"=>"27", "action"=>"visit_history", "controller"=>"patients"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 27) AND (patient.voided = 0) [0m
  [4;36;1mEncounter Load (0.6ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (patient_id = 27 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (encounter.voided = 0) ORDER BY encounter_datetime DESC[0m
  [4;35;1mOrder Load Including Associations (0.7ms)[0m   [0mSELECT `orders`.`order_id` AS t0_r0, `orders`.`order_type_id` AS t0_r1, `orders`.`concept_id` AS t0_r2, `orders`.`orderer` AS t0_r3, `orders`.`encounter_id` AS t0_r4, `orders`.`instructions` AS t0_r5, `orders`.`start_date` AS t0_r6, `orders`.`auto_expire_date` AS t0_r7, `orders`.`discontinued` AS t0_r8, `orders`.`discontinued_date` AS t0_r9, `orders`.`discontinued_by` AS t0_r10, `orders`.`discontinued_reason` AS t0_r11, `orders`.`creator` AS t0_r12, `orders`.`date_created` AS t0_r13, `orders`.`voided` AS t0_r14, `orders`.`voided_by` AS t0_r15, `orders`.`date_voided` AS t0_r16, `orders`.`void_reason` AS t0_r17, `orders`.`patient_id` AS t0_r18, `orders`.`accession_number` AS t0_r19, `orders`.`obs_id` AS t0_r20, `orders`.`uuid` AS t0_r21, `orders`.`discontinued_reason_non_coded` AS t0_r22, `drug_order`.`order_id` AS t1_r0, `drug_order`.`drug_inventory_id` AS t1_r1, `drug_order`.`dose` AS t1_r2, `drug_order`.`equivalent_daily_dose` AS t1_r3, `drug_order`.`units` AS t1_r4, `drug_order`.`frequency` AS t1_r5, `drug_order`.`prn` AS t1_r6, `drug_order`.`complex` AS t1_r7, `drug_order`.`quantity` AS t1_r8 FROM `orders` LEFT OUTER JOIN `drug_order` ON drug_order.order_id = orders.order_id WHERE (((((orders.voided = 0) AND (drug_order.drug_inventory_id is NOT NULL)) AND (discontinued = 0 AND auto_expire_date > NOW())) AND ((orders.voided = 0) AND ((`orders`.`patient_id` = 27) AND (`orders`.`voided` = 0)))) AND ((`orders`.`patient_id` = 27) AND (`orders`.`voided` = 0))) [0m
  [4;36;1mPatientProgram Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_program`[0m
  [4;35;1mPatientState Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_state`[0m
  [4;36;1mPatientProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 27) AND (`patient_program`.`voided` = 0))) [0m
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 27 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 27 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 27 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mRelationship Load (0.1ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 27) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'APPOINTMENT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 27
 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 27
 AND obs_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM encounter WHERE patient_id = 27 AND encounter_type IN (SELECT encounter_type_id FROM encounter_type WHERE name IN ('VITALS', 'TREATMENT', 'HIV RECEPTION', 'HIV STAGING', 'HIV CLINIC CONSULTATION', 'DISPENSING'))[0m
  [4;35;1mEncounter Load (0.5ms)[0m   [0mSELECT * FROM `encounter` WHERE (NOT (DATE_FORMAT(encounter_datetime, '%Y-%m-%d') IN (NULL)) AND encounter_datetime < NOW()) AND (((encounter.voided = 0) AND ((`encounter`.`patient_id` = 27) AND (`encounter`.`voided` = 0))) AND (`encounter`.`encounter_type` = 7)) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'What was the patients adherence for this drug order') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'ART ADHERENCE') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter e USING(encounter_id) WHERE (concept_id = 6987 AND encounter_type = 68 AND patient_id = 27 AND
 encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY obs_datetime DESC[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'DISPENSING') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (`encounter`.`encounter_type` = 54) AND ((encounter.voided = 0) AND ((`encounter`.`patient_id` = 27) AND (`encounter`.`voided` = 0))) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 27) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5089)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 27 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 27 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 27) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HEIGHT (CM)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5090)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 27 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 27 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mProgram Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `program`[0m
  [4;36;1mProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `program` WHERE (`program`.`name` = 'HIV PROGRAM') AND (program.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;35;1mPatientProgram Load (0.1ms)[0m   [0mSELECT * FROM `patient_program` WHERE (voided = 0 AND patient_id = 27 AND program_id = 1 AND location_id = 700) AND (patient_program.voided = 0) [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HIV STATUS') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (value_coded IS NOT NULL AND person_id = 27 AND concept_id = 3753) AND (obs.voided = 0) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mPatientProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 27) AND (`patient_program`.`voided` = 0)) AND (patient_program.voided = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (name LIKE '%Martin Preuss Centre - %') AND (location.retired = 0) [0m
  [4;36;1mPatientProgram Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 27) AND (`patient_program`.`voided` = 0)) AND ((((patient_program.voided = 0) AND (location_id IN (700))) AND (date_enrolled < NOW() AND (date_completed IS NULL OR date_completed > NOW()))) AND ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 27) AND (`patient_program`.`voided` = 0)))) [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Tests ordered') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 27 AND concept_id = 1271 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 27 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Sputum submission') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 27 AND concept_id = 7818 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 27 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'HIV Staging') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (encounter_type = 52 and patient_id = 27) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB Registration') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (encounter_type = 78 and patient_id = 27) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB CLINIC VISIT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (patient_id = 27 AND encounter_type = 86 AND DATE(encounter_datetime) = '2015-10-22' ) AND (encounter.voided = 0) [0m
  [4;35;1mProgramLocationRestriction Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `program_location_restriction`[0m
  [4;36;1mProgramLocationRestriction Load (0.1ms)[0m   [0;1mSELECT * FROM `program_location_restriction` WHERE (`program_location_restriction`.`location_id` = 700) [0m
Rendering dashboards/visit_history_tab
Completed in 176ms (View: 8, DB: 34) | 200 OK [http://localhost/patients/visit_history?patient_id=27]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing PatientsController#visit_history (for 127.0.0.1 at 2015-10-22 08:28:54) [GET]
  Parameters: {"patient_id"=>"27", "action"=>"visit_history", "controller"=>"patients"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 27) AND (patient.voided = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (patient_id = 27 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (encounter.voided = 0) ORDER BY encounter_datetime DESC[0m
  [4;35;1mOrder Load Including Associations (0.6ms)[0m   [0mSELECT `orders`.`order_id` AS t0_r0, `orders`.`order_type_id` AS t0_r1, `orders`.`concept_id` AS t0_r2, `orders`.`orderer` AS t0_r3, `orders`.`encounter_id` AS t0_r4, `orders`.`instructions` AS t0_r5, `orders`.`start_date` AS t0_r6, `orders`.`auto_expire_date` AS t0_r7, `orders`.`discontinued` AS t0_r8, `orders`.`discontinued_date` AS t0_r9, `orders`.`discontinued_by` AS t0_r10, `orders`.`discontinued_reason` AS t0_r11, `orders`.`creator` AS t0_r12, `orders`.`date_created` AS t0_r13, `orders`.`voided` AS t0_r14, `orders`.`voided_by` AS t0_r15, `orders`.`date_voided` AS t0_r16, `orders`.`void_reason` AS t0_r17, `orders`.`patient_id` AS t0_r18, `orders`.`accession_number` AS t0_r19, `orders`.`obs_id` AS t0_r20, `orders`.`uuid` AS t0_r21, `orders`.`discontinued_reason_non_coded` AS t0_r22, `drug_order`.`order_id` AS t1_r0, `drug_order`.`drug_inventory_id` AS t1_r1, `drug_order`.`dose` AS t1_r2, `drug_order`.`equivalent_daily_dose` AS t1_r3, `drug_order`.`units` AS t1_r4, `drug_order`.`frequency` AS t1_r5, `drug_order`.`prn` AS t1_r6, `drug_order`.`complex` AS t1_r7, `drug_order`.`quantity` AS t1_r8 FROM `orders` LEFT OUTER JOIN `drug_order` ON drug_order.order_id = orders.order_id WHERE (((((orders.voided = 0) AND (drug_order.drug_inventory_id is NOT NULL)) AND (discontinued = 0 AND auto_expire_date > NOW())) AND ((orders.voided = 0) AND ((`orders`.`patient_id` = 27) AND (`orders`.`voided` = 0)))) AND ((`orders`.`patient_id` = 27) AND (`orders`.`voided` = 0))) [0m
  [4;36;1mPatientProgram Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_program`[0m
  [4;35;1mPatientState Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_state`[0m
  [4;36;1mPatientProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 27) AND (`patient_program`.`voided` = 0))) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 27 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 27 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (5.9ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 27 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mRelationship Load (0.1ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 27) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'APPOINTMENT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 27
 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 27
 AND obs_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM encounter WHERE patient_id = 27 AND encounter_type IN (SELECT encounter_type_id FROM encounter_type WHERE name IN ('VITALS', 'TREATMENT', 'HIV RECEPTION', 'HIV STAGING', 'HIV CLINIC CONSULTATION', 'DISPENSING'))[0m
  [4;35;1mEncounter Load (0.6ms)[0m   [0mSELECT * FROM `encounter` WHERE (NOT (DATE_FORMAT(encounter_datetime, '%Y-%m-%d') IN (NULL)) AND encounter_datetime < NOW()) AND (((encounter.voided = 0) AND ((`encounter`.`patient_id` = 27) AND (`encounter`.`voided` = 0))) AND (`encounter`.`encounter_type` = 7)) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'What was the patients adherence for this drug order') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'ART ADHERENCE') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter e USING(encounter_id) WHERE (concept_id = 6987 AND encounter_type = 68 AND patient_id = 27 AND
 encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY obs_datetime DESC[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'DISPENSING') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (`encounter`.`encounter_type` = 54) AND ((encounter.voided = 0) AND ((`encounter`.`patient_id` = 27) AND (`encounter`.`voided` = 0))) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 27) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.2ms)[0m   [0mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5089)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 27 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 27 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 27 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 27) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 27) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HEIGHT (CM)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.2ms)[0m   [0;1mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5090)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 27 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 27 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mProgram Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `program`[0m
  [4;36;1mProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `program` WHERE (`program`.`name` = 'HIV PROGRAM') AND (program.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;35;1mPatientProgram Load (0.1ms)[0m   [0mSELECT * FROM `patient_program` WHERE (voided = 0 AND patient_id = 27 AND program_id = 1 AND location_id = 700) AND (patient_program.voided = 0) [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HIV STATUS') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (value_coded IS NOT NULL AND person_id = 27 AND concept_id = 3753) AND (obs.voided = 0) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mPatientProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 27) AND (`patient_program`.`voided` = 0)) AND (patient_program.voided = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (name LIKE '%Martin Preuss Centre - %') AND (location.retired = 0) [0m
  [4;36;1mPatientProgram Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 27) AND (`patient_program`.`voided` = 0)) AND ((((patient_program.voided = 0) AND (location_id IN (700))) AND (date_enrolled < NOW() AND (date_completed IS NULL OR date_completed > NOW()))) AND ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 27) AND (`patient_program`.`voided` = 0)))) [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Tests ordered') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 27 AND concept_id = 1271 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 27 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Sputum submission') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 27 AND concept_id = 7818 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 27 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'HIV Staging') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (encounter_type = 52 and patient_id = 27) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB Registration') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.0ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (encounter_type = 78 and patient_id = 27) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;35;1mEncounterType Load (0.0ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB CLINIC VISIT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (patient_id = 27 AND encounter_type = 86 AND DATE(encounter_datetime) = '2015-10-22' ) AND (encounter.voided = 0) [0m
  [4;35;1mProgramLocationRestriction Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `program_location_restriction`[0m
  [4;36;1mProgramLocationRestriction Load (0.1ms)[0m   [0;1mSELECT * FROM `program_location_restriction` WHERE (`program_location_restriction`.`location_id` = 700) [0m
Rendering dashboards/visit_history_tab
Completed in 166ms (View: 1, DB: 42) | 200 OK [http://localhost/patients/visit_history?patient_id=27]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing EncountersController#observations (for 127.0.0.1 at 2015-10-22 08:28:54) [GET]
  Parameters: {"action"=>"observations", "controller"=>"encounters", "id"=>"undefined"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.2ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (`encounter`.`encounter_id` = 0) AND (encounter.voided = 0) [0m

ActiveRecord::RecordNotFound (Couldn't find Encounter with ID=undefined):
  app/controllers/generic_encounters_controller.rb:631:in `observations'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (28.7ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#index (for 127.0.0.1 at 2015-10-22 08:28:58) [GET]
  Parameters: {"action"=>"index", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mPerson Load (0.4ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 1) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.5ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mUserRole Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `user_role`[0m
  [4;35;1mUserRole Load (4.9ms)[0m   [0mSELECT * FROM `user_role` WHERE (`user_role`.`user_id` = 1) [0m
Rendering dde/index
Completed in 77ms (View: 11, DB: 30) | 200 OK [http://localhost/clinic]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 08:28:58) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;36;1mPerson Load (0.4ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 19ms (View: 1, DB: 20) | 200 OK [http://localhost/clinic/overview_tab]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (4.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 08:28:58) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 18ms (View: 1, DB: 27) | 200 OK [http://localhost/clinic/overview_tab]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#search (for 127.0.0.1 at 2015-10-22 08:29:03) [GET]
  Parameters: {"action"=>"search", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering dde/search
Completed in 9ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/search]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 08:29:04) [GET]
  Parameters: {"search_string"=>"", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.5ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE '%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'') WHEN 0 THEN 9999 ELSE INSTR(given_name,'') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/given_names?search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:29:11) [GET]
  Parameters: {"search_string"=>"", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.5ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'') WHEN 0 THEN 9999 ELSE INSTR(family_name,'') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 22) | 200 OK [http://localhost/dde/family_names?search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_search (for 127.0.0.1 at 2015-10-22 08:29:24) [GET]
  Parameters: {"gender"=>"M", "given_name"=>"Test", "family_name"=>"Patient", "page"=>"1", "action"=>"ajax_search", "controller"=>"dde"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPerson Load (0.6ms)[0m   [0;1mSELECT `person`.* FROM `person` INNER JOIN `person_name` ON person_name.person_id = person.person_id AND person_name.`voided` = 0 WHERE (given_name = 'Test' AND family_name = 'Patient' AND gender = 'M') AND (person.voided = 0) LIMIT 0, 6[0m
Completed in 120ms (View: 1, DB: 26) | 200 OK [http://localhost/ajax_search?given_name=Test&family_name=Patient&gender=M&page=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:29:28) [GET]
  Parameters: {"search_string"=>"Patient", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.7ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'P353%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Patient') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Patient') END ASC LIMIT 10[0m
Completed in 14ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/family_names?search_string=Patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (4.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 08:29:28) [GET]
  Parameters: {"search_string"=>"Test", "action"=>"given_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'T63%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'Test') WHEN 0 THEN 9999 ELSE INSTR(given_name,'Test') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/given_names?search_string=Test]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:29:31) [GET]
  Parameters: {"search_string"=>"Patient", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.1ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'P353%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Patient') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Patient') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/family_names?search_string=Patient]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_search (for 127.0.0.1 at 2015-10-22 08:29:36) [GET]
  Parameters: {"gender"=>"F", "given_name"=>"Test", "family_name"=>"Patient", "page"=>"1", "action"=>"ajax_search", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPerson Load (0.7ms)[0m   [0mSELECT `person`.* FROM `person` INNER JOIN `person_name` ON person_name.person_id = person.person_id AND person_name.`voided` = 0 WHERE (given_name = 'Test' AND family_name = 'Patient' AND gender = 'F') AND (person.voided = 0) LIMIT 0, 6[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 27 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 127ms (View: 1, DB: 26) | 200 OK [http://localhost/ajax_search?given_name=Test&family_name=Patient&gender=F&page=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_scan_data (for 127.0.0.1 at 2015-10-22 08:29:39) [POST]
  Parameters: {"gender"=>"F", "selected_patient"=>"", "person"=>"{\"national_id\":\"000KV5\",\"gender\":\"F\",\"site_code\":\"MPC\",\"names\":{\"middle_name\":\"Unknown\",\"given_name\":\"Test\",\"maiden_name\":\"\",\"family_name\":\"Patient\"},\"age\":45,\"addresses\":{\"current_village\":\"\",\"current_district\":\"\",\"current_residence\":\"\",\"home_village\":\"Other\",\"current_ta\":\"\",\"home_ta\":\"Chambwe\",\"home_district\":\"Kasungu\"},\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Housewife\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Other\"},\"birthdate_estimated\":true,\"patient\":{\"identifiers\":[]},\"application\":\"Radiology\",\"birthdate\":\"1970-07-05\"}", "given_name"=>"Test", "family_name"=>"Patient", "action"=>"process_scan_data", "patient"=>"0", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/process_scan_data
Completed in 218ms (View: 2, DB: 23) | 200 OK [http://localhost/dde/process_scan_data]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (12.1ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 08:29:40) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"Test\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"T63\",\"family_name\":\"Patient\",\"family_name_code\":\"P353\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T06:28:07.341Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Housewife\",\"country_of_residence\":\"Other\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"\",\"current_district\":\"\",\"current_residence\":\"\",\"home_village\":\"Other\",\"current_ta\":\"\",\"home_ta\":\"Chambwe\",\"home_district\":\"Kasungu\"},\"created_at\":\"2015-10-22T06:28:07.341Z\",\"type\":\"Person\",\"_id\":\"000KV5\",\"_rev\":\"1-cfd5e955c1d1de60e3495a4592aa3e15\",\"birthdate_estimated\":\"true\",\"assigned_site\":\"MPC\",\"birthdate\":\"1970-07-05\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KV5') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.4ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 27 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 27 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.5ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:64:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (70.9ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_scan_data (for 127.0.0.1 at 2015-10-22 08:30:02) [POST]
  Parameters: {"gender"=>"F", "selected_patient"=>"", "person"=>"{\"national_id\":\"000KV5\",\"gender\":\"F\",\"site_code\":\"MPC\",\"names\":{\"middle_name\":\"Unknown\",\"given_name\":\"Test\",\"maiden_name\":\"\",\"family_name\":\"Patient\"},\"age\":45,\"addresses\":{\"current_village\":\"\",\"current_district\":\"\",\"current_residence\":\"\",\"home_village\":\"Other\",\"current_ta\":\"\",\"home_ta\":\"Chambwe\",\"home_district\":\"Kasungu\"},\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Housewife\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Other\"},\"birthdate_estimated\":true,\"patient\":{\"identifiers\":[]},\"application\":\"Radiology\",\"birthdate\":\"1970-07-05\"}", "given_name"=>"Test", "family_name"=>"Patient", "action"=>"process_scan_data", "patient"=>"0", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/process_scan_data
Completed in 206ms (View: 2, DB: 23) | 200 OK [http://localhost/dde/process_scan_data]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 08:30:03) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"Test\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"T63\",\"family_name\":\"Patient\",\"family_name_code\":\"P353\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T06:28:07.341Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Housewife\",\"country_of_residence\":\"Other\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"\",\"current_district\":\"\",\"current_residence\":\"\",\"home_village\":\"Other\",\"current_ta\":\"\",\"home_ta\":\"Chambwe\",\"home_district\":\"Kasungu\"},\"created_at\":\"2015-10-22T06:28:07.341Z\",\"type\":\"Person\",\"_id\":\"000KV5\",\"_rev\":\"1-cfd5e955c1d1de60e3495a4592aa3e15\",\"birthdate_estimated\":\"true\",\"assigned_site\":\"MPC\",\"birthdate\":\"1970-07-05\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KV5') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 27 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 27 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (5.5ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:64:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (27.9ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 08:34:24) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"Test\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"T63\",\"family_name\":\"Patient\",\"family_name_code\":\"P353\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T06:28:07.341Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Housewife\",\"country_of_residence\":\"Other\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"\",\"current_district\":\"\",\"current_residence\":\"\",\"home_village\":\"Other\",\"current_ta\":\"\",\"home_ta\":\"Chambwe\",\"home_district\":\"Kasungu\"},\"created_at\":\"2015-10-22T06:28:07.341Z\",\"type\":\"Person\",\"_id\":\"000KV5\",\"_rev\":\"1-cfd5e955c1d1de60e3495a4592aa3e15\",\"birthdate_estimated\":\"true\",\"assigned_site\":\"MPC\",\"birthdate\":\"1970-07-05\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KV5') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 27 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 27 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:64:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (27.7ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 08:34:28) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"Test\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"T63\",\"family_name\":\"Patient\",\"family_name_code\":\"P353\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T06:28:07.341Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Housewife\",\"country_of_residence\":\"Other\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"\",\"current_district\":\"\",\"current_residence\":\"\",\"home_village\":\"Other\",\"current_ta\":\"\",\"home_ta\":\"Chambwe\",\"home_district\":\"Kasungu\"},\"created_at\":\"2015-10-22T06:28:07.341Z\",\"type\":\"Person\",\"_id\":\"000KV5\",\"_rev\":\"1-cfd5e955c1d1de60e3495a4592aa3e15\",\"birthdate_estimated\":\"true\",\"assigned_site\":\"MPC\",\"birthdate\":\"1970-07-05\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KV5') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 27 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 27 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:64:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (28.2ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (10.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 08:35:11) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"Test\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"T63\",\"family_name\":\"Patient\",\"family_name_code\":\"P353\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T06:28:07.341Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Housewife\",\"country_of_residence\":\"Other\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"\",\"current_district\":\"\",\"current_residence\":\"\",\"home_village\":\"Other\",\"current_ta\":\"\",\"home_ta\":\"Chambwe\",\"home_district\":\"Kasungu\"},\"created_at\":\"2015-10-22T06:28:07.341Z\",\"type\":\"Person\",\"_id\":\"000KV5\",\"_rev\":\"1-cfd5e955c1d1de60e3495a4592aa3e15\",\"birthdate_estimated\":\"true\",\"assigned_site\":\"MPC\",\"birthdate\":\"1970-07-05\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

RuntimeError ({"gender"=>"F", "old_identification_number"=>"", "names"=>{"middle_name"=>"Unknown", "given_name"=>"Test", "given_name_code"=>"T63", "maiden_name"=>"", "family_name"=>"Patient", "family_name_code"=>"P353"}, "updated_at"=>"2015-10-22T06:28:07.341Z", "type"=>"Person", "created_at"=>"2015-10-22T06:28:07.341Z", "addresses"=>{"current_village"=>"", "current_district"=>"", "current_residence"=>"", "home_village"=>"Other", "current_ta"=>"", "home_ta"=>"Chambwe", "home_district"=>"Kasungu"}, "person_attributes"=>{"cell_phone_number"=>"Unknown", "home_phone_number"=>"Unknown", "race"=>"", "office_phone_number"=>"Unknown", "occupation"=>"Housewife", "citizenship"=>"Malawian", "country_of_residence"=>"Other"}, "patient_assigned"=>"true", "_rev"=>"1-cfd5e955c1d1de60e3495a4592aa3e15", "_id"=>"000KV5", "birthdate_estimated"=>"true", "birthdate"=>"1970-07-05", "assigned_site"=>"MPC"}):
  app/controllers/dde_controller.rb:49:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (33.9ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 08:36:31) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"Test\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"T63\",\"family_name\":\"Patient\",\"family_name_code\":\"P353\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T06:28:07.341Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Housewife\",\"country_of_residence\":\"Other\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"\",\"current_district\":\"\",\"current_residence\":\"\",\"home_village\":\"Other\",\"current_ta\":\"\",\"home_ta\":\"Chambwe\",\"home_district\":\"Kasungu\"},\"created_at\":\"2015-10-22T06:28:07.341Z\",\"type\":\"Person\",\"_id\":\"000KV5\",\"_rev\":\"1-cfd5e955c1d1de60e3495a4592aa3e15\",\"birthdate_estimated\":\"true\",\"assigned_site\":\"MPC\",\"birthdate\":\"1970-07-05\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KV5') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 27 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 27 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:64:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (28.6ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 08:36:56) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"Test\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"T63\",\"family_name\":\"Patient\",\"family_name_code\":\"P353\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T06:28:07.341Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Housewife\",\"country_of_residence\":\"Other\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"\",\"current_district\":\"\",\"current_residence\":\"\",\"home_village\":\"Other\",\"current_ta\":\"\",\"home_ta\":\"Chambwe\",\"home_district\":\"Kasungu\"},\"created_at\":\"2015-10-22T06:28:07.341Z\",\"type\":\"Person\",\"_id\":\"000KV5\",\"_rev\":\"1-cfd5e955c1d1de60e3495a4592aa3e15\",\"birthdate_estimated\":\"true\",\"assigned_site\":\"MPC\",\"birthdate\":\"1970-07-05\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KV5') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 27 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 27 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:64:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (28.9ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 08:37:28) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"Test\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"T63\",\"family_name\":\"Patient\",\"family_name_code\":\"P353\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T06:28:07.341Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Housewife\",\"country_of_residence\":\"Other\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"\",\"current_district\":\"\",\"current_residence\":\"\",\"home_village\":\"Other\",\"current_ta\":\"\",\"home_ta\":\"Chambwe\",\"home_district\":\"Kasungu\"},\"created_at\":\"2015-10-22T06:28:07.341Z\",\"type\":\"Person\",\"_id\":\"000KV5\",\"_rev\":\"1-cfd5e955c1d1de60e3495a4592aa3e15\",\"birthdate_estimated\":\"true\",\"assigned_site\":\"MPC\",\"birthdate\":\"1970-07-05\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

RuntimeError (hhhh):
  app/controllers/dde_controller.rb:63:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (65.8ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 08:37:58) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"Test\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"T63\",\"family_name\":\"Patient\",\"family_name_code\":\"P353\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T06:28:07.341Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Housewife\",\"country_of_residence\":\"Other\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"\",\"current_district\":\"\",\"current_residence\":\"\",\"home_village\":\"Other\",\"current_ta\":\"\",\"home_ta\":\"Chambwe\",\"home_district\":\"Kasungu\"},\"created_at\":\"2015-10-22T06:28:07.341Z\",\"type\":\"Person\",\"_id\":\"000KV5\",\"_rev\":\"1-cfd5e955c1d1de60e3495a4592aa3e15\",\"birthdate_estimated\":\"true\",\"assigned_site\":\"MPC\",\"birthdate\":\"1970-07-05\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KV5') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 27 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 27 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 27 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 27 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 27 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 27 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (70.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#index (for 127.0.0.1 at 2015-10-22 08:49:27) [GET]
  Parameters: {"action"=>"index", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 1) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mUserRole Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `user_role`[0m
  [4;35;1mUserRole Load (0.1ms)[0m   [0mSELECT * FROM `user_role` WHERE (`user_role`.`user_id` = 1) [0m
Rendering dde/index
Completed in 36ms (View: 8, DB: 26) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 08:49:28) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;36;1mPerson Load (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;35;1mPersonName Load (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 19ms (View: 1, DB: 21) | 200 OK [http://localhost/clinic/overview_tab]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 08:49:28) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 19ms (View: 1, DB: 25) | 200 OK [http://localhost/clinic/overview_tab]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#search (for 127.0.0.1 at 2015-10-22 08:50:49) [GET]
  Parameters: {"action"=>"search", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering dde/search
Completed in 45ms (View: 38, DB: 24) | 200 OK [http://localhost/dde/search]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (3.8ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 08:50:49) [GET]
  Parameters: {"search_string"=>"", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.1ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE '%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'') WHEN 0 THEN 9999 ELSE INSTR(given_name,'') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 23) | 200 OK [http://localhost/dde/given_names?search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 08:50:51) [GET]
  Parameters: {"search_string"=>"C", "action"=>"given_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.7ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'K%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'C') WHEN 0 THEN 9999 ELSE INSTR(given_name,'C') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/given_names?search_string=C]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (2.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 08:50:51) [GET]
  Parameters: {"search_string"=>"C", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.1ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'K%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'C') WHEN 0 THEN 9999 ELSE INSTR(given_name,'C') END ASC LIMIT 10[0m
Completed in 17ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/given_names?search_string=C]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 08:50:52) [GET]
  Parameters: {"search_string"=>"Ca", "action"=>"given_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'K%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'Ca') WHEN 0 THEN 9999 ELSE INSTR(given_name,'Ca') END ASC LIMIT 10[0m
Completed in 14ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/given_names?search_string=Ca]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 08:50:52) [GET]
  Parameters: {"search_string"=>"Car", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'K4%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'Car') WHEN 0 THEN 9999 ELSE INSTR(given_name,'Car') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 27) | 200 OK [http://localhost/dde/given_names?search_string=Car]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 08:50:52) [GET]
  Parameters: {"search_string"=>"Carl", "action"=>"given_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'K4%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'Carl') WHEN 0 THEN 9999 ELSE INSTR(given_name,'Carl') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 27) | 200 OK [http://localhost/dde/given_names?search_string=Carl]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 08:50:52) [GET]
  Parameters: {"search_string"=>"Carlo", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.7ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'K4%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'Carlo') WHEN 0 THEN 9999 ELSE INSTR(given_name,'Carlo') END ASC LIMIT 10[0m
Completed in 14ms (View: 1, DB: 22) | 200 OK [http://localhost/dde/given_names?search_string=Carlo]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:50:53) [GET]
  Parameters: {"search_string"=>"", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.1ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'') WHEN 0 THEN 9999 ELSE INSTR(family_name,'') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/family_names?search_string=]
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (4.3ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:50:54) [GET]
  Parameters: {"search_string"=>"C", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.5ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'C') WHEN 0 THEN 9999 ELSE INSTR(family_name,'C') END ASC LIMIT 10[0m
Completed in 11ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/family_names?search_string=C]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:50:54) [GET]
  Parameters: {"search_string"=>"C", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.1ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'C') WHEN 0 THEN 9999 ELSE INSTR(family_name,'C') END ASC LIMIT 10[0m
Completed in 14ms (View: 1, DB: 27) | 200 OK [http://localhost/dde/family_names?search_string=C]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (4.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:50:54) [GET]
  Parameters: {"search_string"=>"Ch", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.5ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '9%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Ch') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Ch') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 29) | 200 OK [http://localhost/dde/family_names?search_string=Ch]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:50:54) [GET]
  Parameters: {"search_string"=>"Chi", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '9%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Chi') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Chi') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 27) | 200 OK [http://localhost/dde/family_names?search_string=Chi]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:50:55) [GET]
  Parameters: {"search_string"=>"Chid", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '93%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Chid') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Chid') END ASC LIMIT 10[0m
Completed in 49ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/family_names?search_string=Chid]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:50:55) [GET]
  Parameters: {"search_string"=>"Chida", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.7ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '93%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Chida') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Chida') END ASC LIMIT 10[0m
Completed in 14ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/family_names?search_string=Chida]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:50:55) [GET]
  Parameters: {"search_string"=>"Chidan", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '935%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Chidan') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Chidan') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 28) | 200 OK [http://localhost/dde/family_names?search_string=Chidan]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:50:55) [GET]
  Parameters: {"search_string"=>"Chidand", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '9353%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Chidand') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Chidand') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/family_names?search_string=Chidand]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:50:56) [GET]
  Parameters: {"search_string"=>"Chidanda", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '9353%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Chidanda') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Chidanda') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/family_names?search_string=Chidanda]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:50:56) [GET]
  Parameters: {"search_string"=>"Chidandal", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '9353%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Chidandal') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Chidandal') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 23) | 200 OK [http://localhost/dde/family_names?search_string=Chidandal]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:50:56) [GET]
  Parameters: {"search_string"=>"Chidandale", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.5ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '9353%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Chidandale') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Chidandale') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/family_names?search_string=Chidandale]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_search (for 127.0.0.1 at 2015-10-22 08:51:01) [GET]
  Parameters: {"gender"=>"F", "given_name"=>"Carlo", "family_name"=>"Chidandale", "page"=>"1", "action"=>"ajax_search", "controller"=>"dde"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPerson Load (0.5ms)[0m   [0mSELECT `person`.* FROM `person` INNER JOIN `person_name` ON person_name.person_id = person.person_id AND person_name.`voided` = 0 WHERE (given_name = 'Carlo' AND family_name = 'Chidandale' AND gender = 'F') AND (person.voided = 0) LIMIT 0, 6[0m
Completed in 142ms (View: 1, DB: 25) | 200 OK [http://localhost/ajax_search?given_name=Carlo&family_name=Chidandale&gender=F&page=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#new_patient (for 127.0.0.1 at 2015-10-22 08:51:02) [GET]
  Parameters: {"gender"=>"F", "given_name"=>"Carlo", "family_name"=>"Chidandale", "action"=>"new_patient", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering dde/new_patient
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 23ms (View: 16, DB: 22) | 200 OK [http://localhost/new_patient?given_name=Carlo&family_name=Chidandale&gender=F]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#nationality (for 127.0.0.1 at 2015-10-22 08:51:46) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"", "action"=>"nationality", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDENationality Load (0.2ms)[0m   [0mSELECT * FROM `dde_nationality` WHERE (name LIKE ('%%')) ORDER BY weight[0m
  [4;36;1mDDENationality Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `dde_nationality`[0m
Completed in 13ms (View: 1, DB: 22) | 200 OK [http://localhost/dde/nationality?filter_value=&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#district (for 127.0.0.1 at 2015-10-22 08:51:48) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Central Region", "action"=>"district", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDERegion Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `dde_region`[0m
  [4;35;1mDDERegion Load (0.1ms)[0m   [0mSELECT * FROM `dde_region` WHERE (`dde_region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mDDEDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `dde_district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mDDEDistrict Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `dde_district`[0m
Completed in 18ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/district?filter_value=Central+Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#traditional_authority (for 127.0.0.1 at 2015-10-22 08:51:50) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Dowa ", "action"=>"traditional_authority", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDEDistrict Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `dde_district`[0m
  [4;36;1mDDEDistrict Load (0.3ms)[0m   [0;1mSELECT * FROM `dde_district` WHERE (`dde_district`.`name` = 'Dowa ') LIMIT 1[0m
  [4;35;1mDDETraditionalAuthority Load (0.6ms)[0m   [0mSELECT * FROM `dde_traditional_authority` WHERE (name LIKE ('%%') AND district_id = 12) ORDER BY name[0m
  [4;36;1mDDETraditionalAuthority Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `dde_traditional_authority`[0m
Completed in 18ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/traditional_authority?filter_value=Dowa%20&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (15.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#village (for 127.0.0.1 at 2015-10-22 08:51:53) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Mponela Urban", "action"=>"village", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDETraditionalAuthority Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `dde_traditional_authority`[0m
  [4;35;1mDDETraditionalAuthority Load (0.4ms)[0m   [0mSELECT * FROM `dde_traditional_authority` WHERE (`dde_traditional_authority`.`name` = 'Mponela Urban') LIMIT 1[0m
  [4;36;1mDDEVillage Load (1.1ms)[0m   [0;1mSELECT * FROM `dde_village` WHERE (name LIKE ('%%') AND traditional_authority_id = 100) ORDER BY name[0m
  [4;35;1mDDEVillage Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `dde_village`[0m
Completed in 58ms (View: 1, DB: 43) | 200 OK [http://localhost/dde/village?filter_value=Mponela%20Urban&search_string=]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (3.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#country (for 127.0.0.1 at 2015-10-22 08:51:54) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"", "action"=>"country", "controller"=>"dde"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDECountry Load (0.2ms)[0m   [0mSELECT * FROM `dde_country` WHERE (name LIKE ('%%')) ORDER BY weight[0m
  [4;36;1mDDECountry Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `dde_country`[0m
Completed in 13ms (View: 1, DB: 29) | 200 OK [http://localhost/dde/country?filter_value=&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#district (for 127.0.0.1 at 2015-10-22 08:51:56) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Central Region", "action"=>"district", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDERegion Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `dde_region`[0m
  [4;35;1mDDERegion Load (0.1ms)[0m   [0mSELECT * FROM `dde_region` WHERE (`dde_region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mDDEDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `dde_district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mDDEDistrict Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `dde_district`[0m
Completed in 18ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/district?filter_value=Central+Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#traditional_authority (for 127.0.0.1 at 2015-10-22 08:51:57) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Lilongwe City", "action"=>"traditional_authority", "controller"=>"dde"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDEDistrict Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `dde_district`[0m
  [4;36;1mDDEDistrict Load (0.4ms)[0m   [0;1mSELECT * FROM `dde_district` WHERE (`dde_district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;35;1mDDETraditionalAuthority Load (1.1ms)[0m   [0mSELECT * FROM `dde_traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;36;1mDDETraditionalAuthority Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `dde_traditional_authority`[0m
Completed in 57ms (View: 1, DB: 27) | 200 OK [http://localhost/dde/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (14.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#village (for 127.0.0.1 at 2015-10-22 08:52:00) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Area 25", "action"=>"village", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDETraditionalAuthority Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `dde_traditional_authority`[0m
  [4;35;1mDDETraditionalAuthority Load (0.5ms)[0m   [0mSELECT * FROM `dde_traditional_authority` WHERE (`dde_traditional_authority`.`name` = 'Area 25') LIMIT 1[0m
  [4;36;1mDDEVillage Load (27.5ms)[0m   [0;1mSELECT * FROM `dde_village` WHERE (name LIKE ('%%') AND traditional_authority_id = 144) ORDER BY name[0m
  [4;35;1mDDEVillage Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `dde_village`[0m
Completed in 49ms (View: 2, DB: 67) | 200 OK [http://localhost/dde/village?filter_value=Area%2025&search_string=]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#landmark (for 127.0.0.1 at 2015-10-22 08:52:02) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Area 25a Houses", "action"=>"landmark", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Completed in 8ms (View: 1, DB: 22) | 200 OK [http://localhost/dde/landmark?filter_value=Area%2025a%20Houses&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#send_to_dde (for 127.0.0.1 at 2015-10-22 08:52:25) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"national_id\":null,\"names\":{\"middle_name\":\"Michelle\",\"given_name\":\"Carlo\",\"maiden_name\":\"\",\"family_name\":\"Chidandale\",\"gender\":\"F\"},\"site_code\":\"MPC\",\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"current_village\":\"Area 25a Houses\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Kalindang'oma\",\"current_ta\":\"Area 25\",\"home_ta\":\"Mponela Urban\",\"landmark\":\"Church\",\"home_district\":\"Dowa \"},\"person_attributes\":{\"cell_phone_number\":\"0995326457\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Teacher\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"birthdate\":\"1992-05-05\",\"application\":\"Radiology\",\"print_barcode\":true}", "action"=>"send_to_dde", "controller"=>"dde"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/send_to_dde
Completed in 107ms (View: 5, DB: 25) | 200 OK [http://localhost/dde/send_to_dde]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_process_data (for 127.0.0.1 at 2015-10-22 08:52:25) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"national_id\":null,\"names\":{\"middle_name\":\"Michelle\",\"given_name\":\"Carlo\",\"maiden_name\":\"\",\"family_name\":\"Chidandale\",\"gender\":\"F\"},\"site_code\":\"MPC\",\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"current_village\":\"Area 25a Houses\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Kalindang'oma\",\"current_ta\":\"Area 25\",\"home_ta\":\"Mponela Urban\",\"landmark\":\"Church\",\"home_district\":\"Dowa \"},\"person_attributes\":{\"cell_phone_number\":\"0995326457\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Teacher\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"birthdate\":\"1992-05-05\",\"application\":\"Radiology\",\"print_barcode\":true}", "page"=>1, "action"=>"ajax_process_data", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` IS NULL) AND (patient_identifier.voided = 0) LIMIT 1[0m
Completed in 102ms (View: 2, DB: 20) | 200 OK [http://localhost/dde/ajax_process_data]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_confirmation (for 127.0.0.1 at 2015-10-22 08:52:27) [POST]
  Parameters: {"target"=>"create", "person"=>"{\"gender\":\"F\",\"national_id\":null,\"names\":{\"middle_name\":\"Michelle\",\"given_name\":\"Carlo\",\"maiden_name\":\"\",\"family_name\":\"Chidandale\",\"gender\":\"F\"},\"site_code\":\"MPC\",\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"current_village\":\"Area 25a Houses\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Kalindang'oma\",\"current_ta\":\"Area 25\",\"home_ta\":\"Mponela Urban\",\"landmark\":\"Church\",\"home_district\":\"Dowa \"},\"person_attributes\":{\"cell_phone_number\":\"0995326457\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Teacher\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"birthdate\":\"1992-05-05\",\"application\":\"Radiology\",\"print_barcode\":true}", "action"=>"process_confirmation", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Completed in 159ms (View: 1, DB: 17) | 200 OK [http://localhost/dde/process_confirmation]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 08:52:28) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"national_id\":\"000MGH\",\"names\":{\"middle_name\":\"Michelle\",\"given_name\":\"Carlo\",\"maiden_name\":\"\",\"family_name\":\"Chidandale\",\"gender\":\"F\"},\"site_code\":\"MPC\",\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"current_village\":\"Area 25a Houses\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Kalindang'oma\",\"current_ta\":\"Area 25\",\"home_ta\":\"Mponela Urban\",\"landmark\":\"Church\",\"home_district\":\"Dowa \"},\"person_attributes\":{\"cell_phone_number\":\"0995326457\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Teacher\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"birthdate\":\"1992-05-05\",\"application\":\"Radiology\",\"print_barcode\":true,\"assigned_site\":\"MPC\",\"patient_assigned\":true}", "action"=>"process_result", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000MGH') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPerson Create (0.3ms)[0m   [0;1mINSERT INTO `person` (`gender`, `dead`, `date_created`, `uuid`, `date_voided`, `cause_of_death`, `death_date`, `changed_by`, `voided`, `birthdate_estimated`, `date_changed`, `void_reason`, `creator`, `birthdate`, `voided_by`) VALUES('F', 0, '2015-10-22 08:52:28', '7572f4ae-7889-11e5-a02d-30f9edcc2607', NULL, NULL, NULL, 1, 0, 0, '2015-10-22 08:52:28', NULL, 1, NULL, NULL)[0m
  [4;35;1mSQL (66.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mPerson Update (0.4ms)[0m   [0mUPDATE `person` SET `birthdate` = '1992-05-05', `date_changed` = '2015-10-22 08:52:28' WHERE `person_id` = 28[0m
  [4;36;1mSQL (51.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mPersonNameCode Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonName Create (0.4ms)[0m   [0;1mINSERT INTO `person_name` (`date_created`, `uuid`, `preferred`, `date_voided`, `person_id`, `given_name`, `middle_name`, `family_name`, `family_name_suffix`, `changed_by`, `degree`, `family_name2`, `voided`, `family_name_prefix`, `void_reason`, `date_changed`, `prefix`, `creator`, `voided_by`) VALUES('2015-10-22 08:52:28', '7587be03-7889-11e5-a02d-30f9edcc2607', 0, NULL, 28, 'Carlo', 'Michelle', 'Chidandale', NULL, NULL, NULL, '', 0, NULL, NULL, NULL, NULL, 1, NULL)[0m
  [4;35;1mPersonNameCode Create (0.2ms)[0m   [0mINSERT INTO `person_name_code` (`person_name_id`, `family_name_suffix_code`, `given_name_code`, `family_name_code`, `family_name2_code`, `middle_name_code`) VALUES(28, NULL, 'K4', '9353', NULL, 'N94')[0m
  [4;36;1mSQL (60.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonAddress Create (0.3ms)[0m   [0mINSERT INTO `person_address` (`address1`, `address2`, `date_created`, `uuid`, `preferred`, `date_voided`, `neighborhood_cell`, `person_id`, `country`, `township_division`, `latitude`, `longitude`, `voided`, `county_district`, `subregion`, `void_reason`, `state_province`, `creator`, `city_village`, `postal_code`, `voided_by`, `region`) VALUES('Church', 'Dowa ', '2015-10-22 08:52:28', '759281f0-7889-11e5-a02d-30f9edcc2607', 0, NULL, 'Kalindang\'oma', 28, NULL, 'Area 25', NULL, NULL, 0, 'Mponela Urban', NULL, NULL, 'Lilongwe City', 1, 'Area 25a Houses', NULL, NULL, NULL)[0m
  [4;36;1mSQL (59.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonAttribute Create (0.4ms)[0m   [0;1mINSERT INTO `person_attribute` (`date_created`, `uuid`, `date_voided`, `person_id`, `changed_by`, `voided`, `date_changed`, `void_reason`, `value`, `person_attribute_type_id`, `creator`, `voided_by`) VALUES('2015-10-22 08:52:28', '759d8032-7889-11e5-a02d-30f9edcc2607', NULL, 28, 1, 0, '2015-10-22 08:52:28', NULL, 'Teacher', 13, 1, NULL)[0m
  [4;35;1mSQL (54.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mPersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonAttribute Create (0.2ms)[0m   [0mINSERT INTO `person_attribute` (`date_created`, `uuid`, `date_voided`, `person_id`, `changed_by`, `voided`, `date_changed`, `void_reason`, `value`, `person_attribute_type_id`, `creator`, `voided_by`) VALUES('2015-10-22 08:52:28', '75a6b14b-7889-11e5-a02d-30f9edcc2607', NULL, 28, 1, 0, '2015-10-22 08:52:28', NULL, '0995326457', 12, 1, NULL)[0m
  [4;36;1mSQL (62.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonAttribute Create (0.2ms)[0m   [0;1mINSERT INTO `person_attribute` (`date_created`, `uuid`, `date_voided`, `person_id`, `changed_by`, `voided`, `date_changed`, `void_reason`, `value`, `person_attribute_type_id`, `creator`, `voided_by`) VALUES('2015-10-22 08:52:28', '75b0de54-7889-11e5-a02d-30f9edcc2607', NULL, 28, 1, 0, '2015-10-22 08:52:28', NULL, 'Unknown', 15, 1, NULL)[0m
  [4;35;1mSQL (61.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonAttribute Create (0.3ms)[0m   [0mINSERT INTO `person_attribute` (`date_created`, `uuid`, `date_voided`, `person_id`, `changed_by`, `voided`, `date_changed`, `void_reason`, `value`, `person_attribute_type_id`, `creator`, `voided_by`) VALUES('2015-10-22 08:52:28', '75bb1084-7889-11e5-a02d-30f9edcc2607', NULL, 28, 1, 0, '2015-10-22 08:52:28', NULL, 'Unknown', 14, 1, NULL)[0m
  [4;36;1mSQL (62.0ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonAttribute Create (0.2ms)[0m   [0;1mINSERT INTO `person_attribute` (`date_created`, `uuid`, `date_voided`, `person_id`, `changed_by`, `voided`, `date_changed`, `void_reason`, `value`, `person_attribute_type_id`, `creator`, `voided_by`) VALUES('2015-10-22 08:52:28', '75c52ec3-7889-11e5-a02d-30f9edcc2607', NULL, 28, 1, 0, '2015-10-22 08:52:28', NULL, 'Malawian', 3, 1, NULL)[0m
  [4;35;1mSQL (62.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.3ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 28 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mPatient Create (0.2ms)[0m   [0;1mINSERT INTO `patient` (`date_created`, `date_voided`, `tribe`, `changed_by`, `voided`, `patient_id`, `date_changed`, `void_reason`, `creator`, `voided_by`) VALUES('2015-10-22 08:52:28', NULL, NULL, 1, 0, 28, '2015-10-22 08:52:28', NULL, 1, NULL)[0m
  [4;35;1mSQL (52.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPatientIdentifier Create (0.5ms)[0m   [0mINSERT INTO `patient_identifier` (`date_created`, `uuid`, `preferred`, `date_voided`, `identifier`, `patient_id`, `location_id`, `voided`, `void_reason`, `creator`, `identifier_type`, `voided_by`) VALUES('2015-10-22 08:52:28', '75da35c6-7889-11e5-a02d-30f9edcc2607', 0, NULL, '000MGH', 28, 700, 0, NULL, 1, 3, NULL)[0m
  [4;36;1mPatientIdentifierType Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Load (0.3ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 28 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 28 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPatient Load (0.3ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 28 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 28 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.3ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 28 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.3ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 28 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 28 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonName Load (0.4ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 28 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 28 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 28 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 28 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 28 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 28 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 28 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 28 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 28 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 28 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 28 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 28 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 28 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 28 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 28 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 28) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 28) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 28) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 28) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 28 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mRelationship Load (0.4ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 28) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 28) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 28) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mMysql::Error: Table 'openmrs_demographx.patient' doesn't exist: INSERT INTO openmrs_demographx.patient (patient_id,gender,birthdate,birthdate_estimated,creator,date_created,date_changed)
VALUES(28,"Female","1992-05-05",0,1,'2015-10-22 08:52:28','2015-10-22 08:52:28');
[0m
  [4;35;1mSQL (52.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mPatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000MGH') AND (patient_identifier.voided = 0) LIMIT 1[0m

RuntimeError (28):
  app/controllers/dde_controller.rb:67:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.6ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 08:52:57) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"national_id\":\"000MGH\",\"names\":{\"middle_name\":\"Michelle\",\"given_name\":\"Carlo\",\"maiden_name\":\"\",\"family_name\":\"Chidandale\",\"gender\":\"F\"},\"site_code\":\"MPC\",\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"current_village\":\"Area 25a Houses\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Kalindang'oma\",\"current_ta\":\"Area 25\",\"home_ta\":\"Mponela Urban\",\"landmark\":\"Church\",\"home_district\":\"Dowa \"},\"person_attributes\":{\"cell_phone_number\":\"0995326457\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Teacher\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"birthdate\":\"1992-05-05\",\"application\":\"Radiology\",\"print_barcode\":true,\"assigned_site\":\"MPC\",\"patient_assigned\":true}", "action"=>"process_result", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000MGH') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.5ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 28 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 28 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.4ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 28 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 28 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.7ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 28 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 28 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 28 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 28 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 28 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 28 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 28 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;35;1mPersonName Load (0.4ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 28 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 28 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 28 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 28 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.9ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (19.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_process_data (for 127.0.0.1 at 2015-10-22 08:53:00) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"national_id\":null,\"names\":{\"middle_name\":\"Michelle\",\"given_name\":\"Carlo\",\"maiden_name\":\"\",\"family_name\":\"Chidandale\",\"gender\":\"F\"},\"site_code\":\"MPC\",\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"current_village\":\"Area 25a Houses\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Kalindang'oma\",\"current_ta\":\"Area 25\",\"home_ta\":\"Mponela Urban\",\"landmark\":\"Church\",\"home_district\":\"Dowa \"},\"person_attributes\":{\"cell_phone_number\":\"0995326457\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Teacher\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"birthdate\":\"1992-05-05\",\"application\":\"Radiology\",\"print_barcode\":true}", "page"=>1, "action"=>"ajax_process_data", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` IS NULL) AND (patient_identifier.voided = 0) LIMIT 1[0m
Completed in 166ms (View: 1, DB: 37) | 200 OK [http://localhost/dde/ajax_process_data]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_confirmation (for 127.0.0.1 at 2015-10-22 08:53:02) [POST]
  Parameters: {"target"=>"create", "person"=>"{\"gender\":\"F\",\"national_id\":null,\"names\":{\"middle_name\":\"Michelle\",\"given_name\":\"Carlo\",\"maiden_name\":\"\",\"family_name\":\"Chidandale\",\"gender\":\"F\"},\"site_code\":\"MPC\",\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"current_village\":\"Area 25a Houses\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Kalindang'oma\",\"current_ta\":\"Area 25\",\"home_ta\":\"Mponela Urban\",\"landmark\":\"Church\",\"home_district\":\"Dowa \"},\"person_attributes\":{\"cell_phone_number\":\"0995326457\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Teacher\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"birthdate\":\"1992-05-05\",\"application\":\"Radiology\",\"print_barcode\":true}", "action"=>"process_confirmation", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Completed in 205ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/process_confirmation]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 08:53:02) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"national_id\":\"000ATP\",\"names\":{\"middle_name\":\"Michelle\",\"given_name\":\"Carlo\",\"maiden_name\":\"\",\"family_name\":\"Chidandale\",\"gender\":\"F\"},\"site_code\":\"MPC\",\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"current_village\":\"Area 25a Houses\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Kalindang'oma\",\"current_ta\":\"Area 25\",\"home_ta\":\"Mponela Urban\",\"landmark\":\"Church\",\"home_district\":\"Dowa \"},\"person_attributes\":{\"cell_phone_number\":\"0995326457\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Teacher\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"birthdate\":\"1992-05-05\",\"application\":\"Radiology\",\"print_barcode\":true,\"assigned_site\":\"MPC\",\"patient_assigned\":true}", "action"=>"process_result", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000ATP') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPerson Create (0.2ms)[0m   [0;1mINSERT INTO `person` (`gender`, `dead`, `date_created`, `uuid`, `date_voided`, `cause_of_death`, `death_date`, `changed_by`, `voided`, `birthdate_estimated`, `date_changed`, `void_reason`, `creator`, `birthdate`, `voided_by`) VALUES('F', 0, '2015-10-22 08:53:02', '8a35c055-7889-11e5-a02d-30f9edcc2607', NULL, NULL, NULL, 1, 0, 0, '2015-10-22 08:53:02', NULL, 1, NULL, NULL)[0m
  [4;35;1mSQL (58.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mPerson Update (0.2ms)[0m   [0mUPDATE `person` SET `birthdate` = '1992-05-05', `date_changed` = '2015-10-22 08:53:02' WHERE `person_id` = 29[0m
  [4;36;1mSQL (52.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mPersonNameCode Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonName Create (0.2ms)[0m   [0;1mINSERT INTO `person_name` (`date_created`, `uuid`, `preferred`, `date_voided`, `person_id`, `given_name`, `middle_name`, `family_name`, `family_name_suffix`, `changed_by`, `degree`, `family_name2`, `voided`, `family_name_prefix`, `void_reason`, `date_changed`, `prefix`, `creator`, `voided_by`) VALUES('2015-10-22 08:53:03', '8a493d98-7889-11e5-a02d-30f9edcc2607', 0, NULL, 29, 'Carlo', 'Michelle', 'Chidandale', NULL, NULL, NULL, '', 0, NULL, NULL, NULL, NULL, 1, NULL)[0m
  [4;35;1mPersonNameCode Create (0.2ms)[0m   [0mINSERT INTO `person_name_code` (`person_name_id`, `family_name_suffix_code`, `given_name_code`, `family_name_code`, `family_name2_code`, `middle_name_code`) VALUES(29, NULL, 'K4', '9353', NULL, 'N94')[0m
  [4;36;1mSQL (51.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonAddress Create (0.3ms)[0m   [0mINSERT INTO `person_address` (`address1`, `address2`, `date_created`, `uuid`, `preferred`, `date_voided`, `neighborhood_cell`, `person_id`, `country`, `township_division`, `latitude`, `longitude`, `voided`, `county_district`, `subregion`, `void_reason`, `state_province`, `creator`, `city_village`, `postal_code`, `voided_by`, `region`) VALUES('Church', 'Dowa ', '2015-10-22 08:53:03', '8a52cd2d-7889-11e5-a02d-30f9edcc2607', 0, NULL, 'Kalindang\'oma', 29, NULL, 'Area 25', NULL, NULL, 0, 'Mponela Urban', NULL, NULL, 'Lilongwe City', 1, 'Area 25a Houses', NULL, NULL, NULL)[0m
  [4;36;1mSQL (57.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonAttribute Create (0.3ms)[0m   [0;1mINSERT INTO `person_attribute` (`date_created`, `uuid`, `date_voided`, `person_id`, `changed_by`, `voided`, `date_changed`, `void_reason`, `value`, `person_attribute_type_id`, `creator`, `voided_by`) VALUES('2015-10-22 08:53:03', '8a5ce33a-7889-11e5-a02d-30f9edcc2607', NULL, 29, 1, 0, '2015-10-22 08:53:03', NULL, 'Teacher', 13, 1, NULL)[0m
  [4;35;1mSQL (58.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonAttribute Create (0.2ms)[0m   [0mINSERT INTO `person_attribute` (`date_created`, `uuid`, `date_voided`, `person_id`, `changed_by`, `voided`, `date_changed`, `void_reason`, `value`, `person_attribute_type_id`, `creator`, `voided_by`) VALUES('2015-10-22 08:53:03', '8a66c555-7889-11e5-a02d-30f9edcc2607', NULL, 29, 1, 0, '2015-10-22 08:53:03', NULL, '0995326457', 12, 1, NULL)[0m
  [4;36;1mSQL (60.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonAttribute Create (0.2ms)[0m   [0;1mINSERT INTO `person_attribute` (`date_created`, `uuid`, `date_voided`, `person_id`, `changed_by`, `voided`, `date_changed`, `void_reason`, `value`, `person_attribute_type_id`, `creator`, `voided_by`) VALUES('2015-10-22 08:53:03', '8a70b38d-7889-11e5-a02d-30f9edcc2607', NULL, 29, 1, 0, '2015-10-22 08:53:03', NULL, 'Unknown', 15, 1, NULL)[0m
  [4;35;1mSQL (51.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mPersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonAttribute Create (0.4ms)[0m   [0mINSERT INTO `person_attribute` (`date_created`, `uuid`, `date_voided`, `person_id`, `changed_by`, `voided`, `date_changed`, `void_reason`, `value`, `person_attribute_type_id`, `creator`, `voided_by`) VALUES('2015-10-22 08:53:03', '8a79479c-7889-11e5-a02d-30f9edcc2607', NULL, 29, 1, 0, '2015-10-22 08:53:03', NULL, 'Unknown', 14, 1, NULL)[0m
  [4;36;1mSQL (61.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonAttribute Create (0.3ms)[0m   [0;1mINSERT INTO `person_attribute` (`date_created`, `uuid`, `date_voided`, `person_id`, `changed_by`, `voided`, `date_changed`, `void_reason`, `value`, `person_attribute_type_id`, `creator`, `voided_by`) VALUES('2015-10-22 08:53:03', '8a83787c-7889-11e5-a02d-30f9edcc2607', NULL, 29, 1, 0, '2015-10-22 08:53:03', NULL, 'Malawian', 3, 1, NULL)[0m
  [4;35;1mSQL (61.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mPersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 29 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mPatient Create (0.3ms)[0m   [0;1mINSERT INTO `patient` (`date_created`, `date_voided`, `tribe`, `changed_by`, `voided`, `patient_id`, `date_changed`, `void_reason`, `creator`, `voided_by`) VALUES('2015-10-22 08:53:03', NULL, NULL, 1, 0, 29, '2015-10-22 08:53:03', NULL, 1, NULL)[0m
  [4;35;1mSQL (52.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPatientIdentifier Create (0.3ms)[0m   [0mINSERT INTO `patient_identifier` (`date_created`, `uuid`, `preferred`, `date_voided`, `identifier`, `patient_id`, `location_id`, `voided`, `void_reason`, `creator`, `identifier_type`, `voided_by`) VALUES('2015-10-22 08:53:03', '8a9fb05a-7889-11e5-a02d-30f9edcc2607', 0, NULL, '000ATP', 29, 700, 0, NULL, 1, 3, NULL)[0m
  [4;36;1mPatientIdentifierType Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 29 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 29 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPatient Load (0.3ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 29 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.3ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 29 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 29 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mRelationship Load (0.4ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 29) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mMysql::Error: Table 'openmrs_demographx.patient' doesn't exist: INSERT INTO openmrs_demographx.patient (patient_id,gender,birthdate,birthdate_estimated,creator,date_created,date_changed)
VALUES(29,"Female","1992-05-05",0,1,'2015-10-22 08:53:02','2015-10-22 08:53:02');
[0m
  [4;35;1mSQL (56.0ms)[0m   [0mCOMMIT[0m
  [4;36;1mPatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000ATP') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatient Load (0.3ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 29) AND (patient.voided = 0) [0m
Rendering template within layouts/application
Rendering print/print
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 816ms (View: 1, DB: 665) | 200 OK [http://localhost/dde/process_result]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing PatientsController#national_id_label (for 127.0.0.1 at 2015-10-22 08:53:04) [GET]
  Parameters: {"patient_id"=>"29", "action"=>"national_id_label", "controller"=>"patients"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 29) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.4ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 29 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPatient Load (0.3ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 29 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.4ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.4ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.4ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 29 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonName Load (0.4ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 29 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mRelationship Load (0.4ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 29) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'label_width_height') LIMIT 1[0m
Sending data 292735.lbl
Completed in 102ms (View: 1, DB: 31) | 200 OK [http://localhost/patients/national_id_label?patient_id=29]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing PatientsController#show (for 127.0.0.1 at 2015-10-22 08:53:10) [GET]
  Parameters: {"action"=>"show", "controller"=>"patients", "id"=>"29"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 29) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 29 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 29 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 29 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 29 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mRelationship Load (0.1ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 29) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.4ms)[0m   [0;1mSELECT * FROM `encounter` WHERE ((`encounter`.`patient_id` = 29) AND (`encounter`.`voided` = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) AND (encounter.voided = 0) [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'SERVICES') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.3ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 29 AND concept_id = 31 AND DATE(obs_datetime) = '2015-10-22') AND (obs.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Diabetes Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 14 AND patient_id = 29) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mOrder Load Including Associations (0.4ms)[0m   [0mSELECT `orders`.`order_id` AS t0_r0, `orders`.`order_type_id` AS t0_r1, `orders`.`concept_id` AS t0_r2, `orders`.`orderer` AS t0_r3, `orders`.`encounter_id` AS t0_r4, `orders`.`instructions` AS t0_r5, `orders`.`start_date` AS t0_r6, `orders`.`auto_expire_date` AS t0_r7, `orders`.`discontinued` AS t0_r8, `orders`.`discontinued_date` AS t0_r9, `orders`.`discontinued_by` AS t0_r10, `orders`.`discontinued_reason` AS t0_r11, `orders`.`creator` AS t0_r12, `orders`.`date_created` AS t0_r13, `orders`.`voided` AS t0_r14, `orders`.`voided_by` AS t0_r15, `orders`.`date_voided` AS t0_r16, `orders`.`void_reason` AS t0_r17, `orders`.`patient_id` AS t0_r18, `orders`.`accession_number` AS t0_r19, `orders`.`obs_id` AS t0_r20, `orders`.`uuid` AS t0_r21, `orders`.`discontinued_reason_non_coded` AS t0_r22, `drug_order`.`order_id` AS t1_r0, `drug_order`.`drug_inventory_id` AS t1_r1, `drug_order`.`dose` AS t1_r2, `drug_order`.`equivalent_daily_dose` AS t1_r3, `drug_order`.`units` AS t1_r4, `drug_order`.`frequency` AS t1_r5, `drug_order`.`prn` AS t1_r6, `drug_order`.`complex` AS t1_r7, `drug_order`.`quantity` AS t1_r8 FROM `orders` LEFT OUTER JOIN `drug_order` ON drug_order.order_id = orders.order_id WHERE (((((orders.voided = 0) AND (drug_order.drug_inventory_id is NOT NULL)) AND (discontinued = 0 AND auto_expire_date > NOW())) AND ((orders.voided = 0) AND ((`orders`.`patient_id` = 29) AND (`orders`.`voided` = 0)))) AND ((`orders`.`patient_id` = 29) AND (`orders`.`voided` = 0))) [0m
  [4;36;1mPatientProgram Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_program`[0m
  [4;35;1mPatientState Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_state`[0m
  [4;36;1mPatientProgram Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 29) AND (`patient_program`.`voided` = 0))) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 29 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 29) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'APPOINTMENT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.7ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 29
 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.6ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 29
 AND obs_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;35;1mEncounter Load (0.5ms)[0m   [0mSELECT * FROM encounter WHERE patient_id = 29 AND encounter_type IN (SELECT encounter_type_id FROM encounter_type WHERE name IN ('VITALS', 'TREATMENT', 'HIV RECEPTION', 'HIV STAGING', 'HIV CLINIC CONSULTATION', 'DISPENSING'))[0m
  [4;36;1mEncounter Load (0.5ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (NOT (DATE_FORMAT(encounter_datetime, '%Y-%m-%d') IN (NULL)) AND encounter_datetime < NOW()) AND (((encounter.voided = 0) AND ((`encounter`.`patient_id` = 29) AND (`encounter`.`voided` = 0))) AND (`encounter`.`encounter_type` = 7)) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'What was the patients adherence for this drug order') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'ART ADHERENCE') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mObservation Load (0.4ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter e USING(encounter_id) WHERE (concept_id = 6987 AND encounter_type = 68 AND patient_id = 29 AND
 encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY obs_datetime DESC[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'DISPENSING') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.4ms)[0m   [0mSELECT * FROM `encounter` WHERE (`encounter`.`encounter_type` = 54) AND ((encounter.voided = 0) AND ((`encounter`.`patient_id` = 29) AND (`encounter`.`voided` = 0))) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 29 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 29) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.4ms)[0m   [0;1mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5089)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 29 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 29 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 29 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 29) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HEIGHT (CM)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.4ms)[0m   [0mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5090)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 29 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 29 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mProgram Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `program`[0m
  [4;35;1mProgram Load (0.0ms)[0m   [0mSELECT * FROM `program` WHERE (`program`.`name` = 'HIV PROGRAM') AND (program.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.0ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mLocation Load (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;36;1mPatientProgram Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE (voided = 0 AND patient_id = 29 AND program_id = 1 AND location_id = 700) AND (patient_program.voided = 0) [0m
  [4;35;1mConceptName Load (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HIV STATUS') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.2ms)[0m   [0;1mSELECT * FROM `obs` WHERE (value_coded IS NOT NULL AND person_id = 29 AND concept_id = 3753) AND (obs.voided = 0) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mPatientProgram Load (0.1ms)[0m   [0mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 29) AND (`patient_program`.`voided` = 0)) AND (patient_program.voided = 0) [0m
  [4;36;1mLocation Load (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (name LIKE '%Martin Preuss Centre - %') AND (location.retired = 0) [0m
  [4;35;1mPatientProgram Load (0.2ms)[0m   [0mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 29) AND (`patient_program`.`voided` = 0)) AND ((((patient_program.voided = 0) AND (location_id IN (700))) AND (date_enrolled < NOW() AND (date_completed IS NULL OR date_completed > NOW()))) AND ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 29) AND (`patient_program`.`voided` = 0)))) [0m
  [4;36;1mConceptName Load (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mConceptName Load (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Tests ordered') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.2ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 29 AND concept_id = 1271 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mConceptName Load (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mObservation Load (0.2ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 29 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mConceptName Load (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Sputum submission') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.2ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 29 AND concept_id = 7818 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 29 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mEncounterType Load (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'HIV Staging') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.2ms)[0m   [0mSELECT * FROM `encounter` WHERE (encounter_type = 52 and patient_id = 29) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;36;1mEncounterType Load (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB Registration') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM `encounter` WHERE (encounter_type = 78 and patient_id = 29) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB CLINIC VISIT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.4ms)[0m   [0mSELECT * FROM `encounter` WHERE (patient_id = 29 AND encounter_type = 86 AND DATE(encounter_datetime) = '2015-10-22' ) AND (encounter.voided = 0) [0m
  [4;36;1mProgramLocationRestriction Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `program_location_restriction`[0m
  [4;35;1mProgramLocationRestriction Load (0.1ms)[0m   [0mSELECT * FROM `program_location_restriction` WHERE (`program_location_restriction`.`location_id` = 700) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mTask Load (0.1ms)[0m   [0mSELECT * FROM `task` WHERE (task.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HIV STATUS') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `obs` WHERE (value_coded IS NOT NULL AND person_id = 29 AND concept_id = 3753) AND (obs.voided = 0) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'REASON FOR ART ELIGIBILITY') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.6ms)[0m   [0mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 7563)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 29 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 29 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
Rendering patients/index
Completed in 254ms (View: 1, DB: 40) | 200 OK [http://localhost/patients/show/29]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.4ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing PatientsController#visit_history (for 127.0.0.1 at 2015-10-22 08:53:10) [GET]
  Parameters: {"patient_id"=>"29", "action"=>"visit_history", "controller"=>"patients"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 29) AND (patient.voided = 0) [0m
  [4;35;1mEncounter Load (0.3ms)[0m   [0mSELECT * FROM `encounter` WHERE (patient_id = 29 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (encounter.voided = 0) ORDER BY encounter_datetime DESC[0m
  [4;36;1mOrder Load Including Associations (0.3ms)[0m   [0;1mSELECT `orders`.`order_id` AS t0_r0, `orders`.`order_type_id` AS t0_r1, `orders`.`concept_id` AS t0_r2, `orders`.`orderer` AS t0_r3, `orders`.`encounter_id` AS t0_r4, `orders`.`instructions` AS t0_r5, `orders`.`start_date` AS t0_r6, `orders`.`auto_expire_date` AS t0_r7, `orders`.`discontinued` AS t0_r8, `orders`.`discontinued_date` AS t0_r9, `orders`.`discontinued_by` AS t0_r10, `orders`.`discontinued_reason` AS t0_r11, `orders`.`creator` AS t0_r12, `orders`.`date_created` AS t0_r13, `orders`.`voided` AS t0_r14, `orders`.`voided_by` AS t0_r15, `orders`.`date_voided` AS t0_r16, `orders`.`void_reason` AS t0_r17, `orders`.`patient_id` AS t0_r18, `orders`.`accession_number` AS t0_r19, `orders`.`obs_id` AS t0_r20, `orders`.`uuid` AS t0_r21, `orders`.`discontinued_reason_non_coded` AS t0_r22, `drug_order`.`order_id` AS t1_r0, `drug_order`.`drug_inventory_id` AS t1_r1, `drug_order`.`dose` AS t1_r2, `drug_order`.`equivalent_daily_dose` AS t1_r3, `drug_order`.`units` AS t1_r4, `drug_order`.`frequency` AS t1_r5, `drug_order`.`prn` AS t1_r6, `drug_order`.`complex` AS t1_r7, `drug_order`.`quantity` AS t1_r8 FROM `orders` LEFT OUTER JOIN `drug_order` ON drug_order.order_id = orders.order_id WHERE (((((orders.voided = 0) AND (drug_order.drug_inventory_id is NOT NULL)) AND (discontinued = 0 AND auto_expire_date > NOW())) AND ((orders.voided = 0) AND ((`orders`.`patient_id` = 29) AND (`orders`.`voided` = 0)))) AND ((`orders`.`patient_id` = 29) AND (`orders`.`voided` = 0))) [0m
  [4;35;1mPatientProgram Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_program`[0m
  [4;36;1mPatientState Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_state`[0m
  [4;35;1mPatientProgram Load (0.1ms)[0m   [0mSELECT * FROM `patient_program` WHERE ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 29) AND (`patient_program`.`voided` = 0))) [0m
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 29 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 29 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 29 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonName Load (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 29 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mRelationship Load (0.1ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 29) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'APPOINTMENT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 29
 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 29
 AND obs_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM encounter WHERE patient_id = 29 AND encounter_type IN (SELECT encounter_type_id FROM encounter_type WHERE name IN ('VITALS', 'TREATMENT', 'HIV RECEPTION', 'HIV STAGING', 'HIV CLINIC CONSULTATION', 'DISPENSING'))[0m
  [4;36;1mEncounter Load (0.3ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (NOT (DATE_FORMAT(encounter_datetime, '%Y-%m-%d') IN (NULL)) AND encounter_datetime < NOW()) AND (((encounter.voided = 0) AND ((`encounter`.`patient_id` = 29) AND (`encounter`.`voided` = 0))) AND (`encounter`.`encounter_type` = 7)) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'What was the patients adherence for this drug order') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'ART ADHERENCE') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter e USING(encounter_id) WHERE (concept_id = 6987 AND encounter_type = 68 AND patient_id = 29 AND
 encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY obs_datetime DESC[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'DISPENSING') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM `encounter` WHERE (`encounter`.`encounter_type` = 54) AND ((encounter.voided = 0) AND ((`encounter`.`patient_id` = 29) AND (`encounter`.`voided` = 0))) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 29 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 29) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5089)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 29 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 29 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 29 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 29) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HEIGHT (CM)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5090)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 29 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 29 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mProgram Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `program`[0m
  [4;35;1mProgram Load (0.1ms)[0m   [0mSELECT * FROM `program` WHERE (`program`.`name` = 'HIV PROGRAM') AND (program.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;36;1mPatientProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE (voided = 0 AND patient_id = 29 AND program_id = 1 AND location_id = 700) AND (patient_program.voided = 0) [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HIV STATUS') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE (value_coded IS NOT NULL AND person_id = 29 AND concept_id = 3753) AND (obs.voided = 0) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mPatientProgram Load (0.1ms)[0m   [0mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 29) AND (`patient_program`.`voided` = 0)) AND (patient_program.voided = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (name LIKE '%Martin Preuss Centre - %') AND (location.retired = 0) [0m
  [4;35;1mPatientProgram Load (0.5ms)[0m   [0mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 29) AND (`patient_program`.`voided` = 0)) AND ((((patient_program.voided = 0) AND (location_id IN (700))) AND (date_enrolled < NOW() AND (date_completed IS NULL OR date_completed > NOW()))) AND ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 29) AND (`patient_program`.`voided` = 0)))) [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Tests ordered') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 29 AND concept_id = 1271 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 29 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Sputum submission') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.2ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 29 AND concept_id = 7818 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 29 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'HIV Staging') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM `encounter` WHERE (encounter_type = 52 and patient_id = 29) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB Registration') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.2ms)[0m   [0mSELECT * FROM `encounter` WHERE (encounter_type = 78 and patient_id = 29) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB CLINIC VISIT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM `encounter` WHERE (patient_id = 29 AND encounter_type = 86 AND DATE(encounter_datetime) = '2015-10-22' ) AND (encounter.voided = 0) [0m
  [4;36;1mProgramLocationRestriction Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `program_location_restriction`[0m
  [4;35;1mProgramLocationRestriction Load (0.1ms)[0m   [0mSELECT * FROM `program_location_restriction` WHERE (`program_location_restriction`.`location_id` = 700) [0m
Rendering dashboards/visit_history_tab
Completed in 170ms (View: 1, DB: 25) | 200 OK [http://localhost/patients/visit_history?patient_id=29]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing PatientsController#visit_history (for 127.0.0.1 at 2015-10-22 08:53:11) [GET]
  Parameters: {"patient_id"=>"29", "action"=>"visit_history", "controller"=>"patients"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 29) AND (patient.voided = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM `encounter` WHERE (patient_id = 29 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (encounter.voided = 0) ORDER BY encounter_datetime DESC[0m
  [4;36;1mOrder Load Including Associations (0.6ms)[0m   [0;1mSELECT `orders`.`order_id` AS t0_r0, `orders`.`order_type_id` AS t0_r1, `orders`.`concept_id` AS t0_r2, `orders`.`orderer` AS t0_r3, `orders`.`encounter_id` AS t0_r4, `orders`.`instructions` AS t0_r5, `orders`.`start_date` AS t0_r6, `orders`.`auto_expire_date` AS t0_r7, `orders`.`discontinued` AS t0_r8, `orders`.`discontinued_date` AS t0_r9, `orders`.`discontinued_by` AS t0_r10, `orders`.`discontinued_reason` AS t0_r11, `orders`.`creator` AS t0_r12, `orders`.`date_created` AS t0_r13, `orders`.`voided` AS t0_r14, `orders`.`voided_by` AS t0_r15, `orders`.`date_voided` AS t0_r16, `orders`.`void_reason` AS t0_r17, `orders`.`patient_id` AS t0_r18, `orders`.`accession_number` AS t0_r19, `orders`.`obs_id` AS t0_r20, `orders`.`uuid` AS t0_r21, `orders`.`discontinued_reason_non_coded` AS t0_r22, `drug_order`.`order_id` AS t1_r0, `drug_order`.`drug_inventory_id` AS t1_r1, `drug_order`.`dose` AS t1_r2, `drug_order`.`equivalent_daily_dose` AS t1_r3, `drug_order`.`units` AS t1_r4, `drug_order`.`frequency` AS t1_r5, `drug_order`.`prn` AS t1_r6, `drug_order`.`complex` AS t1_r7, `drug_order`.`quantity` AS t1_r8 FROM `orders` LEFT OUTER JOIN `drug_order` ON drug_order.order_id = orders.order_id WHERE (((((orders.voided = 0) AND (drug_order.drug_inventory_id is NOT NULL)) AND (discontinued = 0 AND auto_expire_date > NOW())) AND ((orders.voided = 0) AND ((`orders`.`patient_id` = 29) AND (`orders`.`voided` = 0)))) AND ((`orders`.`patient_id` = 29) AND (`orders`.`voided` = 0))) [0m
  [4;35;1mPatientProgram Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_program`[0m
  [4;36;1mPatientState Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_state`[0m
  [4;35;1mPatientProgram Load (0.1ms)[0m   [0mSELECT * FROM `patient_program` WHERE ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 29) AND (`patient_program`.`voided` = 0))) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 29 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 29 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 29 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 29 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mRelationship Load (0.1ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 29) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'APPOINTMENT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 29
 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 29
 AND obs_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM encounter WHERE patient_id = 29 AND encounter_type IN (SELECT encounter_type_id FROM encounter_type WHERE name IN ('VITALS', 'TREATMENT', 'HIV RECEPTION', 'HIV STAGING', 'HIV CLINIC CONSULTATION', 'DISPENSING'))[0m
  [4;36;1mEncounter Load (0.5ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (NOT (DATE_FORMAT(encounter_datetime, '%Y-%m-%d') IN (NULL)) AND encounter_datetime < NOW()) AND (((encounter.voided = 0) AND ((`encounter`.`patient_id` = 29) AND (`encounter`.`voided` = 0))) AND (`encounter`.`encounter_type` = 7)) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'What was the patients adherence for this drug order') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'ART ADHERENCE') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter e USING(encounter_id) WHERE (concept_id = 6987 AND encounter_type = 68 AND patient_id = 29 AND
 encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY obs_datetime DESC[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'DISPENSING') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM `encounter` WHERE (`encounter`.`encounter_type` = 54) AND ((encounter.voided = 0) AND ((`encounter`.`patient_id` = 29) AND (`encounter`.`voided` = 0))) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 29 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 29) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5089)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 29 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 29 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 29 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 29 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 29) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 29) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HEIGHT (CM)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5090)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 29 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 29 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mProgram Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `program`[0m
  [4;35;1mProgram Load (0.1ms)[0m   [0mSELECT * FROM `program` WHERE (`program`.`name` = 'HIV PROGRAM') AND (program.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;36;1mPatientProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE (voided = 0 AND patient_id = 29 AND program_id = 1 AND location_id = 700) AND (patient_program.voided = 0) [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HIV STATUS') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE (value_coded IS NOT NULL AND person_id = 29 AND concept_id = 3753) AND (obs.voided = 0) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mPatientProgram Load (0.1ms)[0m   [0mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 29) AND (`patient_program`.`voided` = 0)) AND (patient_program.voided = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (name LIKE '%Martin Preuss Centre - %') AND (location.retired = 0) [0m
  [4;35;1mPatientProgram Load (0.5ms)[0m   [0mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 29) AND (`patient_program`.`voided` = 0)) AND ((((patient_program.voided = 0) AND (location_id IN (700))) AND (date_enrolled < NOW() AND (date_completed IS NULL OR date_completed > NOW()))) AND ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 29) AND (`patient_program`.`voided` = 0)))) [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Tests ordered') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 29 AND concept_id = 1271 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 29 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Sputum submission') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 29 AND concept_id = 7818 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 29 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'HIV Staging') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM `encounter` WHERE (encounter_type = 52 and patient_id = 29) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB Registration') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.0ms)[0m   [0mSELECT * FROM `encounter` WHERE (encounter_type = 78 and patient_id = 29) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB CLINIC VISIT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.0ms)[0m   [0mSELECT * FROM `encounter` WHERE (patient_id = 29 AND encounter_type = 86 AND DATE(encounter_datetime) = '2015-10-22' ) AND (encounter.voided = 0) [0m
  [4;36;1mProgramLocationRestriction Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `program_location_restriction`[0m
  [4;35;1mProgramLocationRestriction Load (0.1ms)[0m   [0mSELECT * FROM `program_location_restriction` WHERE (`program_location_restriction`.`location_id` = 700) [0m
Rendering dashboards/visit_history_tab
Completed in 172ms (View: 1, DB: 36) | 200 OK [http://localhost/patients/visit_history?patient_id=29]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing EncountersController#observations (for 127.0.0.1 at 2015-10-22 08:53:11) [GET]
  Parameters: {"action"=>"observations", "controller"=>"encounters", "id"=>"undefined"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM `encounter` WHERE (`encounter`.`encounter_id` = 0) AND (encounter.voided = 0) [0m

ActiveRecord::RecordNotFound (Couldn't find Encounter with ID=undefined):
  app/controllers/generic_encounters_controller.rb:631:in `observations'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (68.4ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#index (for 127.0.0.1 at 2015-10-22 08:54:12) [GET]
  Parameters: {"action"=>"index", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mPerson Load (0.4ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.5ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mUserRole Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `user_role`[0m
  [4;36;1mUserRole Load (0.1ms)[0m   [0;1mSELECT * FROM `user_role` WHERE (`user_role`.`user_id` = 1) [0m
Rendering dde/index
Completed in 37ms (View: 8, DB: 25) | 200 OK [http://localhost/clinic]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 08:54:13) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;35;1mPerson Load (0.4ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 27ms (View: 1, DB: 24) | 200 OK [http://localhost/clinic/overview_tab]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 08:54:13) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 19ms (View: 1, DB: 24) | 200 OK [http://localhost/clinic/overview_tab]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#search (for 127.0.0.1 at 2015-10-22 08:54:20) [GET]
  Parameters: {"action"=>"search", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering dde/search
Completed in 8ms (View: 1, DB: 22) | 200 OK [http://localhost/dde/search]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 08:54:21) [GET]
  Parameters: {"search_string"=>"", "action"=>"given_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE '%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'') WHEN 0 THEN 9999 ELSE INSTR(given_name,'') END ASC LIMIT 10[0m
Completed in 14ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/given_names?search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 08:54:23) [GET]
  Parameters: {"search_string"=>"", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'') WHEN 0 THEN 9999 ELSE INSTR(family_name,'') END ASC LIMIT 10[0m
Completed in 15ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/family_names?search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_search (for 127.0.0.1 at 2015-10-22 08:54:28) [GET]
  Parameters: {"gender"=>"F", "given_name"=>"Carlo", "family_name"=>"Chidandale", "page"=>"1", "action"=>"ajax_search", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPerson Load (0.8ms)[0m   [0mSELECT `person`.* FROM `person` INNER JOIN `person_name` ON person_name.person_id = person.person_id AND person_name.`voided` = 0 WHERE (given_name = 'Carlo' AND family_name = 'Chidandale' AND gender = 'F') AND (person.voided = 0) LIMIT 0, 6[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.4ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 28 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 28 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 29 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 29 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 170ms (View: 1, DB: 27) | 200 OK [http://localhost/ajax_search?given_name=Carlo&family_name=Chidandale&gender=F&page=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_scan_data (for 127.0.0.1 at 2015-10-22 08:54:35) [POST]
  Parameters: {"gender"=>"F", "selected_patient"=>"", "person"=>"{\"national_id\":\"000ATP\",\"gender\":\"F\",\"site_code\":\"MPC\",\"names\":{\"middle_name\":\"Michelle\",\"given_name\":\"Carlo\",\"maiden_name\":\"\",\"family_name\":\"Chidandale\"},\"age\":23,\"addresses\":{\"current_village\":\"Area 25a Houses\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Kalindang'oma\",\"current_ta\":\"Area 25\",\"home_ta\":\"Mponela Urban\",\"home_district\":\"Dowa \"},\"person_attributes\":{\"cell_phone_number\":\"0995326457\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Teacher\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"application\":\"Radiology\",\"birthdate\":\"1992-05-05\"}", "given_name"=>"Carlo", "family_name"=>"Chidandale", "action"=>"process_scan_data", "patient"=>"0", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/process_scan_data
Completed in 201ms (View: 2, DB: 22) | 200 OK [http://localhost/dde/process_scan_data]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 08:54:35) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"Carlo\",\"middle_name\":\"Michelle\",\"maiden_name\":\"\",\"given_name_code\":\"K4\",\"family_name\":\"Chidandale\",\"family_name_code\":\"9353\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T06:52:25.682Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"0995326457\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Teacher\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25a Houses\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Kalindang'oma\",\"current_ta\":\"Area 25\",\"home_ta\":\"Mponela Urban\",\"home_district\":\"Dowa \"},\"created_at\":\"2015-10-22T06:52:25.684Z\",\"type\":\"Person\",\"_id\":\"000ATP\",\"_rev\":\"1-a5ee5aa420ffb819a6c619c32c28b48e\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1992-05-05\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000ATP') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 29 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 29 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.6ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 29 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 29 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (5.8ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.7ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 29 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.6ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 29 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.5ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 29 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.5ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 29 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 29 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 29 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 29 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 29 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (5.2ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_scan_data (for 127.0.0.1 at 2015-10-22 09:01:57) [POST]
  Parameters: {"gender"=>"F", "selected_patient"=>"", "person"=>"{\"national_id\":\"000MGH\",\"gender\":\"F\",\"site_code\":\"MPC\",\"names\":{\"middle_name\":\"Michelle\",\"given_name\":\"Carlo\",\"maiden_name\":\"\",\"family_name\":\"Chidandale\"},\"age\":23,\"addresses\":{\"current_village\":\"Area 25a Houses\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Kalindang'oma\",\"current_ta\":\"Area 25\",\"home_ta\":\"Mponela Urban\",\"home_district\":\"Dowa \"},\"person_attributes\":{\"cell_phone_number\":\"0995326457\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Teacher\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"application\":\"Radiology\",\"birthdate\":\"1992-05-05\"}", "given_name"=>"Carlo", "family_name"=>"Chidandale", "action"=>"process_scan_data", "patient"=>"1", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/process_scan_data
Completed in 214ms (View: 2, DB: 20) | 200 OK [http://localhost/dde/process_scan_data]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 09:01:57) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"Carlo\",\"middle_name\":\"Michelle\",\"maiden_name\":\"\",\"given_name_code\":\"K4\",\"family_name\":\"Chidandale\",\"family_name_code\":\"9353\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T06:51:50.796Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"0995326457\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Teacher\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25a Houses\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Kalindang'oma\",\"current_ta\":\"Area 25\",\"home_ta\":\"Mponela Urban\",\"home_district\":\"Dowa \"},\"created_at\":\"2015-10-22T06:51:50.796Z\",\"type\":\"Person\",\"_id\":\"000MGH\",\"_rev\":\"1-0373c223e109651400ea9e23439736df\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1992-05-05\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000MGH') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 28 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 28 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.4ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 28 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 28 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.6ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 28 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.5ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 28 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 28 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 28 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 28 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 28 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 28 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.4ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 28 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 28 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 28 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 28 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (26.9ms)
Rendered rescues/_request_and_response (41.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing ApplicationController#process_result (for 127.0.0.1 at 2015-10-22 09:02:30) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"Carlo\",\"middle_name\":\"Michelle\",\"maiden_name\":\"\",\"given_name_code\":\"K4\",\"family_name\":\"Chidandale\",\"family_name_code\":\"9353\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T06:51:50.796Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"0995326457\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Teacher\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25a Houses\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Kalindang'oma\",\"current_ta\":\"Area 25\",\"home_ta\":\"Mponela Urban\",\"home_district\":\"Dowa \"},\"created_at\":\"2015-10-22T06:51:50.796Z\",\"type\":\"Person\",\"_id\":\"000MGH\",\"_rev\":\"1-0373c223e109651400ea9e23439736df\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1992-05-05\"}", "action"=>"process_result", "controller"=>"dde"}

SyntaxError (/var/www/Radiology/app/controllers/dde_controller.rb:67: syntax error, unexpected tASSOC, expecting kEND
     =>  raise patient_id.inspect
       ^):
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (27.3ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 09:03:46) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"Carlo\",\"middle_name\":\"Michelle\",\"maiden_name\":\"\",\"given_name_code\":\"K4\",\"family_name\":\"Chidandale\",\"family_name_code\":\"9353\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T06:51:50.796Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"0995326457\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Teacher\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25a Houses\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Kalindang'oma\",\"current_ta\":\"Area 25\",\"home_ta\":\"Mponela Urban\",\"home_district\":\"Dowa \"},\"created_at\":\"2015-10-22T06:51:50.796Z\",\"type\":\"Person\",\"_id\":\"000MGH\",\"_rev\":\"1-0373c223e109651400ea9e23439736df\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1992-05-05\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000MGH') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 28 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 28 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 28 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 28 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 28 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 28 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 28 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (2.6ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 28 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 28 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 28 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 28 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 28 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 28 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 28 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 28 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (28.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#search (for 127.0.0.1 at 2015-10-22 09:04:56) [GET]
  Parameters: {"action"=>"search", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering dde/search
Completed in 8ms (View: 1, DB: 23) | 200 OK [http://localhost/dde/search]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (4.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 09:04:57) [GET]
  Parameters: {"search_string"=>"", "action"=>"given_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.1ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE '%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'') WHEN 0 THEN 9999 ELSE INSTR(given_name,'') END ASC LIMIT 10[0m
Completed in 51ms (View: 1, DB: 23) | 200 OK [http://localhost/dde/given_names?search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 09:16:34) [GET]
  Parameters: {"search_string"=>"", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.1ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE '%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'') WHEN 0 THEN 9999 ELSE INSTR(given_name,'') END ASC LIMIT 10[0m
Completed in 16ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/given_names?search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 09:16:35) [GET]
  Parameters: {"search_string"=>"k", "action"=>"given_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (9.9ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'K%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'k') WHEN 0 THEN 9999 ELSE INSTR(given_name,'k') END ASC LIMIT 10[0m
Completed in 23ms (View: 1, DB: 37) | 200 OK [http://localhost/dde/given_names?search_string=k]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 09:16:35) [GET]
  Parameters: {"search_string"=>"ka", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'K%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'ka') WHEN 0 THEN 9999 ELSE INSTR(given_name,'ka') END ASC LIMIT 10[0m
Completed in 50ms (View: 1, DB: 28) | 200 OK [http://localhost/dde/given_names?search_string=ka]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 09:16:35) [GET]
  Parameters: {"search_string"=>"kar", "action"=>"given_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.7ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'K4%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'kar') WHEN 0 THEN 9999 ELSE INSTR(given_name,'kar') END ASC LIMIT 10[0m
Completed in 14ms (View: 1, DB: 27) | 200 OK [http://localhost/dde/given_names?search_string=kar]
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 09:16:36) [GET]
  Parameters: {"search_string"=>"kare", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.5ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'K4%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'kare') WHEN 0 THEN 9999 ELSE INSTR(given_name,'kare') END ASC LIMIT 10[0m
Completed in 14ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/given_names?search_string=kare]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (7.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 09:16:37) [GET]
  Parameters: {"search_string"=>"karen", "action"=>"given_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.7ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'K45%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'karen') WHEN 0 THEN 9999 ELSE INSTR(given_name,'karen') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 33) | 200 OK [http://localhost/dde/given_names?search_string=karen]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 09:16:38) [GET]
  Parameters: {"search_string"=>"", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.1ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'') WHEN 0 THEN 9999 ELSE INSTR(family_name,'') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/family_names?search_string=]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 09:16:39) [GET]
  Parameters: {"search_string"=>"G", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'G%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'G') WHEN 0 THEN 9999 ELSE INSTR(family_name,'G') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/family_names?search_string=G]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 09:16:39) [GET]
  Parameters: {"search_string"=>"G", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.1ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'G%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'G') WHEN 0 THEN 9999 ELSE INSTR(family_name,'G') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/family_names?search_string=G]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 09:16:40) [GET]
  Parameters: {"search_string"=>"Ga", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'G%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Ga') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Ga') END ASC LIMIT 10[0m
Completed in 14ms (View: 2, DB: 26) | 200 OK [http://localhost/dde/family_names?search_string=Ga]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 09:16:40) [GET]
  Parameters: {"search_string"=>"Gad", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'G3%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Gad') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Gad') END ASC LIMIT 10[0m
Completed in 14ms (View: 1, DB: 27) | 200 OK [http://localhost/dde/family_names?search_string=Gad]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 09:16:40) [GET]
  Parameters: {"search_string"=>"Gada", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'G3%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Gada') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Gada') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 27) | 200 OK [http://localhost/dde/family_names?search_string=Gada]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (6.4ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 09:16:41) [GET]
  Parameters: {"search_string"=>"Gadama", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.5ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'G35%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Gadama') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Gadama') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 31) | 200 OK [http://localhost/dde/family_names?search_string=Gadama]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 09:16:41) [GET]
  Parameters: {"search_string"=>"Gadama", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.1ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'G35%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Gadama') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Gadama') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/family_names?search_string=Gadama]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_search (for 127.0.0.1 at 2015-10-22 09:16:45) [GET]
  Parameters: {"gender"=>"F", "given_name"=>"karen", "family_name"=>"Gadama", "page"=>"1", "action"=>"ajax_search", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPerson Load (0.8ms)[0m   [0;1mSELECT `person`.* FROM `person` INNER JOIN `person_name` ON person_name.person_id = person.person_id AND person_name.`voided` = 0 WHERE (given_name = 'karen' AND family_name = 'Gadama' AND gender = 'F') AND (person.voided = 0) LIMIT 0, 6[0m
Completed in 103ms (View: 2, DB: 25) | 200 OK [http://localhost/ajax_search?given_name=karen&family_name=Gadama&gender=F&page=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#new_patient (for 127.0.0.1 at 2015-10-22 09:16:47) [GET]
  Parameters: {"gender"=>"F", "given_name"=>"karen", "family_name"=>"Gadama", "action"=>"new_patient", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering dde/new_patient
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 63ms (View: 17, DB: 25) | 200 OK [http://localhost/new_patient?given_name=karen&family_name=Gadama&gender=F]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#nationality (for 127.0.0.1 at 2015-10-22 09:17:26) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"", "action"=>"nationality", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDENationality Load (0.2ms)[0m   [0;1mSELECT * FROM `dde_nationality` WHERE (name LIKE ('%%')) ORDER BY weight[0m
  [4;35;1mDDENationality Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `dde_nationality`[0m
Completed in 15ms (View: 1, DB: 23) | 200 OK [http://localhost/dde/nationality?filter_value=&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#district (for 127.0.0.1 at 2015-10-22 09:17:28) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Northern Region", "action"=>"district", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDERegion Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `dde_region`[0m
  [4;36;1mDDERegion Load (0.3ms)[0m   [0;1mSELECT * FROM `dde_region` WHERE (`dde_region`.`name` = 'Northern Region') LIMIT 1[0m
  [4;35;1mDDEDistrict Load (0.7ms)[0m   [0mSELECT * FROM `dde_district` WHERE (name LIKE ('%') AND region_id = 2 ) ORDER BY name[0m
  [4;36;1mDDEDistrict Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `dde_district`[0m
Completed in 25ms (View: 1, DB: 29) | 200 OK [http://localhost/dde/district?filter_value=Northern+Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (5.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#traditional_authority (for 127.0.0.1 at 2015-10-22 09:17:29) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Karonga", "action"=>"traditional_authority", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDEDistrict Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `dde_district`[0m
  [4;35;1mDDEDistrict Load (0.3ms)[0m   [0mSELECT * FROM `dde_district` WHERE (`dde_district`.`name` = 'Karonga') LIMIT 1[0m
  [4;36;1mDDETraditionalAuthority Load (0.8ms)[0m   [0;1mSELECT * FROM `dde_traditional_authority` WHERE (name LIKE ('%%') AND district_id = 4) ORDER BY name[0m
  [4;35;1mDDETraditionalAuthority Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `dde_traditional_authority`[0m
Completed in 20ms (View: 1, DB: 32) | 200 OK [http://localhost/dde/traditional_authority?filter_value=Karonga&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#village (for 127.0.0.1 at 2015-10-22 09:17:30) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Kilipula", "action"=>"village", "controller"=>"dde"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDETraditionalAuthority Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `dde_traditional_authority`[0m
  [4;36;1mDDETraditionalAuthority Load (0.4ms)[0m   [0;1mSELECT * FROM `dde_traditional_authority` WHERE (`dde_traditional_authority`.`name` = 'Kilipula') LIMIT 1[0m
  [4;35;1mDDEVillage Load (1.9ms)[0m   [0mSELECT * FROM `dde_village` WHERE (name LIKE ('%%') AND traditional_authority_id = 7) ORDER BY name[0m
  [4;36;1mDDEVillage Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `dde_village`[0m
Completed in 22ms (View: 1, DB: 29) | 200 OK [http://localhost/dde/village?filter_value=Kilipula&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#country (for 127.0.0.1 at 2015-10-22 09:17:31) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"", "action"=>"country", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDECountry Load (0.2ms)[0m   [0;1mSELECT * FROM `dde_country` WHERE (name LIKE ('%%')) ORDER BY weight[0m
  [4;35;1mDDECountry Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `dde_country`[0m
Completed in 13ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/country?filter_value=&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#country (for 127.0.0.1 at 2015-10-22 09:17:34) [GET]
  Parameters: {"search_string"=>"Zambia", "filter_value"=>"Zambia", "action"=>"country", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDECountry Load (0.5ms)[0m   [0mSELECT * FROM `dde_country` WHERE (name LIKE ('%Zambia%')) ORDER BY weight[0m
  [4;36;1mDDECountry Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `dde_country`[0m
Completed in 14ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/country?filter_value=Zambia&search_string=Zambia]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#country (for 127.0.0.1 at 2015-10-22 09:17:39) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Zambia", "action"=>"country", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDECountry Load (0.2ms)[0m   [0;1mSELECT * FROM `dde_country` WHERE (name LIKE ('%%')) ORDER BY weight[0m
  [4;35;1mDDECountry Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `dde_country`[0m
Completed in 17ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/country?filter_value=Zambia&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#district (for 127.0.0.1 at 2015-10-22 09:17:41) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Central Region", "action"=>"district", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDERegion Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `dde_region`[0m
  [4;36;1mDDERegion Load (0.1ms)[0m   [0;1mSELECT * FROM `dde_region` WHERE (`dde_region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mDDEDistrict Load (0.1ms)[0m   [0mSELECT * FROM `dde_district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mDDEDistrict Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `dde_district`[0m
Completed in 21ms (View: 2, DB: 26) | 200 OK [http://localhost/dde/district?filter_value=Central+Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#traditional_authority (for 127.0.0.1 at 2015-10-22 09:17:43) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Lilongwe City", "action"=>"traditional_authority", "controller"=>"dde"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDEDistrict Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `dde_district`[0m
  [4;35;1mDDEDistrict Load (0.1ms)[0m   [0mSELECT * FROM `dde_district` WHERE (`dde_district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;36;1mDDETraditionalAuthority Load (0.2ms)[0m   [0;1mSELECT * FROM `dde_traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;35;1mDDETraditionalAuthority Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `dde_traditional_authority`[0m
Completed in 22ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#village (for 127.0.0.1 at 2015-10-22 09:17:46) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Area 25", "action"=>"village", "controller"=>"dde"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDETraditionalAuthority Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `dde_traditional_authority`[0m
  [4;36;1mDDETraditionalAuthority Load (0.2ms)[0m   [0;1mSELECT * FROM `dde_traditional_authority` WHERE (`dde_traditional_authority`.`name` = 'Area 25') LIMIT 1[0m
  [4;35;1mDDEVillage Load (0.2ms)[0m   [0mSELECT * FROM `dde_village` WHERE (name LIKE ('%%') AND traditional_authority_id = 144) ORDER BY name[0m
  [4;36;1mDDEVillage Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `dde_village`[0m
Completed in 20ms (View: 1, DB: 28) | 200 OK [http://localhost/dde/village?filter_value=Area%2025&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#landmark (for 127.0.0.1 at 2015-10-22 09:17:48) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"Area 25c Housing", "action"=>"landmark", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Completed in 8ms (View: 1, DB: 22) | 200 OK [http://localhost/dde/landmark?filter_value=Area%2025c%20Housing&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#send_to_dde (for 127.0.0.1 at 2015-10-22 09:18:06) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"national_id\":null,\"names\":{\"middle_name\":\"Unknown\",\"given_name\":\"karen\",\"maiden_name\":\"\",\"family_name\":\"Gadama\",\"gender\":\"F\"},\"site_code\":\"MPC\",\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"landmark\":\"Church\",\"home_district\":\"Karonga\"},\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Healthcare Worker\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"birthdate\":\"1988-01-01\",\"application\":\"Radiology\",\"print_barcode\":true}", "action"=>"send_to_dde", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/send_to_dde
Completed in 109ms (View: 7, DB: 24) | 200 OK [http://localhost/dde/send_to_dde]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_process_data (for 127.0.0.1 at 2015-10-22 09:18:07) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"national_id\":null,\"names\":{\"middle_name\":\"Unknown\",\"given_name\":\"karen\",\"maiden_name\":\"\",\"family_name\":\"Gadama\",\"gender\":\"F\"},\"site_code\":\"MPC\",\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"landmark\":\"Church\",\"home_district\":\"Karonga\"},\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Healthcare Worker\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"birthdate\":\"1988-01-01\",\"application\":\"Radiology\",\"print_barcode\":true}", "page"=>1, "action"=>"ajax_process_data", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` IS NULL) AND (patient_identifier.voided = 0) LIMIT 1[0m
Completed in 103ms (View: 1, DB: 21) | 200 OK [http://localhost/dde/ajax_process_data]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_confirmation (for 127.0.0.1 at 2015-10-22 09:18:11) [POST]
  Parameters: {"target"=>"create", "person"=>"{\"gender\":\"F\",\"national_id\":null,\"names\":{\"middle_name\":\"Unknown\",\"given_name\":\"karen\",\"maiden_name\":\"\",\"family_name\":\"Gadama\",\"gender\":\"F\"},\"site_code\":\"MPC\",\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"landmark\":\"Church\",\"home_district\":\"Karonga\"},\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Healthcare Worker\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"birthdate\":\"1988-01-01\",\"application\":\"Radiology\",\"print_barcode\":true}", "action"=>"process_confirmation", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Completed in 216ms (View: 1, DB: 14) | 200 OK [http://localhost/dde/process_confirmation]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 09:18:12) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"national_id\":\"000KKD\",\"names\":{\"middle_name\":\"Unknown\",\"given_name\":\"karen\",\"maiden_name\":\"\",\"family_name\":\"Gadama\",\"gender\":\"F\"},\"site_code\":\"MPC\",\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"landmark\":\"Church\",\"home_district\":\"Karonga\"},\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Healthcare Worker\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"birthdate\":\"1988-01-01\",\"application\":\"Radiology\",\"print_barcode\":true,\"assigned_site\":\"MPC\",\"patient_assigned\":true}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KKD') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPerson Create (0.2ms)[0m   [0mINSERT INTO `person` (`gender`, `dead`, `date_created`, `uuid`, `date_voided`, `cause_of_death`, `death_date`, `changed_by`, `voided`, `birthdate_estimated`, `date_changed`, `void_reason`, `creator`, `birthdate`, `voided_by`) VALUES('F', 0, '2015-10-22 09:18:12', '0dc6f05d-788d-11e5-a02d-30f9edcc2607', NULL, NULL, NULL, 1, 0, 0, '2015-10-22 09:18:12', NULL, 1, NULL, NULL)[0m
  [4;36;1mSQL (91.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mPerson Update (0.3ms)[0m   [0;1mUPDATE `person` SET `birthdate` = '1988-01-01', `date_changed` = '2015-10-22 09:18:12' WHERE `person_id` = 30[0m
  [4;35;1mSQL (52.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mPersonNameCode Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonName Create (0.4ms)[0m   [0mINSERT INTO `person_name` (`date_created`, `uuid`, `preferred`, `date_voided`, `person_id`, `given_name`, `middle_name`, `family_name`, `family_name_suffix`, `changed_by`, `degree`, `family_name2`, `voided`, `family_name_prefix`, `void_reason`, `date_changed`, `prefix`, `creator`, `voided_by`) VALUES('2015-10-22 09:18:12', '0ddf62ad-788d-11e5-a02d-30f9edcc2607', 0, NULL, 30, 'karen', 'Unknown', 'Gadama', NULL, NULL, NULL, '', 0, NULL, NULL, NULL, NULL, 1, NULL)[0m
  [4;36;1mPersonNameCode Create (0.2ms)[0m   [0;1mINSERT INTO `person_name_code` (`person_name_id`, `family_name_suffix_code`, `given_name_code`, `family_name_code`, `family_name2_code`, `middle_name_code`) VALUES(30, NULL, 'K45', 'G35', NULL, 'U525')[0m
  [4;35;1mSQL (52.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonAddress Create (0.3ms)[0m   [0;1mINSERT INTO `person_address` (`address1`, `address2`, `date_created`, `uuid`, `preferred`, `date_voided`, `neighborhood_cell`, `person_id`, `country`, `township_division`, `latitude`, `longitude`, `voided`, `county_district`, `subregion`, `void_reason`, `state_province`, `creator`, `city_village`, `postal_code`, `voided_by`, `region`) VALUES('Church', 'Karonga', '2015-10-22 09:18:12', '0de8ccd8-788d-11e5-a02d-30f9edcc2607', 0, NULL, 'Benjamin', 30, NULL, 'Area 25', NULL, NULL, 0, 'Kilipula', NULL, NULL, 'Lilongwe City', 1, 'Area 25c Housing', NULL, NULL, NULL)[0m
  [4;35;1mSQL (48.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonAttribute Create (0.4ms)[0m   [0mINSERT INTO `person_attribute` (`date_created`, `uuid`, `date_voided`, `person_id`, `changed_by`, `voided`, `date_changed`, `void_reason`, `value`, `person_attribute_type_id`, `creator`, `voided_by`) VALUES('2015-10-22 09:18:12', '0df141a6-788d-11e5-a02d-30f9edcc2607', NULL, 30, 1, 0, '2015-10-22 09:18:12', NULL, 'Healthcare Worker', 13, 1, NULL)[0m
  [4;36;1mSQL (48.0ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonAttribute Create (0.3ms)[0m   [0;1mINSERT INTO `person_attribute` (`date_created`, `uuid`, `date_voided`, `person_id`, `changed_by`, `voided`, `date_changed`, `void_reason`, `value`, `person_attribute_type_id`, `creator`, `voided_by`) VALUES('2015-10-22 09:18:12', '0df94f02-788d-11e5-a02d-30f9edcc2607', NULL, 30, 1, 0, '2015-10-22 09:18:12', NULL, 'Unknown', 12, 1, NULL)[0m
  [4;35;1mSQL (51.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonAttribute Create (0.3ms)[0m   [0mINSERT INTO `person_attribute` (`date_created`, `uuid`, `date_voided`, `person_id`, `changed_by`, `voided`, `date_changed`, `void_reason`, `value`, `person_attribute_type_id`, `creator`, `voided_by`) VALUES('2015-10-22 09:18:12', '0e01c257-788d-11e5-a02d-30f9edcc2607', NULL, 30, 1, 0, '2015-10-22 09:18:12', NULL, 'Unknown', 15, 1, NULL)[0m
  [4;36;1mSQL (52.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonAttribute Create (0.3ms)[0m   [0;1mINSERT INTO `person_attribute` (`date_created`, `uuid`, `date_voided`, `person_id`, `changed_by`, `voided`, `date_changed`, `void_reason`, `value`, `person_attribute_type_id`, `creator`, `voided_by`) VALUES('2015-10-22 09:18:12', '0e0a302a-788d-11e5-a02d-30f9edcc2607', NULL, 30, 1, 0, '2015-10-22 09:18:12', NULL, 'Unknown', 14, 1, NULL)[0m
  [4;35;1mSQL (52.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonAttribute Create (0.2ms)[0m   [0mINSERT INTO `person_attribute` (`date_created`, `uuid`, `date_voided`, `person_id`, `changed_by`, `voided`, `date_changed`, `void_reason`, `value`, `person_attribute_type_id`, `creator`, `voided_by`) VALUES('2015-10-22 09:18:12', '0e12c676-788d-11e5-a02d-30f9edcc2607', NULL, 30, 1, 0, '2015-10-22 09:18:12', NULL, 'Malawian', 3, 1, NULL)[0m
  [4;36;1mSQL (52.0ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.3ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mPatient Create (0.3ms)[0m   [0mINSERT INTO `patient` (`date_created`, `date_voided`, `tribe`, `changed_by`, `voided`, `patient_id`, `date_changed`, `void_reason`, `creator`, `voided_by`) VALUES('2015-10-22 09:18:12', NULL, NULL, 1, 0, 30, '2015-10-22 09:18:12', NULL, 1, NULL)[0m
  [4;36;1mSQL (51.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPatientIdentifier Create (0.3ms)[0m   [0;1mINSERT INTO `patient_identifier` (`date_created`, `uuid`, `preferred`, `date_voided`, `identifier`, `patient_id`, `location_id`, `voided`, `void_reason`, `creator`, `identifier_type`, `voided_by`) VALUES('2015-10-22 09:18:12', '0e25eac2-788d-11e5-a02d-30f9edcc2607', 0, NULL, '000KKD', 30, 700, 0, NULL, 1, 3, NULL)[0m
  [4;35;1mPatientIdentifierType Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 30 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 30 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.3ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 30 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.6ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 30 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 30 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.3ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 30 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 30 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.5ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 30) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.5ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 30) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 30) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 30) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 30 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mRelationship Load (0.3ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 30) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 30) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 30) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: Table 'openmrs_demographx.patient' doesn't exist: INSERT INTO openmrs_demographx.patient (patient_id,gender,birthdate,birthdate_estimated,creator,date_created,date_changed)
VALUES(30,"Female","1988-01-01",0,1,'2015-10-22 09:18:12','2015-10-22 09:18:12');
[0m
  [4;36;1mSQL (51.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KKD') AND (patient_identifier.voided = 0) LIMIT 1[0m

RuntimeError (30):
  app/controllers/dde_controller.rb:67:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.0ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_process_data (for 127.0.0.1 at 2015-10-22 09:27:12) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"national_id\":null,\"names\":{\"middle_name\":\"Unknown\",\"given_name\":\"karen\",\"maiden_name\":\"\",\"family_name\":\"Gadama\",\"gender\":\"F\"},\"site_code\":\"MPC\",\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"landmark\":\"Church\",\"home_district\":\"Karonga\"},\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Healthcare Worker\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"birthdate\":\"1988-01-01\",\"application\":\"Radiology\",\"print_barcode\":true}", "page"=>1, "action"=>"ajax_process_data", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` IS NULL) AND (patient_identifier.voided = 0) LIMIT 1[0m
Completed in 108ms (View: 1, DB: 19) | 200 OK [http://localhost/dde/ajax_process_data]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 09:27:16) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;36;1mPerson Load (0.4ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;35;1mPersonName Load (0.5ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 20ms (View: 1, DB: 27) | 200 OK [http://localhost/clinic/overview_tab]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 09:27:17) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 18ms (View: 1, DB: 22) | 200 OK [http://localhost/clinic/overview_tab]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (8.8ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#search (for 127.0.0.1 at 2015-10-22 09:27:19) [GET]
  Parameters: {"action"=>"search", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering dde/search
Completed in 9ms (View: 1, DB: 31) | 200 OK [http://localhost/dde/search]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 09:27:19) [GET]
  Parameters: {"search_string"=>"", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.9ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE '%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'') WHEN 0 THEN 9999 ELSE INSTR(given_name,'') END ASC LIMIT 10[0m
Completed in 14ms (View: 1, DB: 23) | 200 OK [http://localhost/dde/given_names?search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 09:27:22) [GET]
  Parameters: {"search_string"=>"", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.8ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'') WHEN 0 THEN 9999 ELSE INSTR(family_name,'') END ASC LIMIT 10[0m
Completed in 14ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/family_names?search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_search (for 127.0.0.1 at 2015-10-22 09:27:27) [GET]
  Parameters: {"gender"=>"F", "given_name"=>"karen", "family_name"=>"Gadama", "page"=>"1", "action"=>"ajax_search", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPerson Load (0.9ms)[0m   [0;1mSELECT `person`.* FROM `person` INNER JOIN `person_name` ON person_name.person_id = person.person_id AND person_name.`voided` = 0 WHERE (given_name = 'karen' AND family_name = 'Gadama' AND gender = 'F') AND (person.voided = 0) LIMIT 0, 6[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 168ms (View: 1, DB: 30) | 200 OK [http://localhost/ajax_search?given_name=karen&family_name=Gadama&gender=F&page=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.4ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_scan_data (for 127.0.0.1 at 2015-10-22 09:27:29) [POST]
  Parameters: {"gender"=>"F", "selected_patient"=>"", "person"=>"{\"national_id\":\"000KKD\",\"gender\":\"F\",\"site_code\":\"MPC\",\"names\":{\"middle_name\":\"Unknown\",\"given_name\":\"karen\",\"maiden_name\":\"\",\"family_name\":\"Gadama\"},\"age\":27,\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Healthcare Worker\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"application\":\"Radiology\",\"birthdate\":\"1988-01-01\"}", "given_name"=>"karen", "family_name"=>"Gadama", "action"=>"process_scan_data", "patient"=>"0", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/process_scan_data
Completed in 209ms (View: 2, DB: 20) | 200 OK [http://localhost/dde/process_scan_data]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 09:27:29) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"karen\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"K45\",\"family_name\":\"Gadama\",\"family_name_code\":\"G35\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T07:17:34.845Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Healthcare Worker\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"created_at\":\"2015-10-22T07:17:34.845Z\",\"type\":\"Person\",\"_id\":\"000KKD\",\"_rev\":\"1-b9085f807d1b6d4907aa7a50c1f28a66\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1988-01-01\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KKD') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 30 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.4ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.6ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.5ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.5ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.5ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (28.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 09:34:52) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"karen\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"K45\",\"family_name\":\"Gadama\",\"family_name_code\":\"G35\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T07:17:34.845Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Healthcare Worker\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"created_at\":\"2015-10-22T07:17:34.845Z\",\"type\":\"Person\",\"_id\":\"000KKD\",\"_rev\":\"1-b9085f807d1b6d4907aa7a50c1f28a66\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1988-01-01\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KKD') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 30 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (27.2ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_scan_data (for 127.0.0.1 at 2015-10-22 09:34:57) [POST]
  Parameters: {"gender"=>"F", "selected_patient"=>"", "person"=>"{\"national_id\":\"000KKD\",\"gender\":\"F\",\"site_code\":\"MPC\",\"names\":{\"middle_name\":\"Unknown\",\"given_name\":\"karen\",\"maiden_name\":\"\",\"family_name\":\"Gadama\"},\"age\":27,\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Healthcare Worker\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"application\":\"Radiology\",\"birthdate\":\"1988-01-01\"}", "given_name"=>"karen", "family_name"=>"Gadama", "action"=>"process_scan_data", "patient"=>"0", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/process_scan_data
Completed in 207ms (View: 2, DB: 23) | 200 OK [http://localhost/dde/process_scan_data]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 09:34:57) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"karen\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"K45\",\"family_name\":\"Gadama\",\"family_name_code\":\"G35\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T07:17:34.845Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Healthcare Worker\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"created_at\":\"2015-10-22T07:17:34.845Z\",\"type\":\"Person\",\"_id\":\"000KKD\",\"_rev\":\"1-b9085f807d1b6d4907aa7a50c1f28a66\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1988-01-01\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KKD') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 30 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;35;1mPersonName Load (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (71.4ms)
Rendered rescues/_request_and_response (0.5ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mUser Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (6.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 10:15:37) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"karen\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"K45\",\"family_name\":\"Gadama\",\"family_name_code\":\"G35\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T07:17:34.845Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Healthcare Worker\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"created_at\":\"2015-10-22T07:17:34.845Z\",\"type\":\"Person\",\"_id\":\"000KKD\",\"_rev\":\"1-b9085f807d1b6d4907aa7a50c1f28a66\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1988-01-01\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KKD') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 30 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m

RuntimeError ("country_of_residence"):
  lib/dde.rb:202:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (69.2ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 10:54:10) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"karen\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"K45\",\"family_name\":\"Gadama\",\"family_name_code\":\"G35\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T07:17:34.845Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Healthcare Worker\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"created_at\":\"2015-10-22T07:17:34.845Z\",\"type\":\"Person\",\"_id\":\"000KKD\",\"_rev\":\"1-b9085f807d1b6d4907aa7a50c1f28a66\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1988-01-01\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KKD') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 30 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.2ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m

RuntimeError (nil):
  lib/dde.rb:202:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 10:54:33) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"karen\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"K45\",\"family_name\":\"Gadama\",\"family_name_code\":\"G35\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T07:17:34.845Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Healthcare Worker\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"created_at\":\"2015-10-22T07:17:34.845Z\",\"type\":\"Person\",\"_id\":\"000KKD\",\"_rev\":\"1-b9085f807d1b6d4907aa7a50c1f28a66\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1988-01-01\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KKD') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 30 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m

RuntimeError (nil):
  lib/dde.rb:202:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (4.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 10:55:43) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"karen\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"K45\",\"family_name\":\"Gadama\",\"family_name_code\":\"G35\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T07:17:34.845Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Healthcare Worker\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"created_at\":\"2015-10-22T07:17:34.845Z\",\"type\":\"Person\",\"_id\":\"000KKD\",\"_rev\":\"1-b9085f807d1b6d4907aa7a50c1f28a66\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1988-01-01\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KKD') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 30 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m

RuntimeError (nil):
  lib/dde.rb:202:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (28.5ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 10:55:51) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"karen\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"K45\",\"family_name\":\"Gadama\",\"family_name_code\":\"G35\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T07:17:34.845Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Healthcare Worker\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"created_at\":\"2015-10-22T07:17:34.845Z\",\"type\":\"Person\",\"_id\":\"000KKD\",\"_rev\":\"1-b9085f807d1b6d4907aa7a50c1f28a66\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1988-01-01\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.0ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KKD') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 30 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m

RuntimeError ("country_of_residence"):
  lib/dde.rb:202:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (28.7ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 10:56:02) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"karen\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"K45\",\"family_name\":\"Gadama\",\"family_name_code\":\"G35\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T07:17:34.845Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Healthcare Worker\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"created_at\":\"2015-10-22T07:17:34.845Z\",\"type\":\"Person\",\"_id\":\"000KKD\",\"_rev\":\"1-b9085f807d1b6d4907aa7a50c1f28a66\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1988-01-01\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KKD') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 30 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m

RuntimeError (nil):
  lib/dde.rb:202:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (28.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 10:58:05) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"karen\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"K45\",\"family_name\":\"Gadama\",\"family_name_code\":\"G35\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T07:17:34.845Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Healthcare Worker\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"created_at\":\"2015-10-22T07:17:34.845Z\",\"type\":\"Person\",\"_id\":\"000KKD\",\"_rev\":\"1-b9085f807d1b6d4907aa7a50c1f28a66\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1988-01-01\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KKD') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 30 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m

RuntimeError (nil):
  lib/dde.rb:202:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (28.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_scan_data (for 127.0.0.1 at 2015-10-22 10:58:09) [POST]
  Parameters: {"gender"=>"F", "selected_patient"=>"", "person"=>"{\"national_id\":\"000KKD\",\"gender\":\"F\",\"site_code\":\"MPC\",\"names\":{\"middle_name\":\"Unknown\",\"given_name\":\"karen\",\"maiden_name\":\"\",\"family_name\":\"Gadama\"},\"age\":27,\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Healthcare Worker\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"application\":\"Radiology\",\"birthdate\":\"1988-01-01\"}", "given_name"=>"karen", "family_name"=>"Gadama", "action"=>"process_scan_data", "patient"=>"0", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/process_scan_data
Completed in 260ms (View: 14, DB: 26) | 200 OK [http://localhost/dde/process_scan_data]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 10:58:09) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"karen\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"K45\",\"family_name\":\"Gadama\",\"family_name_code\":\"G35\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T07:17:34.845Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Healthcare Worker\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"created_at\":\"2015-10-22T07:17:34.845Z\",\"type\":\"Person\",\"_id\":\"000KKD\",\"_rev\":\"1-b9085f807d1b6d4907aa7a50c1f28a66\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1988-01-01\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KKD') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 30 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m

RuntimeError (nil):
  lib/dde.rb:202:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (74.0ms)
Rendered rescues/_request_and_response (0.5ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 10:58:26) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"karen\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"K45\",\"family_name\":\"Gadama\",\"family_name_code\":\"G35\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T07:17:34.845Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Healthcare Worker\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"created_at\":\"2015-10-22T07:17:34.845Z\",\"type\":\"Person\",\"_id\":\"000KKD\",\"_rev\":\"1-b9085f807d1b6d4907aa7a50c1f28a66\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1988-01-01\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KKD') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 30 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:216:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (71.6ms)
Rendered rescues/_request_and_response (0.5ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (16.9ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_scan_data (for 127.0.0.1 at 2015-10-22 10:58:31) [POST]
  Parameters: {"gender"=>"F", "selected_patient"=>"", "person"=>"{\"national_id\":\"000KKD\",\"gender\":\"F\",\"site_code\":\"MPC\",\"names\":{\"middle_name\":\"Unknown\",\"given_name\":\"karen\",\"maiden_name\":\"\",\"family_name\":\"Gadama\"},\"age\":27,\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Healthcare Worker\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"application\":\"Radiology\",\"birthdate\":\"1988-01-01\"}", "given_name"=>"karen", "family_name"=>"Gadama", "action"=>"process_scan_data", "patient"=>"0", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/process_scan_data
Completed in 206ms (View: 3, DB: 37) | 200 OK [http://localhost/dde/process_scan_data]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 10:58:32) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"karen\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"K45\",\"family_name\":\"Gadama\",\"family_name_code\":\"G35\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T07:17:34.845Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Healthcare Worker\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"created_at\":\"2015-10-22T07:17:34.845Z\",\"type\":\"Person\",\"_id\":\"000KKD\",\"_rev\":\"1-b9085f807d1b6d4907aa7a50c1f28a66\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1988-01-01\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KKD') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 30 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:216:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (26.8ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 11:00:07) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"karen\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"K45\",\"family_name\":\"Gadama\",\"family_name_code\":\"G35\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T07:17:34.845Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Healthcare Worker\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"created_at\":\"2015-10-22T07:17:34.845Z\",\"type\":\"Person\",\"_id\":\"000KKD\",\"_rev\":\"1-b9085f807d1b6d4907aa7a50c1f28a66\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1988-01-01\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KKD') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 30 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:216:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (26.6ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 11:03:59) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"karen\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"K45\",\"family_name\":\"Gadama\",\"family_name_code\":\"G35\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T07:17:34.845Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Healthcare Worker\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"created_at\":\"2015-10-22T07:17:34.845Z\",\"type\":\"Person\",\"_id\":\"000KKD\",\"_rev\":\"1-b9085f807d1b6d4907aa7a50c1f28a66\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1988-01-01\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KKD') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 30 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;35;1mPersonName Load (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:216:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (27.6ms)
Rendered rescues/_request_and_response (0.5ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (2.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (6.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 11:10:13) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"karen\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"K45\",\"family_name\":\"Gadama\",\"family_name_code\":\"G35\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T07:17:34.845Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Healthcare Worker\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"created_at\":\"2015-10-22T07:17:34.845Z\",\"type\":\"Person\",\"_id\":\"000KKD\",\"_rev\":\"1-b9085f807d1b6d4907aa7a50c1f28a66\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1988-01-01\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KKD') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 30 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:216:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (26.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (4.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_scan_data (for 127.0.0.1 at 2015-10-22 11:10:18) [POST]
  Parameters: {"gender"=>"F", "selected_patient"=>"", "person"=>"{\"national_id\":\"000KKD\",\"gender\":\"F\",\"site_code\":\"MPC\",\"names\":{\"middle_name\":\"Unknown\",\"given_name\":\"karen\",\"maiden_name\":\"\",\"family_name\":\"Gadama\"},\"age\":27,\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"office_phone_number\":\"Unknown\",\"occupation\":\"Healthcare Worker\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"application\":\"Radiology\",\"birthdate\":\"1988-01-01\"}", "given_name"=>"karen", "family_name"=>"Gadama", "action"=>"process_scan_data", "patient"=>"0", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/process_scan_data
Completed in 237ms (View: 2, DB: 22) | 200 OK [http://localhost/dde/process_scan_data]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 11:10:19) [POST]
  Parameters: {"person"=>"{\"gender\":\"F\",\"names\":{\"given_name\":\"karen\",\"middle_name\":\"Unknown\",\"maiden_name\":\"\",\"given_name_code\":\"K45\",\"family_name\":\"Gadama\",\"family_name_code\":\"G35\"},\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T07:17:34.845Z\",\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"race\":\"\",\"occupation\":\"Healthcare Worker\",\"country_of_residence\":\"Malawi\",\"citizenship\":\"Malawian\"},\"addresses\":{\"current_village\":\"Area 25c Housing\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_village\":\"Benjamin\",\"current_ta\":\"Area 25\",\"home_ta\":\"Kilipula\",\"home_district\":\"Karonga\"},\"created_at\":\"2015-10-22T07:17:34.845Z\",\"type\":\"Person\",\"_id\":\"000KKD\",\"_rev\":\"1-b9085f807d1b6d4907aa7a50c1f28a66\",\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1988-01-01\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000KKD') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 30 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 30 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 30 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 30 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 30 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 30 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:216:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 11:10:28) [GET]
  Parameters: {"search_string"=>"karen", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.7ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'K45%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'karen') WHEN 0 THEN 9999 ELSE INSTR(given_name,'karen') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/given_names?search_string=karen]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 11:10:30) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.4ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.2ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 27ms (View: 1, DB: 22) | 200 OK [http://localhost/clinic/overview_tab]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 11:10:30) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 19ms (View: 1, DB: 20) | 200 OK [http://localhost/clinic/overview_tab]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#search (for 127.0.0.1 at 2015-10-22 11:10:32) [GET]
  Parameters: {"action"=>"search", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering dde/search
Completed in 9ms (View: 1, DB: 22) | 200 OK [http://localhost/dde/search]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 11:10:32) [GET]
  Parameters: {"search_string"=>"", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.1ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE '%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'') WHEN 0 THEN 9999 ELSE INSTR(given_name,'') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/given_names?search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 11:10:36) [GET]
  Parameters: {"search_string"=>"", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.1ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'') WHEN 0 THEN 9999 ELSE INSTR(family_name,'') END ASC LIMIT 10[0m
Completed in 15ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/family_names?search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_search (for 127.0.0.1 at 2015-10-22 11:10:41) [GET]
  Parameters: {"gender"=>"F", "given_name"=>"Zellece", "family_name"=>"Jamali", "page"=>"1", "action"=>"ajax_search", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPerson Load (0.6ms)[0m   [0;1mSELECT `person`.* FROM `person` INNER JOIN `person_name` ON person_name.person_id = person.person_id AND person_name.`voided` = 0 WHERE (given_name = 'Zellece' AND family_name = 'Jamali' AND gender = 'F') AND (person.voided = 0) LIMIT 0, 6[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 26 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 26 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 141ms (View: 1, DB: 25) | 200 OK [http://localhost/ajax_search?given_name=Zellece&family_name=Jamali&gender=F&page=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#index (for 127.0.0.1 at 2015-10-22 11:12:43) [GET]
  Parameters: {"action"=>"index", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mPerson Load (0.4ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 1) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mUserRole Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `user_role`[0m
  [4;35;1mUserRole Load (0.1ms)[0m   [0mSELECT * FROM `user_role` WHERE (`user_role`.`user_id` = 1) [0m
Rendering dde/index
Completed in 58ms (View: 24, DB: 27) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 11:12:44) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;35;1mPersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 19ms (View: 1, DB: 22) | 200 OK [http://localhost/clinic/overview_tab]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 11:12:44) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 27ms (View: 1, DB: 26) | 200 OK [http://localhost/clinic/overview_tab]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.4ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#search (for 127.0.0.1 at 2015-10-22 11:12:48) [GET]
  Parameters: {"action"=>"search", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering dde/search
Completed in 14ms (View: 2, DB: 19) | 200 OK [http://localhost/dde/search]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 11:12:49) [GET]
  Parameters: {"search_string"=>"", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.1ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE '%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'') WHEN 0 THEN 9999 ELSE INSTR(given_name,'') END ASC LIMIT 10[0m
Completed in 15ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/given_names?search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 11:12:53) [GET]
  Parameters: {"search_string"=>"K", "action"=>"given_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.5ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'K%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'K') WHEN 0 THEN 9999 ELSE INSTR(given_name,'K') END ASC LIMIT 10[0m
Completed in 17ms (View: 1, DB: 18) | 200 OK [http://localhost/dde/given_names?search_string=K]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 11:12:54) [GET]
  Parameters: {"search_string"=>"K", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.1ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'K%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'K') WHEN 0 THEN 9999 ELSE INSTR(given_name,'K') END ASC LIMIT 10[0m
Completed in 18ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/given_names?search_string=K]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 11:12:54) [GET]
  Parameters: {"search_string"=>"Kl", "action"=>"given_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.7ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'K4%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'Kl') WHEN 0 THEN 9999 ELSE INSTR(given_name,'Kl') END ASC LIMIT 10[0m
Completed in 16ms (View: 1, DB: 20) | 200 OK [http://localhost/dde/given_names?search_string=Kl]
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 11:12:54) [GET]
  Parameters: {"search_string"=>"Kli", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.8ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'K4%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'Kli') WHEN 0 THEN 9999 ELSE INSTR(given_name,'Kli') END ASC LIMIT 10[0m
Completed in 15ms (View: 1, DB: 22) | 200 OK [http://localhost/dde/given_names?search_string=Kli]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 11:12:55) [GET]
  Parameters: {"search_string"=>"Klina", "action"=>"given_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.7ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'K45%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'Klina') WHEN 0 THEN 9999 ELSE INSTR(given_name,'Klina') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/given_names?search_string=Klina]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 11:12:55) [GET]
  Parameters: {"search_string"=>"Klina", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.1ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'K45%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'Klina') WHEN 0 THEN 9999 ELSE INSTR(given_name,'Klina') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 22) | 200 OK [http://localhost/dde/given_names?search_string=Klina]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 11:12:55) [GET]
  Parameters: {"search_string"=>"", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.1ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'') WHEN 0 THEN 9999 ELSE INSTR(family_name,'') END ASC LIMIT 10[0m
Completed in 49ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/family_names?search_string=]
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 11:12:56) [GET]
  Parameters: {"search_string"=>"C", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'C') WHEN 0 THEN 9999 ELSE INSTR(family_name,'C') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/family_names?search_string=C]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 11:12:56) [GET]
  Parameters: {"search_string"=>"C", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.1ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'C') WHEN 0 THEN 9999 ELSE INSTR(family_name,'C') END ASC LIMIT 10[0m
Completed in 17ms (View: 1, DB: 23) | 200 OK [http://localhost/dde/family_names?search_string=C]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 11:12:57) [GET]
  Parameters: {"search_string"=>"Ch", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.7ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '9%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Ch') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Ch') END ASC LIMIT 10[0m
Completed in 50ms (View: 1, DB: 27) | 200 OK [http://localhost/dde/family_names?search_string=Ch]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 11:12:57) [GET]
  Parameters: {"search_string"=>"Chi", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.7ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '9%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Chi') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Chi') END ASC LIMIT 10[0m
Completed in 15ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/family_names?search_string=Chi]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 11:12:58) [GET]
  Parameters: {"search_string"=>"Chil", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.3ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '94%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Chil') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Chil') END ASC LIMIT 10[0m
Completed in 19ms (View: 1, DB: 27) | 200 OK [http://localhost/dde/family_names?search_string=Chil]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 11:12:58) [GET]
  Parameters: {"search_string"=>"Chili", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '94%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Chili') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Chili') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/family_names?search_string=Chili]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 11:12:58) [GET]
  Parameters: {"search_string"=>"Chilima", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '945%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Chilima') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Chilima') END ASC LIMIT 10[0m
Completed in 15ms (View: 1, DB: 27) | 200 OK [http://localhost/dde/family_names?search_string=Chilima]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 11:12:59) [GET]
  Parameters: {"search_string"=>"Chilima", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.1ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '945%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Chilima') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Chilima') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/family_names?search_string=Chilima]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_search (for 127.0.0.1 at 2015-10-22 11:13:02) [GET]
  Parameters: {"gender"=>"F", "given_name"=>"Klina", "family_name"=>"Chilima", "page"=>"1", "action"=>"ajax_search", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPerson Load (0.6ms)[0m   [0;1mSELECT `person`.* FROM `person` INNER JOIN `person_name` ON person_name.person_id = person.person_id AND person_name.`voided` = 0 WHERE (given_name = 'Klina' AND family_name = 'Chilima' AND gender = 'F') AND (person.voided = 0) LIMIT 0, 6[0m
Completed in 118ms (View: 2, DB: 23) | 200 OK [http://localhost/ajax_search?given_name=Klina&family_name=Chilima&gender=F&page=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#new_patient (for 127.0.0.1 at 2015-10-22 11:13:04) [GET]
  Parameters: {"gender"=>"F", "given_name"=>"Klina", "family_name"=>"Chilima", "action"=>"new_patient", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering dde/new_patient
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 26ms (View: 17, DB: 24) | 200 OK [http://localhost/new_patient?given_name=Klina&family_name=Chilima&gender=F]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#nationality (for 127.0.0.1 at 2015-10-22 11:13:20) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"", "action"=>"nationality", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDENationality Load (0.2ms)[0m   [0;1mSELECT * FROM `dde_nationality` WHERE (name LIKE ('%%')) ORDER BY weight[0m
  [4;35;1mDDENationality Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `dde_nationality`[0m
Completed in 13ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/nationality?filter_value=&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#nationality (for 127.0.0.1 at 2015-10-22 11:13:37) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"", "action"=>"nationality", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDENationality Load (0.2ms)[0m   [0mSELECT * FROM `dde_nationality` WHERE (name LIKE ('%%')) ORDER BY weight[0m
  [4;36;1mDDENationality Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `dde_nationality`[0m
Completed in 13ms (View: 1, DB: 21) | 200 OK [http://localhost/dde/nationality?filter_value=&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#nationality (for 127.0.0.1 at 2015-10-22 12:56:49) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"", "action"=>"nationality", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDENationality Load (0.1ms)[0m   [0;1mSELECT * FROM `dde_nationality` WHERE (name LIKE ('%%')) ORDER BY weight[0m
  [4;35;1mDDENationality Columns (0.4ms)[0m   [0mSHOW FIELDS FROM `dde_nationality`[0m
Completed in 14ms (View: 1, DB: 20) | 200 OK [http://localhost/dde/nationality?filter_value=&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#nationality (for 127.0.0.1 at 2015-10-22 12:56:49) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"", "action"=>"nationality", "controller"=>"dde"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDENationality Load (0.2ms)[0m   [0mSELECT * FROM `dde_nationality` WHERE (name LIKE ('%%')) ORDER BY weight[0m
  [4;36;1mDDENationality Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `dde_nationality`[0m
Completed in 13ms (View: 1, DB: 19) | 200 OK [http://localhost/dde/nationality?filter_value=&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#nationality (for 127.0.0.1 at 2015-10-22 12:57:49) [GET]
  Parameters: {"search_string"=>"", "filter_value"=>"", "action"=>"nationality", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDENationality Load (0.2ms)[0m   [0;1mSELECT * FROM `dde_nationality` WHERE (name LIKE ('%%')) ORDER BY weight[0m
  [4;35;1mDDENationality Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `dde_nationality`[0m
Completed in 12ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/nationality?filter_value=&search_string=]
^C[2015-10-22 13:04:07] INFO  going to shutdown ...
[2015-10-22 13:04:07] INFO  WEBrick::HTTPServer#start done.
Exiting
]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$  script/server
=> Booting WEBrick
=> Rails 2.3.5 application starting on http://0.0.0.0:3000
/home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/gems/1.8/gems/rails-2.3.5/lib/rails/gem_dependency.rb:119:Warning: Gem::Dependency#version_requirements is deprecated and will be removed on or after August 2010.  Use #requirement
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2015-10-22 13:04:11] INFO  WEBrick 1.3.1
[2015-10-22 13:04:11] INFO  ruby 1.8.7 (2013-06-27) [x86_64-linux]
[2015-10-22 13:04:11] INFO  WEBrick::HTTPServer#start: pid=8562 port=3000
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mTask Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 13:04:17) [GET]
  Parameters: {"action"=>"given_names", "search_string"=>"Klina", "controller"=>"dde"}
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing SessionsController#new (for 127.0.0.1 at 2015-10-22 13:04:17) [GET]
  Parameters: {"action"=>"new", "unauthenticated"=>"true", "controller"=>"sessions"}
Rendering template within layouts/application
Rendering sessions/new
  [4;35;1mGlobalProperty Load (0.3ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 73ms (View: 69, DB: 24) | 200 OK [http://localhost/users/sign_in?unauthenticated=true]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#index (for 127.0.0.1 at 2015-10-22 13:04:21) [GET]
  Parameters: {"action"=>"index", "controller"=>"dde"}
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing SessionsController#new (for 127.0.0.1 at 2015-10-22 13:04:21) [GET]
  Parameters: {"action"=>"new", "unauthenticated"=>"true", "controller"=>"sessions"}
Rendering template within layouts/application
Rendering sessions/new
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 12ms (View: 9, DB: 19) | 200 OK [http://localhost/users/sign_in?unauthenticated=true]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing SessionsController#create (for 127.0.0.1 at 2015-10-22 13:04:31) [POST]
  Parameters: {"password"=>"[FILTERED]", "action"=>"create", "login"=>"admin", "controller"=>"sessions"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`username` = 'admin') AND (users.retired = 0) LIMIT 1[0m
Redirected to http://localhost:3000/clinic
Completed in 8ms (DB: 17) | 302 Found [http://localhost/sessions/create]
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#index (for 127.0.0.1 at 2015-10-22 13:04:31) [GET]
  Parameters: {"action"=>"index", "controller"=>"dde"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Redirected to http://localhost:3000/location
Filter chain halted as [:location_required] rendered_or_redirected.
Completed in 7ms (DB: 24) | 302 Found [http://localhost/clinic]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing SessionsController#location (for 127.0.0.1 at 2015-10-22 13:04:32) [GET]
  Parameters: {"action"=>"location", "controller"=>"sessions"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
Rendering template within layouts/application
Rendering sessions/location
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 19ms (View: 15, DB: 26) | 200 OK [http://localhost/location]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (14.2ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing SessionsController#update (for 127.0.0.1 at 2015-10-22 13:04:38) [POST]
  Parameters: {"action"=>"update", "controller"=>"sessions", "location"=>"721"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.5ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mLocation Load (2.9ms)[0m   [0mSELECT *
 FROM location
 WHERE location_id IN (SELECT location_id
 FROM location_tag_map
 WHERE location_tag_id = (SELECT location_tag_id
 FROM location_tag
 WHERE name = 'Workstation Location'))
 ORDER BY name ASC[0m
Redirected to http://localhost:3000/clinic
Completed in 45ms (DB: 37) | 302 Found [http://localhost/sessions/update]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#index (for 127.0.0.1 at 2015-10-22 13:04:39) [GET]
  Parameters: {"action"=>"index", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.4ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.4ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mLocation Load (0.4ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mPerson Load (0.4ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.6ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mUserRole Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `user_role`[0m
  [4;36;1mUserRole Load (0.3ms)[0m   [0;1mSELECT * FROM `user_role` WHERE (`user_role`.`user_id` = 1) [0m
Rendering dde/index
Completed in 53ms (View: 16, DB: 29) | 200 OK [http://localhost/clinic]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 13:04:39) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.4ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;35;1mEncounterType Load (0.6ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;36;1mEncounter Load (0.4ms)[0m   [0;1mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;36;1mEncounter Load (0.3ms)[0m   [0;1mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;35;1mPerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 66ms (View: 7, DB: 24) | 200 OK [http://localhost/clinic/overview_tab]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 13:04:40) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 18ms (View: 1, DB: 26) | 200 OK [http://localhost/clinic/overview_tab]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#search (for 127.0.0.1 at 2015-10-22 13:04:42) [GET]
  Parameters: {"action"=>"search", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering dde/search
Completed in 16ms (View: 8, DB: 20) | 200 OK [http://localhost/dde/search]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 13:04:43) [GET]
  Parameters: {"action"=>"given_names", "search_string"=>"", "controller"=>"dde"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.5ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE '%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'') WHEN 0 THEN 9999 ELSE INSTR(given_name,'') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/given_names?search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 13:05:13) [GET]
  Parameters: {"action"=>"given_names", "search_string"=>"G", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.5ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'G%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'G') WHEN 0 THEN 9999 ELSE INSTR(given_name,'G') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/given_names?search_string=G]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 13:05:13) [GET]
  Parameters: {"action"=>"given_names", "search_string"=>"G", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.1ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'G%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'G') WHEN 0 THEN 9999 ELSE INSTR(given_name,'G') END ASC LIMIT 10[0m
Completed in 11ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/given_names?search_string=G]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 13:05:13) [GET]
  Parameters: {"action"=>"given_names", "search_string"=>"Gra", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.5ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'G4%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'Gra') WHEN 0 THEN 9999 ELSE INSTR(given_name,'Gra') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/given_names?search_string=Gra]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 13:05:14) [GET]
  Parameters: {"action"=>"given_names", "search_string"=>"Gra", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.1ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'G4%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'Gra') WHEN 0 THEN 9999 ELSE INSTR(given_name,'Gra') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 23) | 200 OK [http://localhost/dde/given_names?search_string=Gra]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 13:05:14) [GET]
  Parameters: {"action"=>"given_names", "search_string"=>"Grace", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'G42%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'Grace') WHEN 0 THEN 9999 ELSE INSTR(given_name,'Grace') END ASC LIMIT 10[0m
Completed in 15ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/given_names?search_string=Grace]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 13:05:14) [GET]
  Parameters: {"action"=>"given_names", "search_string"=>"Grace", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.2ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'G42%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'Grace') WHEN 0 THEN 9999 ELSE INSTR(given_name,'Grace') END ASC LIMIT 10[0m
Completed in 43ms (View: 1, DB: 22) | 200 OK [http://localhost/dde/given_names?search_string=Grace]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:05:16) [GET]
  Parameters: {"action"=>"family_names", "search_string"=>"", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'') WHEN 0 THEN 9999 ELSE INSTR(family_name,'') END ASC LIMIT 10[0m
Completed in 14ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/family_names?search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (2.5ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:05:17) [GET]
  Parameters: {"action"=>"family_names", "search_string"=>"K", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'K') WHEN 0 THEN 9999 ELSE INSTR(family_name,'K') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/family_names?search_string=K]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:05:18) [GET]
  Parameters: {"action"=>"family_names", "search_string"=>"K", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.1ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'K') WHEN 0 THEN 9999 ELSE INSTR(family_name,'K') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/family_names?search_string=K]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:05:18) [GET]
  Parameters: {"action"=>"family_names", "search_string"=>"Ka", "controller"=>"dde"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.5ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Ka') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Ka') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 28) | 200 OK [http://localhost/dde/family_names?search_string=Ka]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:05:18) [GET]
  Parameters: {"action"=>"family_names", "search_string"=>"Kap", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.7ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K1%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Kap') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Kap') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/family_names?search_string=Kap]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:05:18) [GET]
  Parameters: {"action"=>"family_names", "search_string"=>"Kaph", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K1%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Kaph') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Kaph') END ASC LIMIT 10[0m
Completed in 14ms (View: 1, DB: 23) | 200 OK [http://localhost/dde/family_names?search_string=Kaph]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:05:19) [GET]
  Parameters: {"action"=>"family_names", "search_string"=>"Kaphu", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K1%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Kaphu') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Kaphu') END ASC LIMIT 10[0m
Completed in 46ms (View: 1, DB: 22) | 200 OK [http://localhost/dde/family_names?search_string=Kaphu]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:05:19) [GET]
  Parameters: {"action"=>"family_names", "search_string"=>"Kaphuk", "controller"=>"dde"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K12%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Kaphuk') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Kaphuk') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/family_names?search_string=Kaphuk]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:05:19) [GET]
  Parameters: {"action"=>"family_names", "search_string"=>"Kaphuku", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.5ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K12%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Kaphuku') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Kaphuku') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/family_names?search_string=Kaphuku]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:05:20) [GET]
  Parameters: {"action"=>"family_names", "search_string"=>"Kaphukusi", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K126%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Kaphukusi') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Kaphukusi') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/family_names?search_string=Kaphukusi]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:05:20) [GET]
  Parameters: {"action"=>"family_names", "search_string"=>"Kaphukusi", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.1ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K126%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Kaphukusi') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Kaphukusi') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/family_names?search_string=Kaphukusi]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_search (for 127.0.0.1 at 2015-10-22 13:05:24) [GET]
  Parameters: {"action"=>"ajax_search", "gender"=>"F", "family_name"=>"Kaphukusi", "given_name"=>"Grace", "controller"=>"dde", "page"=>"1"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPerson Load (0.7ms)[0m   [0mSELECT `person`.* FROM `person` INNER JOIN `person_name` ON person_name.person_id = person.person_id AND person_name.`voided` = 0 WHERE (given_name = 'Grace' AND family_name = 'Kaphukusi' AND gender = 'F') AND (person.voided = 0) LIMIT 0, 6[0m
Completed in 117ms (View: 2, DB: 23) | 200 OK [http://localhost/ajax_search?given_name=Grace&family_name=Kaphukusi&gender=F&page=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#new_patient (for 127.0.0.1 at 2015-10-22 13:05:26) [GET]
  Parameters: {"action"=>"new_patient", "gender"=>"F", "family_name"=>"Kaphukusi", "given_name"=>"Grace", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering dde/new_patient
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 33ms (View: 24, DB: 23) | 200 OK [http://localhost/new_patient?given_name=Grace&family_name=Kaphukusi&gender=F]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#nationality (for 127.0.0.1 at 2015-10-22 13:05:48) [GET]
  Parameters: {"action"=>"nationality", "search_string"=>"", "controller"=>"dde", "filter_value"=>""}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDENationality Load (1.0ms)[0m   [0mSELECT * FROM `dde_nationality` WHERE (name LIKE ('%%')) ORDER BY weight[0m
  [4;36;1mDDENationality Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `dde_nationality`[0m
Completed in 15ms (View: 1, DB: 27) | 200 OK [http://localhost/dde/nationality?filter_value=&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#district (for 127.0.0.1 at 2015-10-22 13:05:51) [GET]
  Parameters: {"action"=>"district", "search_string"=>"", "controller"=>"dde", "filter_value"=>"Central Region"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDERegion Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `dde_region`[0m
  [4;35;1mDDERegion Load (0.4ms)[0m   [0mSELECT * FROM `dde_region` WHERE (`dde_region`.`name` = 'Central Region') LIMIT 1[0m
  [4;36;1mDDEDistrict Load (0.7ms)[0m   [0;1mSELECT * FROM `dde_district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;35;1mDDEDistrict Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `dde_district`[0m
Completed in 19ms (View: 1, DB: 29) | 200 OK [http://localhost/dde/district?filter_value=Central+Region&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#traditional_authority (for 127.0.0.1 at 2015-10-22 13:05:55) [GET]
  Parameters: {"action"=>"traditional_authority", "search_string"=>"", "controller"=>"dde", "filter_value"=>"Dowa "}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDEDistrict Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `dde_district`[0m
  [4;36;1mDDEDistrict Load (0.4ms)[0m   [0;1mSELECT * FROM `dde_district` WHERE (`dde_district`.`name` = 'Dowa ') LIMIT 1[0m
  [4;35;1mDDETraditionalAuthority Load (0.8ms)[0m   [0mSELECT * FROM `dde_traditional_authority` WHERE (name LIKE ('%%') AND district_id = 12) ORDER BY name[0m
  [4;36;1mDDETraditionalAuthority Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `dde_traditional_authority`[0m
Completed in 19ms (View: 1, DB: 29) | 200 OK [http://localhost/dde/traditional_authority?filter_value=Dowa%20&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#village (for 127.0.0.1 at 2015-10-22 13:05:56) [GET]
  Parameters: {"action"=>"village", "search_string"=>"", "controller"=>"dde", "filter_value"=>"Dowa Boma"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDETraditionalAuthority Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `dde_traditional_authority`[0m
  [4;35;1mDDETraditionalAuthority Load (0.5ms)[0m   [0mSELECT * FROM `dde_traditional_authority` WHERE (`dde_traditional_authority`.`name` = 'Dowa Boma') LIMIT 1[0m
  [4;36;1mDDEVillage Load (0.7ms)[0m   [0;1mSELECT * FROM `dde_village` WHERE (name LIKE ('%%') AND traditional_authority_id = 101) ORDER BY name[0m
  [4;35;1mDDEVillage Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `dde_village`[0m
Completed in 19ms (View: 1, DB: 28) | 200 OK [http://localhost/dde/village?filter_value=Dowa%20Boma&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#traditional_authority (for 127.0.0.1 at 2015-10-22 13:05:58) [GET]
  Parameters: {"action"=>"traditional_authority", "search_string"=>"Dowa Boma", "controller"=>"dde", "filter_value"=>"Dowa "}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDEDistrict Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `dde_district`[0m
  [4;36;1mDDEDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `dde_district` WHERE (`dde_district`.`name` = 'Dowa ') LIMIT 1[0m
  [4;35;1mDDETraditionalAuthority Load (0.5ms)[0m   [0mSELECT * FROM `dde_traditional_authority` WHERE (name LIKE ('%Dowa Boma%') AND district_id = 12) ORDER BY name[0m
  [4;36;1mDDETraditionalAuthority Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `dde_traditional_authority`[0m
Completed in 18ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/traditional_authority?filter_value=Dowa%20&search_string=Dowa%20Boma]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#traditional_authority (for 127.0.0.1 at 2015-10-22 13:06:01) [GET]
  Parameters: {"action"=>"traditional_authority", "search_string"=>"", "controller"=>"dde", "filter_value"=>"Dowa "}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDEDistrict Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `dde_district`[0m
  [4;35;1mDDEDistrict Load (0.1ms)[0m   [0mSELECT * FROM `dde_district` WHERE (`dde_district`.`name` = 'Dowa ') LIMIT 1[0m
  [4;36;1mDDETraditionalAuthority Load (0.1ms)[0m   [0;1mSELECT * FROM `dde_traditional_authority` WHERE (name LIKE ('%%') AND district_id = 12) ORDER BY name[0m
  [4;35;1mDDETraditionalAuthority Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `dde_traditional_authority`[0m
Completed in 20ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/traditional_authority?filter_value=Dowa%20&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#village (for 127.0.0.1 at 2015-10-22 13:06:03) [GET]
  Parameters: {"action"=>"village", "search_string"=>"", "controller"=>"dde", "filter_value"=>"Mponela Urban"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDETraditionalAuthority Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `dde_traditional_authority`[0m
  [4;36;1mDDETraditionalAuthority Load (0.4ms)[0m   [0;1mSELECT * FROM `dde_traditional_authority` WHERE (`dde_traditional_authority`.`name` = 'Mponela Urban') LIMIT 1[0m
  [4;35;1mDDEVillage Load (0.6ms)[0m   [0mSELECT * FROM `dde_village` WHERE (name LIKE ('%%') AND traditional_authority_id = 100) ORDER BY name[0m
  [4;36;1mDDEVillage Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `dde_village`[0m
Completed in 18ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/village?filter_value=Mponela%20Urban&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#country (for 127.0.0.1 at 2015-10-22 13:06:05) [GET]
  Parameters: {"action"=>"country", "search_string"=>"", "controller"=>"dde", "filter_value"=>""}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDECountry Load (0.9ms)[0m   [0;1mSELECT * FROM `dde_country` WHERE (name LIKE ('%%')) ORDER BY weight[0m
  [4;35;1mDDECountry Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `dde_country`[0m
Completed in 14ms (View: 1, DB: 23) | 200 OK [http://localhost/dde/country?filter_value=&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#district (for 127.0.0.1 at 2015-10-22 13:06:08) [GET]
  Parameters: {"action"=>"district", "search_string"=>"", "controller"=>"dde", "filter_value"=>"Central Region"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDERegion Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `dde_region`[0m
  [4;36;1mDDERegion Load (0.1ms)[0m   [0;1mSELECT * FROM `dde_region` WHERE (`dde_region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mDDEDistrict Load (0.1ms)[0m   [0mSELECT * FROM `dde_district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mDDEDistrict Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `dde_district`[0m
Completed in 17ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/district?filter_value=Central+Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#traditional_authority (for 127.0.0.1 at 2015-10-22 13:06:10) [GET]
  Parameters: {"action"=>"traditional_authority", "search_string"=>"", "controller"=>"dde", "filter_value"=>"Lilongwe City"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDEDistrict Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `dde_district`[0m
  [4;35;1mDDEDistrict Load (0.3ms)[0m   [0mSELECT * FROM `dde_district` WHERE (`dde_district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;36;1mDDETraditionalAuthority Load (1.3ms)[0m   [0;1mSELECT * FROM `dde_traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;35;1mDDETraditionalAuthority Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `dde_traditional_authority`[0m
Completed in 20ms (View: 1, DB: 29) | 200 OK [http://localhost/dde/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#village (for 127.0.0.1 at 2015-10-22 13:06:13) [GET]
  Parameters: {"action"=>"village", "search_string"=>"", "controller"=>"dde", "filter_value"=>"Area 25"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDETraditionalAuthority Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `dde_traditional_authority`[0m
  [4;36;1mDDETraditionalAuthority Load (0.5ms)[0m   [0;1mSELECT * FROM `dde_traditional_authority` WHERE (`dde_traditional_authority`.`name` = 'Area 25') LIMIT 1[0m
  [4;35;1mDDEVillage Load (0.7ms)[0m   [0mSELECT * FROM `dde_village` WHERE (name LIKE ('%%') AND traditional_authority_id = 144) ORDER BY name[0m
  [4;36;1mDDEVillage Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `dde_village`[0m
Completed in 18ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/village?filter_value=Area%2025&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (2.5ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#landmark (for 127.0.0.1 at 2015-10-22 13:06:15) [GET]
  Parameters: {"action"=>"landmark", "search_string"=>"", "controller"=>"dde", "filter_value"=>"Area 25a Location"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Completed in 8ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/landmark?filter_value=Area%2025a%20Location&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#send_to_dde (for 127.0.0.1 at 2015-10-22 13:06:44) [POST]
  Parameters: {"person"=>"{\"person_attributes\":{\"cell_phone_number\":\"0884142600\",\"office_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"occupation\":\"Student\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"names\":{\"middle_name\":\"love\",\"family_name\":\"Kaphukusi\",\"given_name\":\"Grace\",\"maiden_name\":\"\",\"gender\":\"F\"},\"birthdate_estimated\":false,\"addresses\":{\"home_village\":\"Chidothi\",\"home_ta\":\"Mponela Urban\",\"current_residence\":\"Church\",\"current_ta\":\"Area 25\",\"landmark\":\"Church\",\"current_village\":\"Area 25a Location\",\"home_district\":\"Dowa \",\"current_district\":\"Lilongwe City\"},\"patient\":{\"identifiers\":[]},\"site_code\":\"MPC\",\"gender\":\"F\",\"birthdate\":\"1995-12-01\",\"national_id\":null,\"return_path\":\"http://localhost:3000/process_result\",\"application\":\"Radiology\",\"print_barcode\":true}", "action"=>"send_to_dde", "controller"=>"dde"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/send_to_dde
Completed in 131ms (View: 20, DB: 24) | 200 OK [http://localhost/dde/send_to_dde]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_process_data (for 127.0.0.1 at 2015-10-22 13:06:44) [POST]
  Parameters: {"person"=>"{\"person_attributes\":{\"cell_phone_number\":\"0884142600\",\"office_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"occupation\":\"Student\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"names\":{\"middle_name\":\"love\",\"family_name\":\"Kaphukusi\",\"given_name\":\"Grace\",\"maiden_name\":\"\",\"gender\":\"F\"},\"birthdate_estimated\":false,\"addresses\":{\"home_village\":\"Chidothi\",\"home_ta\":\"Mponela Urban\",\"current_residence\":\"Church\",\"current_ta\":\"Area 25\",\"landmark\":\"Church\",\"current_village\":\"Area 25a Location\",\"home_district\":\"Dowa \",\"current_district\":\"Lilongwe City\"},\"patient\":{\"identifiers\":[]},\"site_code\":\"MPC\",\"gender\":\"F\",\"birthdate\":\"1995-12-01\",\"national_id\":null,\"return_path\":\"http://localhost:3000/process_result\",\"application\":\"Radiology\",\"print_barcode\":true}", "action"=>"ajax_process_data", "controller"=>"dde", "page"=>1}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` IS NULL) AND (patient_identifier.voided = 0) LIMIT 1[0m
Completed in 105ms (View: 1, DB: 19) | 200 OK [http://localhost/dde/ajax_process_data]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_confirmation (for 127.0.0.1 at 2015-10-22 13:06:48) [POST]
  Parameters: {"person"=>"{\"person_attributes\":{\"cell_phone_number\":\"0884142600\",\"office_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"occupation\":\"Student\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"names\":{\"middle_name\":\"love\",\"family_name\":\"Kaphukusi\",\"given_name\":\"Grace\",\"maiden_name\":\"\",\"gender\":\"F\"},\"birthdate_estimated\":false,\"addresses\":{\"home_village\":\"Chidothi\",\"home_ta\":\"Mponela Urban\",\"current_residence\":\"Church\",\"current_ta\":\"Area 25\",\"landmark\":\"Church\",\"current_village\":\"Area 25a Location\",\"home_district\":\"Dowa \",\"current_district\":\"Lilongwe City\"},\"patient\":{\"identifiers\":[]},\"site_code\":\"MPC\",\"gender\":\"F\",\"birthdate\":\"1995-12-01\",\"national_id\":null,\"return_path\":\"http://localhost:3000/process_result\",\"application\":\"Radiology\",\"print_barcode\":true}", "action"=>"process_confirmation", "target"=>"create", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Completed in 207ms (View: 1, DB: 16) | 200 OK [http://localhost/dde/process_confirmation]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:06:49) [POST]
  Parameters: {"person"=>"{\"person_attributes\":{\"cell_phone_number\":\"0884142600\",\"office_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"occupation\":\"Student\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"names\":{\"middle_name\":\"love\",\"family_name\":\"Kaphukusi\",\"given_name\":\"Grace\",\"maiden_name\":\"\",\"gender\":\"F\"},\"birthdate_estimated\":false,\"addresses\":{\"home_village\":\"Chidothi\",\"home_ta\":\"Mponela Urban\",\"current_residence\":\"Church\",\"current_ta\":\"Area 25\",\"landmark\":\"Church\",\"current_village\":\"Area 25a Location\",\"home_district\":\"Dowa \",\"current_district\":\"Lilongwe City\"},\"patient\":{\"identifiers\":[]},\"site_code\":\"MPC\",\"gender\":\"F\",\"birthdate\":\"1995-12-01\",\"national_id\":\"000A2R\",\"return_path\":\"http://localhost:3000/process_result\",\"application\":\"Radiology\",\"print_barcode\":true,\"assigned_site\":\"MPC\",\"patient_assigned\":true}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000A2R') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPerson Create (0.3ms)[0m   [0mINSERT INTO `person` (`date_changed`, `changed_by`, `birthdate_estimated`, `cause_of_death`, `creator`, `gender`, `date_created`, `dead`, `voided`, `date_voided`, `void_reason`, `birthdate`, `death_date`, `voided_by`, `uuid`) VALUES('2015-10-22 13:06:49', 1, 0, NULL, 1, 'F', '2015-10-22 13:06:49', 0, 0, NULL, NULL, NULL, NULL, NULL, 'fdbb317a-78ac-11e5-a02d-30f9edcc2607')[0m
  [4;36;1mSQL (50.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mPerson Update (0.3ms)[0m   [0;1mUPDATE `person` SET `birthdate` = '1995-12-01', `date_changed` = '2015-10-22 13:06:49' WHERE `person_id` = 24[0m
  [4;35;1mSQL (52.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mPersonNameCode Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonName Create (0.6ms)[0m   [0mINSERT INTO `person_name` (`date_changed`, `prefix`, `changed_by`, `middle_name`, `family_name_suffix`, `creator`, `family_name_prefix`, `date_created`, `person_id`, `family_name`, `degree`, `voided`, `date_voided`, `void_reason`, `preferred`, `given_name`, `family_name2`, `voided_by`, `uuid`) VALUES(NULL, NULL, NULL, 'love', NULL, 1, NULL, '2015-10-22 13:06:49', 24, 'Kaphukusi', NULL, 0, NULL, NULL, 0, 'Grace', '', NULL, 'fdcd2db0-78ac-11e5-a02d-30f9edcc2607')[0m
  [4;36;1mPersonNameCode Create (0.3ms)[0m   [0;1mINSERT INTO `person_name_code` (`family_name_suffix_code`, `given_name_code`, `middle_name_code`, `family_name2_code`, `family_name_code`, `person_name_id`) VALUES(NULL, 'G42', 'R1', NULL, 'K126', 24)[0m
  [4;35;1mSQL (52.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonAddress Create (0.2ms)[0m   [0;1mINSERT INTO `person_address` (`address1`, `address2`, `region`, `township_division`, `state_province`, `country`, `city_village`, `creator`, `date_created`, `county_district`, `person_id`, `subregion`, `voided`, `date_voided`, `void_reason`, `latitude`, `neighborhood_cell`, `preferred`, `longitude`, `voided_by`, `postal_code`, `uuid`) VALUES('Church', 'Dowa ', NULL, 'Area 25', 'Lilongwe City', NULL, 'Area 25a Location', 1, '2015-10-22 13:06:49', 'Mponela Urban', 24, NULL, 0, NULL, NULL, NULL, 'Chidothi', 0, NULL, NULL, NULL, 'fdd69716-78ac-11e5-a02d-30f9edcc2607')[0m
  [4;35;1mSQL (61.0ms)[0m   [0mCOMMIT[0m
  [4;36;1mPersonAttributeType Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonAttribute Create (0.3ms)[0m   [0mINSERT INTO `person_attribute` (`value`, `date_changed`, `changed_by`, `creator`, `date_created`, `person_id`, `voided`, `date_voided`, `void_reason`, `voided_by`, `person_attribute_type_id`, `uuid`) VALUES('Student', '2015-10-22 13:06:49', 1, 1, '2015-10-22 13:06:49', 24, 0, NULL, NULL, NULL, 13, 'fde1ab96-78ac-11e5-a02d-30f9edcc2607')[0m
  [4;36;1mSQL (55.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPersonAttributeType Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonAttribute Create (0.3ms)[0m   [0;1mINSERT INTO `person_attribute` (`value`, `date_changed`, `changed_by`, `creator`, `date_created`, `person_id`, `voided`, `date_voided`, `void_reason`, `voided_by`, `person_attribute_type_id`, `uuid`) VALUES('0884142600', '2015-10-22 13:06:49', 1, 1, '2015-10-22 13:06:49', 24, 0, NULL, NULL, NULL, 12, 'fdeacc69-78ac-11e5-a02d-30f9edcc2607')[0m
  [4;35;1mSQL (50.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mPersonAttributeType Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonAttribute Create (0.4ms)[0m   [0mINSERT INTO `person_attribute` (`value`, `date_changed`, `changed_by`, `creator`, `date_created`, `person_id`, `voided`, `date_voided`, `void_reason`, `voided_by`, `person_attribute_type_id`, `uuid`) VALUES('Unknown', '2015-10-22 13:06:49', 1, 1, '2015-10-22 13:06:49', 24, 0, NULL, NULL, NULL, 15, 'fdf33994-78ac-11e5-a02d-30f9edcc2607')[0m
  [4;36;1mSQL (51.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPersonAttributeType Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonAttribute Create (0.2ms)[0m   [0;1mINSERT INTO `person_attribute` (`value`, `date_changed`, `changed_by`, `creator`, `date_created`, `person_id`, `voided`, `date_voided`, `void_reason`, `voided_by`, `person_attribute_type_id`, `uuid`) VALUES('Unknown', '2015-10-22 13:06:49', 1, 1, '2015-10-22 13:06:49', 24, 0, NULL, NULL, NULL, 14, 'fdfbb0af-78ac-11e5-a02d-30f9edcc2607')[0m
  [4;35;1mSQL (52.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mPersonAttributeType Load (0.3ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonAttribute Create (0.2ms)[0m   [0mINSERT INTO `person_attribute` (`value`, `date_changed`, `changed_by`, `creator`, `date_created`, `person_id`, `voided`, `date_voided`, `void_reason`, `voided_by`, `person_attribute_type_id`, `uuid`) VALUES('Malawian', '2015-10-22 13:06:49', 1, 1, '2015-10-22 13:06:49', 24, 0, NULL, NULL, NULL, 3, 'fe044a35-78ac-11e5-a02d-30f9edcc2607')[0m
  [4;36;1mSQL (51.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPersonAttributeType Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.3ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 24 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mPatient Create (0.2ms)[0m   [0mINSERT INTO `patient` (`date_changed`, `changed_by`, `creator`, `tribe`, `date_created`, `voided`, `date_voided`, `void_reason`, `patient_id`, `voided_by`) VALUES('2015-10-22 13:06:49', 1, 1, NULL, '2015-10-22 13:06:49', 0, NULL, NULL, 24, NULL)[0m
  [4;36;1mSQL (53.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mGlobalProperty Load (0.2ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mLocation Load (0.3ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPatientIdentifier Create (0.2ms)[0m   [0;1mINSERT INTO `patient_identifier` (`identifier`, `creator`, `date_created`, `voided`, `date_voided`, `void_reason`, `patient_id`, `preferred`, `voided_by`, `location_id`, `uuid`, `identifier_type`) VALUES('000A2R', 1, '2015-10-22 13:06:49', 0, NULL, NULL, 24, 0, NULL, 700, 'fe17835c-78ac-11e5-a02d-30f9edcc2607', 3)[0m
  [4;35;1mPatientIdentifierType Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 24 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 24 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 24 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 24 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.3ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 24 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 24 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 24 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 24 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 24 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 24 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 24 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 24 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 24 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.4ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 24 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 24 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 24 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 24 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 24) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 24) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 24) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 24) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 24 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mRelationship Load (0.2ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 24) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 24) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 24) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mMysql::Error: Table 'openmrs_demographx.patient' doesn't exist: INSERT INTO openmrs_demographx.patient (patient_id,gender,birthdate,birthdate_estimated,creator,date_created,date_changed)
VALUES(24,"Female","1995-12-01",0,1,'2015-10-22 13:06:49','2015-10-22 13:06:49');
[0m
  [4;36;1mSQL (57.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000A2R') AND (patient_identifier.voided = 0) LIMIT 1[0m

RuntimeError (24):
  app/controllers/dde_controller.rb:67:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (28.4ms)
Rendered rescues/_request_and_response (1.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_process_data (for 127.0.0.1 at 2015-10-22 13:07:04) [POST]
  Parameters: {"person"=>"{\"person_attributes\":{\"cell_phone_number\":\"0884142600\",\"office_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"occupation\":\"Student\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"names\":{\"middle_name\":\"love\",\"family_name\":\"Kaphukusi\",\"given_name\":\"Grace\",\"maiden_name\":\"\",\"gender\":\"F\"},\"birthdate_estimated\":false,\"addresses\":{\"home_village\":\"Chidothi\",\"home_ta\":\"Mponela Urban\",\"current_residence\":\"Church\",\"current_ta\":\"Area 25\",\"landmark\":\"Church\",\"current_village\":\"Area 25a Location\",\"home_district\":\"Dowa \",\"current_district\":\"Lilongwe City\"},\"patient\":{\"identifiers\":[]},\"site_code\":\"MPC\",\"gender\":\"F\",\"birthdate\":\"1995-12-01\",\"national_id\":null,\"return_path\":\"http://localhost:3000/process_result\",\"application\":\"Radiology\",\"print_barcode\":true}", "action"=>"ajax_process_data", "controller"=>"dde", "page"=>1}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` IS NULL) AND (patient_identifier.voided = 0) LIMIT 1[0m
Completed in 176ms (View: 1, DB: 19) | 200 OK [http://localhost/dde/ajax_process_data]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#index (for 127.0.0.1 at 2015-10-22 13:07:13) [GET]
  Parameters: {"action"=>"index", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mPerson Load (0.4ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (2.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mUserRole Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `user_role`[0m
  [4;36;1mUserRole Load (0.1ms)[0m   [0;1mSELECT * FROM `user_role` WHERE (`user_role`.`user_id` = 1) [0m
Rendering dde/index
Completed in 45ms (View: 9, DB: 24) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (2.4ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 13:07:14) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 24ms (View: 1, DB: 20) | 200 OK [http://localhost/clinic/overview_tab]
  [4;35;1mSQL (0.0ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 13:07:14) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;35;1mEncounterType Load (0.0ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;35;1mPerson Load (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;36;1mPersonName Load (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 19ms (View: 1, DB: 28) | 200 OK [http://localhost/clinic/overview_tab]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#search (for 127.0.0.1 at 2015-10-22 13:07:16) [GET]
  Parameters: {"action"=>"search", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering dde/search
Completed in 8ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/search]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 13:07:16) [GET]
  Parameters: {"action"=>"given_names", "search_string"=>"", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.4ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE '%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'') WHEN 0 THEN 9999 ELSE INSTR(given_name,'') END ASC LIMIT 10[0m
Completed in 19ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/given_names?search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:07:37) [GET]
  Parameters: {"action"=>"family_names", "search_string"=>"", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'') WHEN 0 THEN 9999 ELSE INSTR(family_name,'') END ASC LIMIT 10[0m
Completed in 17ms (View: 2, DB: 25) | 200 OK [http://localhost/dde/family_names?search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_search (for 127.0.0.1 at 2015-10-22 13:07:42) [GET]
  Parameters: {"action"=>"ajax_search", "gender"=>"F", "family_name"=>"Kaphukusi", "given_name"=>"Grace", "controller"=>"dde", "page"=>"1"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPerson Load (0.7ms)[0m   [0mSELECT `person`.* FROM `person` INNER JOIN `person_name` ON person_name.person_id = person.person_id AND person_name.`voided` = 0 WHERE (given_name = 'Grace' AND family_name = 'Kaphukusi' AND gender = 'F') AND (person.voided = 0) LIMIT 0, 6[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.5ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 24 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 24 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 132ms (View: 1, DB: 24) | 200 OK [http://localhost/ajax_search?given_name=Grace&family_name=Kaphukusi&gender=F&page=1]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_scan_data (for 127.0.0.1 at 2015-10-22 13:07:45) [POST]
  Parameters: {"person"=>"{\"person_attributes\":{\"cell_phone_number\":\"0884142600\",\"office_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":null,\"occupation\":\"Student\",\"citizenship\":\"Malawian\",\"country_of_residence\":\"Malawi\"},\"names\":{\"middle_name\":\"love\",\"family_name\":\"Kaphukusi\",\"given_name\":\"Grace\",\"maiden_name\":\"\"},\"birthdate_estimated\":false,\"site_code\":\"MPC\",\"addresses\":{\"home_village\":\"Chidothi\",\"home_ta\":\"Mponela Urban\",\"current_residence\":\"Church\",\"current_ta\":\"Area 25\",\"current_village\":\"Area 25a Location\",\"home_district\":\"Dowa \",\"current_district\":\"Lilongwe City\"},\"patient\":{\"identifiers\":[]},\"gender\":\"F\",\"age\":19,\"birthdate\":\"1995-12-01\",\"national_id\":\"000A2R\",\"application\":\"Radiology\"}", "action"=>"process_scan_data", "patient"=>"0", "gender"=>"F", "family_name"=>"Kaphukusi", "given_name"=>"Grace", "controller"=>"dde", "selected_patient"=>""}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/process_scan_data
Completed in 250ms (View: 13, DB: 19) | 200 OK [http://localhost/dde/process_scan_data]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:07:45) [POST]
  Parameters: {"person"=>"{\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"0884142600\",\"office_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":\"\",\"citizenship\":\"Malawian\",\"occupation\":\"Student\",\"country_of_residence\":\"Malawi\"},\"assigned_site\":\"MPC\",\"names\":{\"middle_name\":\"love\",\"given_name_code\":\"G42\",\"family_name\":\"Kaphukusi\",\"family_name_code\":\"K126\",\"given_name\":\"Grace\",\"maiden_name\":\"\"},\"_rev\":\"1-72609f7c9fff5159a4e33b48d688f739\",\"birthdate_estimated\":\"false\",\"type\":\"Person\",\"addresses\":{\"home_village\":\"Chidothi\",\"home_ta\":\"Mponela Urban\",\"current_residence\":\"Church\",\"current_ta\":\"Area 25\",\"current_village\":\"Area 25a Location\",\"home_district\":\"Dowa \",\"current_district\":\"Lilongwe City\"},\"gender\":\"F\",\"birthdate\":\"1995-12-01\",\"updated_at\":\"2015-10-22T11:06:12.205Z\",\"created_at\":\"2015-10-22T11:06:12.205Z\",\"_id\":\"000A2R\",\"old_identification_number\":\"\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000A2R') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.4ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 24 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.4ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 24 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.5ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 24 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 24 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.5ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 24 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;35;1mPersonName Load (0.4ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.3ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (72.0ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:24:12) [POST]
  Parameters: {"person"=>"{\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"0884142600\",\"office_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":\"\",\"citizenship\":\"Malawian\",\"occupation\":\"Student\",\"country_of_residence\":\"Malawi\"},\"assigned_site\":\"MPC\",\"names\":{\"middle_name\":\"love\",\"given_name_code\":\"G42\",\"family_name\":\"Kaphukusi\",\"family_name_code\":\"K126\",\"given_name\":\"Grace\",\"maiden_name\":\"\"},\"_rev\":\"1-72609f7c9fff5159a4e33b48d688f739\",\"birthdate_estimated\":\"false\",\"type\":\"Person\",\"addresses\":{\"home_village\":\"Chidothi\",\"home_ta\":\"Mponela Urban\",\"current_residence\":\"Church\",\"current_ta\":\"Area 25\",\"current_village\":\"Area 25a Location\",\"home_district\":\"Dowa \",\"current_district\":\"Lilongwe City\"},\"gender\":\"F\",\"birthdate\":\"1995-12-01\",\"updated_at\":\"2015-10-22T11:06:12.205Z\",\"created_at\":\"2015-10-22T11:06:12.205Z\",\"_id\":\"000A2R\",\"old_identification_number\":\"\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

SyntaxError (/var/www/Radiology/lib/dde.rb:204: syntax error, unexpected ')', expecting kEND):
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.7ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.4ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:24:46) [POST]
  Parameters: {"person"=>"{\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"0884142600\",\"office_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":\"\",\"citizenship\":\"Malawian\",\"occupation\":\"Student\",\"country_of_residence\":\"Malawi\"},\"assigned_site\":\"MPC\",\"names\":{\"middle_name\":\"love\",\"given_name_code\":\"G42\",\"family_name\":\"Kaphukusi\",\"family_name_code\":\"K126\",\"given_name\":\"Grace\",\"maiden_name\":\"\"},\"_rev\":\"1-72609f7c9fff5159a4e33b48d688f739\",\"birthdate_estimated\":\"false\",\"type\":\"Person\",\"addresses\":{\"home_village\":\"Chidothi\",\"home_ta\":\"Mponela Urban\",\"current_residence\":\"Church\",\"current_ta\":\"Area 25\",\"current_village\":\"Area 25a Location\",\"home_district\":\"Dowa \",\"current_district\":\"Lilongwe City\"},\"gender\":\"F\",\"birthdate\":\"1995-12-01\",\"updated_at\":\"2015-10-22T11:06:12.205Z\",\"created_at\":\"2015-10-22T11:06:12.205Z\",\"_id\":\"000A2R\",\"old_identification_number\":\"\"}", "action"=>"process_result", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.5ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000A2R') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 24 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 24 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 24 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 24 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 24 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:202:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (65.9ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
^C[2015-10-22 13:34:29] INFO  going to shutdown ...
[2015-10-22 13:34:29] INFO  WEBrick::HTTPServer#start done.
Exiting
]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ script/server
=> Booting WEBrick
=> Rails 2.3.5 application starting on http://0.0.0.0:3000
/home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/gems/1.8/gems/rails-2.3.5/lib/rails/gem_dependency.rb:119:Warning: Gem::Dependency#version_requirements is deprecated and will be removed on or after August 2010.  Use #requirement
=> Call with -d to detach
=> Ctrl-C to shutdown server
[2015-10-22 13:34:32] INFO  WEBrick 1.3.1
[2015-10-22 13:34:32] INFO  ruby 1.8.7 (2013-06-27) [x86_64-linux]
[2015-10-22 13:34:32] INFO  WEBrick::HTTPServer#start: pid=8966 port=3000
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:34:41) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"0884142600\",\"office_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":\"\",\"citizenship\":\"Malawian\",\"occupation\":\"Student\",\"country_of_residence\":\"Malawi\"},\"assigned_site\":\"MPC\",\"names\":{\"middle_name\":\"love\",\"given_name_code\":\"G42\",\"family_name\":\"Kaphukusi\",\"family_name_code\":\"K126\",\"given_name\":\"Grace\",\"maiden_name\":\"\"},\"_rev\":\"1-72609f7c9fff5159a4e33b48d688f739\",\"birthdate_estimated\":\"false\",\"type\":\"Person\",\"addresses\":{\"home_village\":\"Chidothi\",\"home_ta\":\"Mponela Urban\",\"current_residence\":\"Church\",\"current_ta\":\"Area 25\",\"current_village\":\"Area 25a Location\",\"home_district\":\"Dowa \",\"current_district\":\"Lilongwe City\"},\"gender\":\"F\",\"birthdate\":\"1995-12-01\",\"updated_at\":\"2015-10-22T11:06:12.205Z\",\"created_at\":\"2015-10-22T11:06:12.205Z\",\"_id\":\"000A2R\",\"old_identification_number\":\"\"}", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000A2R') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 24 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 24 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 24 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (4.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 24 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 24 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:202:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.0ms)
Rendered rescues/_request_and_response (1.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (2.4ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:35:56) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"0884142600\",\"office_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":\"\",\"citizenship\":\"Malawian\",\"occupation\":\"Student\",\"country_of_residence\":\"Malawi\"},\"assigned_site\":\"MPC\",\"names\":{\"middle_name\":\"love\",\"given_name_code\":\"G42\",\"family_name\":\"Kaphukusi\",\"family_name_code\":\"K126\",\"given_name\":\"Grace\",\"maiden_name\":\"\"},\"_rev\":\"1-72609f7c9fff5159a4e33b48d688f739\",\"birthdate_estimated\":\"false\",\"type\":\"Person\",\"addresses\":{\"home_village\":\"Chidothi\",\"home_ta\":\"Mponela Urban\",\"current_residence\":\"Church\",\"current_ta\":\"Area 25\",\"current_village\":\"Area 25a Location\",\"home_district\":\"Dowa \",\"current_district\":\"Lilongwe City\"},\"gender\":\"F\",\"birthdate\":\"1995-12-01\",\"updated_at\":\"2015-10-22T11:06:12.205Z\",\"created_at\":\"2015-10-22T11:06:12.205Z\",\"_id\":\"000A2R\",\"old_identification_number\":\"\"}", "controller"=>"dde"}
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000A2R') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 24 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 24 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 24 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 24 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 24 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m

NameError (undefined local variable or method `pattribute' for DDE:Module):
  lib/dde.rb:204:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (26.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:36:16) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"0884142600\",\"office_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":\"\",\"citizenship\":\"Malawian\",\"occupation\":\"Student\",\"country_of_residence\":\"Malawi\"},\"assigned_site\":\"MPC\",\"names\":{\"middle_name\":\"love\",\"given_name_code\":\"G42\",\"family_name\":\"Kaphukusi\",\"family_name_code\":\"K126\",\"given_name\":\"Grace\",\"maiden_name\":\"\"},\"_rev\":\"1-72609f7c9fff5159a4e33b48d688f739\",\"birthdate_estimated\":\"false\",\"type\":\"Person\",\"addresses\":{\"home_village\":\"Chidothi\",\"home_ta\":\"Mponela Urban\",\"current_residence\":\"Church\",\"current_ta\":\"Area 25\",\"current_village\":\"Area 25a Location\",\"home_district\":\"Dowa \",\"current_district\":\"Lilongwe City\"},\"gender\":\"F\",\"birthdate\":\"1995-12-01\",\"updated_at\":\"2015-10-22T11:06:12.205Z\",\"created_at\":\"2015-10-22T11:06:12.205Z\",\"_id\":\"000A2R\",\"old_identification_number\":\"\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000A2R') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 24 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 24 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 24 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 24 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 24 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT UUID() uuid[0m

NoMethodError (undefined method `+@' for "1af8d092-78b1-11e5-a02d-30f9edcc2607":String):
  lib/dde.rb:203:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (26.5ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:36:27) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"0884142600\",\"office_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":\"\",\"citizenship\":\"Malawian\",\"occupation\":\"Student\",\"country_of_residence\":\"Malawi\"},\"assigned_site\":\"MPC\",\"names\":{\"middle_name\":\"love\",\"given_name_code\":\"G42\",\"family_name\":\"Kaphukusi\",\"family_name_code\":\"K126\",\"given_name\":\"Grace\",\"maiden_name\":\"\"},\"_rev\":\"1-72609f7c9fff5159a4e33b48d688f739\",\"birthdate_estimated\":\"false\",\"type\":\"Person\",\"addresses\":{\"home_village\":\"Chidothi\",\"home_ta\":\"Mponela Urban\",\"current_residence\":\"Church\",\"current_ta\":\"Area 25\",\"current_village\":\"Area 25a Location\",\"home_district\":\"Dowa \",\"current_district\":\"Lilongwe City\"},\"gender\":\"F\",\"birthdate\":\"1995-12-01\",\"updated_at\":\"2015-10-22T11:06:12.205Z\",\"created_at\":\"2015-10-22T11:06:12.205Z\",\"_id\":\"000A2R\",\"old_identification_number\":\"\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000A2R') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 24 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 24 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 24 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 24 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 24 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT UUID() uuid[0m

NoMethodError (undefined method `update_attributes' for "21b0d2ea-78b1-11e5-a02d-30f9edcc2607":String):
  lib/dde.rb:207:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (26.5ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:36:47) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"patient_assigned\":\"true\",\"person_attributes\":{\"cell_phone_number\":\"0884142600\",\"office_phone_number\":\"Unknown\",\"home_phone_number\":\"Unknown\",\"race\":\"\",\"citizenship\":\"Malawian\",\"occupation\":\"Student\",\"country_of_residence\":\"Malawi\"},\"assigned_site\":\"MPC\",\"names\":{\"middle_name\":\"love\",\"given_name_code\":\"G42\",\"family_name\":\"Kaphukusi\",\"family_name_code\":\"K126\",\"given_name\":\"Grace\",\"maiden_name\":\"\"},\"_rev\":\"1-72609f7c9fff5159a4e33b48d688f739\",\"birthdate_estimated\":\"false\",\"type\":\"Person\",\"addresses\":{\"home_village\":\"Chidothi\",\"home_ta\":\"Mponela Urban\",\"current_residence\":\"Church\",\"current_ta\":\"Area 25\",\"current_village\":\"Area 25a Location\",\"home_district\":\"Dowa \",\"current_district\":\"Lilongwe City\"},\"gender\":\"F\",\"birthdate\":\"1995-12-01\",\"updated_at\":\"2015-10-22T11:06:12.205Z\",\"created_at\":\"2015-10-22T11:06:12.205Z\",\"_id\":\"000A2R\",\"old_identification_number\":\"\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000A2R') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 24 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 24 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 24 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 24 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 24 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 24 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 24 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:202:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (26.7ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (12.4ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#new_patient (for 127.0.0.1 at 2015-10-22 13:39:31) [GET]
  Parameters: {"action"=>"new_patient", "controller"=>"dde", "given_name"=>"Grace", "gender"=>"F", "family_name"=>"Kaphukusi"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering dde/new_patient
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 73ms (View: 32, DB: 29) | 200 OK [http://localhost/new_patient?given_name=Grace&family_name=Kaphukusi&gender=F]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#index (for 127.0.0.1 at 2015-10-22 13:39:36) [GET]
  Parameters: {"action"=>"index", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mUserRole Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `user_role`[0m
  [4;36;1mUserRole Load (0.1ms)[0m   [0;1mSELECT * FROM `user_role` WHERE (`user_role`.`user_id` = 1) [0m
Rendering dde/index
Completed in 81ms (View: 53, DB: 24) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 13:39:37) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 26ms (View: 5, DB: 23) | 200 OK [http://localhost/clinic/overview_tab]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 13:39:37) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.2ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 18ms (View: 1, DB: 24) | 200 OK [http://localhost/clinic/overview_tab]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#search (for 127.0.0.1 at 2015-10-22 13:39:39) [GET]
  Parameters: {"action"=>"search", "controller"=>"dde"}
  [4;36;1mUser Load (5.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering dde/search
Completed in 49ms (View: 8, DB: 28) | 200 OK [http://localhost/dde/search]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 13:39:39) [GET]
  Parameters: {"search_string"=>"", "action"=>"given_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.1ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE '%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'') WHEN 0 THEN 9999 ELSE INSTR(given_name,'') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 23) | 200 OK [http://localhost/dde/given_names?search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 13:39:48) [GET]
  Parameters: {"search_string"=>"A", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'E%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'A') WHEN 0 THEN 9999 ELSE INSTR(given_name,'A') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/given_names?search_string=A]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 13:39:48) [GET]
  Parameters: {"search_string"=>"A", "action"=>"given_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.1ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'E%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'A') WHEN 0 THEN 9999 ELSE INSTR(given_name,'A') END ASC LIMIT 10[0m
Completed in 43ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/given_names?search_string=A]
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 13:39:49) [GET]
  Parameters: {"search_string"=>"Al", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'E4%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'Al') WHEN 0 THEN 9999 ELSE INSTR(given_name,'Al') END ASC LIMIT 10[0m
Completed in 14ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/given_names?search_string=Al]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 13:39:49) [GET]
  Parameters: {"search_string"=>"Ale", "action"=>"given_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'E4%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'Ale') WHEN 0 THEN 9999 ELSE INSTR(given_name,'Ale') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/given_names?search_string=Ale]
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 13:39:50) [GET]
  Parameters: {"search_string"=>"Alex", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE 'E42%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'Alex') WHEN 0 THEN 9999 ELSE INSTR(given_name,'Alex') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/given_names?search_string=Alex]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:39:51) [GET]
  Parameters: {"search_string"=>"", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.1ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'') WHEN 0 THEN 9999 ELSE INSTR(family_name,'') END ASC LIMIT 10[0m
Completed in 14ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/family_names?search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:39:51) [GET]
  Parameters: {"search_string"=>"K", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.4ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'K') WHEN 0 THEN 9999 ELSE INSTR(family_name,'K') END ASC LIMIT 10[0m
Completed in 14ms (View: 1, DB: 23) | 200 OK [http://localhost/dde/family_names?search_string=K]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:39:52) [GET]
  Parameters: {"search_string"=>"Ka", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Ka') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Ka') END ASC LIMIT 10[0m
Completed in 15ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/family_names?search_string=Ka]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:39:52) [GET]
  Parameters: {"search_string"=>"Ka", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.1ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Ka') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Ka') END ASC LIMIT 10[0m
Completed in 50ms (View: 1, DB: 22) | 200 OK [http://localhost/dde/family_names?search_string=Ka]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:39:52) [GET]
  Parameters: {"search_string"=>"Kap", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.4ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K1%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Kap') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Kap') END ASC LIMIT 10[0m
Completed in 15ms (View: 1, DB: 21) | 200 OK [http://localhost/dde/family_names?search_string=Kap]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:39:52) [GET]
  Parameters: {"search_string"=>"Kaph", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K1%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Kaph') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Kaph') END ASC LIMIT 10[0m
Completed in 14ms (View: 1, DB: 23) | 200 OK [http://localhost/dde/family_names?search_string=Kaph]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (13.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:39:53) [GET]
  Parameters: {"search_string"=>"Kaphu", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.8ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K1%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Kaphu') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Kaphu') END ASC LIMIT 10[0m
Completed in 47ms (View: 1, DB: 37) | 200 OK [http://localhost/dde/family_names?search_string=Kaphu]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (12.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:39:53) [GET]
  Parameters: {"search_string"=>"Kaphuk", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K12%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Kaphuk') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Kaphuk') END ASC LIMIT 10[0m
Completed in 14ms (View: 1, DB: 37) | 200 OK [http://localhost/dde/family_names?search_string=Kaphuk]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:39:53) [GET]
  Parameters: {"search_string"=>"Kaphuku", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.6ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K12%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Kaphuku') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Kaphuku') END ASC LIMIT 10[0m
Completed in 13ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/family_names?search_string=Kaphuku]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:39:54) [GET]
  Parameters: {"search_string"=>"Kaphukusi", "action"=>"family_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K126%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Kaphukusi') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Kaphukusi') END ASC LIMIT 10[0m
Completed in 15ms (View: 1, DB: 28) | 200 OK [http://localhost/dde/family_names?search_string=Kaphukusi]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:39:54) [GET]
  Parameters: {"search_string"=>"Kaphukusi", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.1ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE 'K126%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'Kaphukusi') WHEN 0 THEN 9999 ELSE INSTR(family_name,'Kaphukusi') END ASC LIMIT 10[0m
Completed in 20ms (View: 1, DB: 26) | 200 OK [http://localhost/dde/family_names?search_string=Kaphukusi]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_search (for 127.0.0.1 at 2015-10-22 13:39:57) [GET]
  Parameters: {"action"=>"ajax_search", "controller"=>"dde", "given_name"=>"Alex", "gender"=>"M", "family_name"=>"Kaphukusi", "page"=>"1"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPerson Load (0.7ms)[0m   [0;1mSELECT `person`.* FROM `person` INNER JOIN `person_name` ON person_name.person_id = person.person_id AND person_name.`voided` = 0 WHERE (given_name = 'Alex' AND family_name = 'Kaphukusi' AND gender = 'M') AND (person.voided = 0) LIMIT 0, 6[0m
Completed in 101ms (View: 1, DB: 23) | 200 OK [http://localhost/ajax_search?given_name=Alex&family_name=Kaphukusi&gender=M&page=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#new_patient (for 127.0.0.1 at 2015-10-22 13:39:59) [GET]
  Parameters: {"action"=>"new_patient", "controller"=>"dde", "given_name"=>"Alex", "gender"=>"M", "family_name"=>"Kaphukusi"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/application
Rendering dde/new_patient
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'show_intro_text') LIMIT 1[0m
Completed in 23ms (View: 15, DB: 23) | 200 OK [http://localhost/new_patient?given_name=Alex&family_name=Kaphukusi&gender=M]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#nationality (for 127.0.0.1 at 2015-10-22 13:40:22) [GET]
  Parameters: {"filter_value"=>"", "search_string"=>"", "action"=>"nationality", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDENationality Load (0.2ms)[0m   [0;1mSELECT * FROM `dde_nationality` WHERE (name LIKE ('%%')) ORDER BY weight[0m
  [4;35;1mDDENationality Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `dde_nationality`[0m
Completed in 46ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/nationality?filter_value=&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#district (for 127.0.0.1 at 2015-10-22 13:40:25) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>"", "action"=>"district", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDERegion Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `dde_region`[0m
  [4;36;1mDDERegion Load (0.1ms)[0m   [0;1mSELECT * FROM `dde_region` WHERE (`dde_region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mDDEDistrict Load (0.1ms)[0m   [0mSELECT * FROM `dde_district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mDDEDistrict Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `dde_district`[0m
Completed in 17ms (View: 1, DB: 27) | 200 OK [http://localhost/dde/district?filter_value=Central+Region&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#traditional_authority (for 127.0.0.1 at 2015-10-22 13:40:28) [GET]
  Parameters: {"filter_value"=>"Lilongwe", "search_string"=>"", "action"=>"traditional_authority", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDEDistrict Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `dde_district`[0m
  [4;35;1mDDEDistrict Load (0.4ms)[0m   [0mSELECT * FROM `dde_district` WHERE (`dde_district`.`name` = 'Lilongwe') LIMIT 1[0m
  [4;36;1mDDETraditionalAuthority Load (0.8ms)[0m   [0;1mSELECT * FROM `dde_traditional_authority` WHERE (name LIKE ('%%') AND district_id = 18) ORDER BY name[0m
  [4;35;1mDDETraditionalAuthority Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `dde_traditional_authority`[0m
Completed in 26ms (View: 1, DB: 27) | 200 OK [http://localhost/dde/traditional_authority?filter_value=Lilongwe&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#village (for 127.0.0.1 at 2015-10-22 13:40:30) [GET]
  Parameters: {"filter_value"=>"Kabudula", "search_string"=>"", "action"=>"village", "controller"=>"dde"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDETraditionalAuthority Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `dde_traditional_authority`[0m
  [4;36;1mDDETraditionalAuthority Load (0.7ms)[0m   [0;1mSELECT * FROM `dde_traditional_authority` WHERE (`dde_traditional_authority`.`name` = 'Kabudula') LIMIT 1[0m
  [4;35;1mDDEVillage Load (2.3ms)[0m   [0mSELECT * FROM `dde_village` WHERE (name LIKE ('%%') AND traditional_authority_id = 350) ORDER BY name[0m
  [4;36;1mDDEVillage Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `dde_village`[0m
Completed in 58ms (View: 1, DB: 29) | 200 OK [http://localhost/dde/village?filter_value=Kabudula&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#country (for 127.0.0.1 at 2015-10-22 13:40:32) [GET]
  Parameters: {"filter_value"=>"", "search_string"=>"", "action"=>"country", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDECountry Load (0.1ms)[0m   [0;1mSELECT * FROM `dde_country` WHERE (name LIKE ('%%')) ORDER BY weight[0m
  [4;35;1mDDECountry Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `dde_country`[0m
Completed in 14ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/country?filter_value=&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#district (for 127.0.0.1 at 2015-10-22 13:40:35) [GET]
  Parameters: {"filter_value"=>"Central Region", "search_string"=>"", "action"=>"district", "controller"=>"dde"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDERegion Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `dde_region`[0m
  [4;36;1mDDERegion Load (0.1ms)[0m   [0;1mSELECT * FROM `dde_region` WHERE (`dde_region`.`name` = 'Central Region') LIMIT 1[0m
  [4;35;1mDDEDistrict Load (0.1ms)[0m   [0mSELECT * FROM `dde_district` WHERE (name LIKE ('%') AND region_id = 1 ) ORDER BY name[0m
  [4;36;1mDDEDistrict Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `dde_district`[0m
Completed in 18ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/district?filter_value=Central+Region&search_string=]
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#traditional_authority (for 127.0.0.1 at 2015-10-22 13:40:36) [GET]
  Parameters: {"filter_value"=>"Lilongwe City", "search_string"=>"", "action"=>"traditional_authority", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDEDistrict Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `dde_district`[0m
  [4;35;1mDDEDistrict Load (0.2ms)[0m   [0mSELECT * FROM `dde_district` WHERE (`dde_district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;36;1mDDETraditionalAuthority Load (0.3ms)[0m   [0;1mSELECT * FROM `dde_traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;35;1mDDETraditionalAuthority Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `dde_traditional_authority`[0m
Completed in 52ms (View: 1, DB: 27) | 200 OK [http://localhost/dde/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#traditional_authority (for 127.0.0.1 at 2015-10-22 13:40:38) [GET]
  Parameters: {"filter_value"=>"Lilongwe City", "search_string"=>"", "action"=>"traditional_authority", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDEDistrict Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `dde_district`[0m
  [4;36;1mDDEDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `dde_district` WHERE (`dde_district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;35;1mDDETraditionalAuthority Load (0.2ms)[0m   [0mSELECT * FROM `dde_traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;36;1mDDETraditionalAuthority Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `dde_traditional_authority`[0m
Completed in 19ms (View: 1, DB: 28) | 200 OK [http://localhost/dde/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#traditional_authority (for 127.0.0.1 at 2015-10-22 13:40:38) [GET]
  Parameters: {"filter_value"=>"Lilongwe City", "search_string"=>"", "action"=>"traditional_authority", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDEDistrict Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `dde_district`[0m
  [4;35;1mDDEDistrict Load (0.1ms)[0m   [0mSELECT * FROM `dde_district` WHERE (`dde_district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;36;1mDDETraditionalAuthority Load (0.2ms)[0m   [0;1mSELECT * FROM `dde_traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;35;1mDDETraditionalAuthority Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `dde_traditional_authority`[0m
Completed in 21ms (View: 1, DB: 28) | 200 OK [http://localhost/dde/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#traditional_authority (for 127.0.0.1 at 2015-10-22 13:40:38) [GET]
  Parameters: {"filter_value"=>"Lilongwe City", "search_string"=>"", "action"=>"traditional_authority", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mDDEDistrict Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `dde_district`[0m
  [4;36;1mDDEDistrict Load (0.1ms)[0m   [0;1mSELECT * FROM `dde_district` WHERE (`dde_district`.`name` = 'Lilongwe City') LIMIT 1[0m
  [4;35;1mDDETraditionalAuthority Load (0.1ms)[0m   [0mSELECT * FROM `dde_traditional_authority` WHERE (name LIKE ('%%') AND district_id = 28) ORDER BY name[0m
  [4;36;1mDDETraditionalAuthority Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `dde_traditional_authority`[0m
Completed in 19ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/traditional_authority?filter_value=Lilongwe%20City&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#village (for 127.0.0.1 at 2015-10-22 13:40:40) [GET]
  Parameters: {"filter_value"=>"Area 15", "search_string"=>"", "action"=>"village", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mDDETraditionalAuthority Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `dde_traditional_authority`[0m
  [4;35;1mDDETraditionalAuthority Load (0.5ms)[0m   [0mSELECT * FROM `dde_traditional_authority` WHERE (`dde_traditional_authority`.`name` = 'Area 15') LIMIT 1[0m
  [4;36;1mDDEVillage Load (0.9ms)[0m   [0;1mSELECT * FROM `dde_village` WHERE (name LIKE ('%%') AND traditional_authority_id = 134) ORDER BY name[0m
  [4;35;1mDDEVillage Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `dde_village`[0m
Completed in 21ms (View: 1, DB: 28) | 200 OK [http://localhost/dde/village?filter_value=Area%2015&search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#landmark (for 127.0.0.1 at 2015-10-22 13:40:41) [GET]
  Parameters: {"filter_value"=>"Area 15", "search_string"=>"", "action"=>"landmark", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Completed in 8ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/landmark?filter_value=Area%2015&search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#send_to_dde (for 127.0.0.1 at 2015-10-22 13:40:56) [POST]
  Parameters: {"action"=>"send_to_dde", "person"=>"{\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"person_attributes\":{\"race\":null,\"citizenship\":\"Malawian\",\"cell_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"landmark\":\"Church\",\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"birthdate\":\"1990-05-05\",\"national_id\":null,\"names\":{\"maiden_name\":\"\",\"middle_name\":\"Hope\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\",\"gender\":\"M\"},\"application\":\"Radiology\",\"gender\":\"M\",\"site_code\":\"MPC\",\"print_barcode\":true}", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/send_to_dde
Completed in 157ms (View: 22, DB: 23) | 200 OK [http://localhost/dde/send_to_dde]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_process_data (for 127.0.0.1 at 2015-10-22 13:40:56) [POST]
  Parameters: {"action"=>"ajax_process_data", "person"=>"{\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"person_attributes\":{\"race\":null,\"citizenship\":\"Malawian\",\"cell_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"landmark\":\"Church\",\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"birthdate\":\"1990-05-05\",\"national_id\":null,\"names\":{\"maiden_name\":\"\",\"middle_name\":\"Hope\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\",\"gender\":\"M\"},\"application\":\"Radiology\",\"gender\":\"M\",\"site_code\":\"MPC\",\"print_barcode\":true}", "controller"=>"dde", "page"=>1}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` IS NULL) AND (patient_identifier.voided = 0) LIMIT 1[0m
Completed in 111ms (View: 1, DB: 21) | 200 OK [http://localhost/dde/ajax_process_data]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.4ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_confirmation (for 127.0.0.1 at 2015-10-22 13:41:02) [POST]
  Parameters: {"action"=>"process_confirmation", "target"=>"create", "person"=>"{\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"person_attributes\":{\"race\":null,\"citizenship\":\"Malawian\",\"cell_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"landmark\":\"Church\",\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"birthdate\":\"1990-05-05\",\"national_id\":null,\"names\":{\"maiden_name\":\"\",\"middle_name\":\"Hope\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\",\"gender\":\"M\"},\"application\":\"Radiology\",\"gender\":\"M\",\"site_code\":\"MPC\",\"print_barcode\":true}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Completed in 342ms (View: 1, DB: 16) | 200 OK [http://localhost/dde/process_confirmation]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:41:02) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"person_attributes\":{\"race\":null,\"citizenship\":\"Malawian\",\"cell_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"landmark\":\"Church\",\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"birthdate\":\"1990-05-05\",\"national_id\":\"000ED0\",\"names\":{\"maiden_name\":\"\",\"middle_name\":\"Hope\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\",\"gender\":\"M\"},\"application\":\"Radiology\",\"gender\":\"M\",\"site_code\":\"MPC\",\"print_barcode\":true,\"assigned_site\":\"MPC\",\"patient_assigned\":true}", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000ED0') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPerson Create (0.2ms)[0m   [0;1mINSERT INTO `person` (`birthdate_estimated`, `void_reason`, `voided_by`, `birthdate`, `death_date`, `creator`, `date_created`, `dead`, `cause_of_death`, `voided`, `date_voided`, `gender`, `date_changed`, `changed_by`, `uuid`) VALUES(0, NULL, NULL, NULL, NULL, 1, '2015-10-22 13:41:02', 0, NULL, 0, NULL, 'M', '2015-10-22 13:41:02', 1, 'c5e01bdd-78b1-11e5-a02d-30f9edcc2607')[0m
  [4;35;1mSQL (99.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mPerson Update (0.2ms)[0m   [0mUPDATE `person` SET `birthdate` = '1990-05-05', `date_changed` = '2015-10-22 13:41:03' WHERE `person_id` = 25[0m
  [4;36;1mSQL (53.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mPersonNameCode Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonName Create (0.4ms)[0m   [0;1mINSERT INTO `person_name` (`family_name2`, `void_reason`, `voided_by`, `prefix`, `family_name_suffix`, `degree`, `person_id`, `creator`, `date_created`, `middle_name`, `voided`, `family_name_prefix`, `date_voided`, `given_name`, `date_changed`, `preferred`, `family_name`, `changed_by`, `uuid`) VALUES('', NULL, NULL, NULL, NULL, NULL, 25, 1, '2015-10-22 13:41:03', 'Hope', 0, NULL, NULL, 'Alex', NULL, 0, 'Kaphukusi', NULL, 'c5f981e6-78b1-11e5-a02d-30f9edcc2607')[0m
  [4;35;1mPersonNameCode Create (0.2ms)[0m   [0mINSERT INTO `person_name_code` (`given_name_code`, `person_name_id`, `family_name_code`, `middle_name_code`, `family_name2_code`, `family_name_suffix_code`) VALUES('E42', 25, 'K126', 'H1', NULL, NULL)[0m
  [4;36;1mSQL (53.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonAddress Create (0.2ms)[0m   [0mINSERT INTO `person_address` (`city_village`, `void_reason`, `subregion`, `voided_by`, `county_district`, `latitude`, `longitude`, `township_division`, `person_id`, `state_province`, `creator`, `date_created`, `address1`, `address2`, `postal_code`, `voided`, `region`, `date_voided`, `country`, `neighborhood_cell`, `preferred`, `uuid`) VALUES('Area 15', NULL, NULL, NULL, 'Kabudula', NULL, NULL, 'Area 15', 25, 'Lilongwe City', 1, '2015-10-22 13:41:03', 'Church', 'Lilongwe', NULL, 0, NULL, NULL, NULL, 'Chadzala', 0, 'c602e9cf-78b1-11e5-a02d-30f9edcc2607')[0m
  [4;36;1mSQL (50.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonAttribute Create (0.2ms)[0m   [0;1mINSERT INTO `person_attribute` (`void_reason`, `voided_by`, `value`, `person_id`, `creator`, `date_created`, `voided`, `person_attribute_type_id`, `date_voided`, `date_changed`, `changed_by`, `uuid`) VALUES(NULL, NULL, 'Mechanic', 25, 1, '2015-10-22 13:41:03', 0, 13, NULL, '2015-10-22 13:41:03', 1, 'c60b88a6-78b1-11e5-a02d-30f9edcc2607')[0m
  [4;35;1mSQL (49.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mPersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonAttribute Create (0.4ms)[0m   [0mINSERT INTO `person_attribute` (`void_reason`, `voided_by`, `value`, `person_id`, `creator`, `date_created`, `voided`, `person_attribute_type_id`, `date_voided`, `date_changed`, `changed_by`, `uuid`) VALUES(NULL, NULL, 'Unknown', 25, 1, '2015-10-22 13:41:03', 0, 12, NULL, '2015-10-22 13:41:03', 1, 'c6139eb9-78b1-11e5-a02d-30f9edcc2607')[0m
  [4;36;1mSQL (51.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonAttribute Create (0.4ms)[0m   [0;1mINSERT INTO `person_attribute` (`void_reason`, `voided_by`, `value`, `person_id`, `creator`, `date_created`, `voided`, `person_attribute_type_id`, `date_voided`, `date_changed`, `changed_by`, `uuid`) VALUES(NULL, NULL, 'Unknown', 25, 1, '2015-10-22 13:41:03', 0, 15, NULL, '2015-10-22 13:41:03', 1, 'c61c3739-78b1-11e5-a02d-30f9edcc2607')[0m
  [4;35;1mSQL (50.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPersonAttribute Create (0.2ms)[0m   [0mINSERT INTO `person_attribute` (`void_reason`, `voided_by`, `value`, `person_id`, `creator`, `date_created`, `voided`, `person_attribute_type_id`, `date_voided`, `date_changed`, `changed_by`, `uuid`) VALUES(NULL, NULL, 'Unknown', 25, 1, '2015-10-22 13:41:03', 0, 14, NULL, '2015-10-22 13:41:03', 1, 'c6249d0f-78b1-11e5-a02d-30f9edcc2607')[0m
  [4;36;1mSQL (52.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSELECT UUID() as uuid[0m
  [4;36;1mPersonAttribute Create (0.2ms)[0m   [0;1mINSERT INTO `person_attribute` (`void_reason`, `voided_by`, `value`, `person_id`, `creator`, `date_created`, `voided`, `person_attribute_type_id`, `date_voided`, `date_changed`, `changed_by`, `uuid`) VALUES(NULL, NULL, 'Malawian', 25, 1, '2015-10-22 13:41:03', 0, 3, NULL, '2015-10-22 13:41:03', 1, 'c62d47e1-78b1-11e5-a02d-30f9edcc2607')[0m
  [4;35;1mSQL (50.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mSQL (0.0ms)[0m   [0mBEGIN[0m
  [4;36;1mPatient Create (0.2ms)[0m   [0;1mINSERT INTO `patient` (`void_reason`, `voided_by`, `tribe`, `creator`, `date_created`, `voided`, `date_voided`, `date_changed`, `patient_id`, `changed_by`) VALUES(NULL, NULL, NULL, 1, '2015-10-22 13:41:03', 0, NULL, '2015-10-22 13:41:03', 25, 1)[0m
  [4;35;1mSQL (54.0ms)[0m   [0mCOMMIT[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSELECT UUID() as uuid[0m
  [4;35;1mPatientIdentifier Create (0.2ms)[0m   [0mINSERT INTO `patient_identifier` (`void_reason`, `identifier_type`, `voided_by`, `location_id`, `creator`, `date_created`, `voided`, `date_voided`, `patient_id`, `identifier`, `preferred`, `uuid`) VALUES(NULL, 3, NULL, 700, 1, '2015-10-22 13:41:03', 0, NULL, 25, '000ED0', 0, 'c640609a-78b1-11e5-a02d-30f9edcc2607')[0m
  [4;36;1mPatientIdentifierType Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Load (0.3ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.3ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.2ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.3ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonName Load (0.4ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mRelationship Load (0.2ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mSQL (0.0ms)[0m   [0;1mMysql::Error: Table 'openmrs_demographx.patient' doesn't exist: INSERT INTO openmrs_demographx.patient (patient_id,gender,birthdate,birthdate_estimated,creator,date_created,date_changed)
VALUES(25,"Male","1990-05-05",0,1,'2015-10-22 13:41:02','2015-10-22 13:41:02');
[0m
  [4;35;1mSQL (52.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mPatientIdentifier Load (1.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000ED0') AND (patient_identifier.voided = 0) LIMIT 1[0m

RuntimeError (25):
  app/controllers/dde_controller.rb:67:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (27.2ms)
Rendered rescues/_request_and_response (0.7ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_process_data (for 127.0.0.1 at 2015-10-22 13:41:23) [POST]
  Parameters: {"action"=>"ajax_process_data", "person"=>"{\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"person_attributes\":{\"race\":null,\"citizenship\":\"Malawian\",\"cell_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"landmark\":\"Church\",\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"birthdate\":\"1990-05-05\",\"national_id\":null,\"names\":{\"maiden_name\":\"\",\"middle_name\":\"Hope\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\",\"gender\":\"M\"},\"application\":\"Radiology\",\"gender\":\"M\",\"site_code\":\"MPC\",\"print_barcode\":true}", "controller"=>"dde", "page"=>1}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` IS NULL) AND (patient_identifier.voided = 0) LIMIT 1[0m
Completed in 141ms (View: 1, DB: 18) | 200 OK [http://localhost/dde/ajax_process_data]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#index (for 127.0.0.1 at 2015-10-22 13:41:49) [GET]
  Parameters: {"action"=>"index", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mPerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 1) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.3ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mUserRole Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `user_role`[0m
  [4;35;1mUserRole Load (0.1ms)[0m   [0mSELECT * FROM `user_role` WHERE (`user_role`.`user_id` = 1) [0m
Rendering dde/index
Completed in 54ms (View: 8, DB: 18) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 13:41:50) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;36;1mPerson Load (0.4ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 19ms (View: 1, DB: 23) | 200 OK [http://localhost/clinic/overview_tab]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 13:41:50) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;35;1mPersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 21ms (View: 1, DB: 26) | 200 OK [http://localhost/clinic/overview_tab]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#search (for 127.0.0.1 at 2015-10-22 13:41:54) [GET]
  Parameters: {"action"=>"search", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering dde/search
Completed in 9ms (View: 1, DB: 21) | 200 OK [http://localhost/dde/search]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (2.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#given_names (for 127.0.0.1 at 2015-10-22 13:41:54) [GET]
  Parameters: {"search_string"=>"", "action"=>"given_names", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPersonNameCode Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name_code`[0m
  [4;35;1mPersonNameCode Load (0.6ms)[0m   [0mSELECT DISTINCT given_name AS given_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND given_name_code LIKE '%' GROUP BY given_name ORDER BY CASE INSTR(given_name,'') WHEN 0 THEN 9999 ELSE INSTR(given_name,'') END ASC LIMIT 10[0m
Completed in 12ms (View: 1, DB: 25) | 200 OK [http://localhost/dde/given_names?search_string=]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#family_names (for 127.0.0.1 at 2015-10-22 13:41:58) [GET]
  Parameters: {"search_string"=>"", "action"=>"family_names", "controller"=>"dde"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPersonNameCode Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `person_name_code`[0m
  [4;36;1mPersonNameCode Load (0.4ms)[0m   [0;1mSELECT DISTINCT family_name AS family_name, person_name.person_name_id AS id
 FROM person_name_code INNER JOIN person_name ON person_name_code.person_name_id = person_name.person_name_id WHERE person_name.voided = 0 AND family_name_code LIKE '%' GROUP BY family_name ORDER BY CASE INSTR(family_name,'') WHEN 0 THEN 9999 ELSE INSTR(family_name,'') END ASC LIMIT 10[0m
Completed in 46ms (View: 1, DB: 24) | 200 OK [http://localhost/dde/family_names?search_string=]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (11.4ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#ajax_search (for 127.0.0.1 at 2015-10-22 13:42:04) [GET]
  Parameters: {"action"=>"ajax_search", "controller"=>"dde", "given_name"=>"Alex", "gender"=>"M", "family_name"=>"Kaphukusi", "page"=>"1"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (1.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPerson Load (0.6ms)[0m   [0;1mSELECT `person`.* FROM `person` INNER JOIN `person_name` ON person_name.person_id = person.person_id AND person_name.`voided` = 0 WHERE (given_name = 'Alex' AND family_name = 'Kaphukusi' AND gender = 'M') AND (person.voided = 0) LIMIT 0, 6[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
Completed in 119ms (View: 1, DB: 32) | 200 OK [http://localhost/ajax_search?given_name=Alex&family_name=Kaphukusi&gender=M&page=1]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (2.4ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (5.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_scan_data (for 127.0.0.1 at 2015-10-22 13:42:10) [POST]
  Parameters: {"patient"=>"0", "action"=>"process_scan_data", "person"=>"{\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"person_attributes\":{\"race\":null,\"citizenship\":\"Malawian\",\"cell_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"national_id\":\"000ED0\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"birthdate\":\"1990-05-05\",\"names\":{\"maiden_name\":\"\",\"middle_name\":\"Hope\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"application\":\"Radiology\",\"age\":25,\"gender\":\"M\",\"site_code\":\"MPC\"}", "selected_patient"=>"", "controller"=>"dde", "given_name"=>"Alex", "gender"=>"M", "family_name"=>"Kaphukusi"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/process_scan_data
Completed in 224ms (View: 10, DB: 25) | 200 OK [http://localhost/dde/process_scan_data]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:42:11) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000ED0') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.3ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.5ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.5ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.5ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.4ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:202:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (67.0ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (8.8ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#index (for 127.0.0.1 at 2015-10-22 13:47:36) [GET]
  Parameters: {"action"=>"index", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mUserRole Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `user_role`[0m
  [4;36;1mUserRole Load (0.1ms)[0m   [0;1mSELECT * FROM `user_role` WHERE (`user_role`.`user_id` = 1) [0m
Rendering dde/index
Completed in 67ms (View: 26, DB: 31) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 13:47:36) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 20ms (View: 1, DB: 22) | 200 OK [http://localhost/clinic/overview_tab]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 13:47:37) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 19ms (View: 1, DB: 26) | 200 OK [http://localhost/clinic/overview_tab]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_data (for 127.0.0.1 at 2015-10-22 13:47:42) [GET]
  Parameters: {"action"=>"process_data", "controller"=>"dde", "id"=>"000ED0"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000ED0') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonName Load (0.6ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred ASC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
Completed in 83ms (View: 1, DB: 22) | 200 OK [http://localhost/process_data/000ED0]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_scan_data (for 127.0.0.1 at 2015-10-22 13:47:43) [POST]
  Parameters: {"action"=>"process_scan_data", "person"=>"{\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":null,\"cell_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"country_of_residence\":null,\"home_phone_number\":\"Unknown\"},\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"birthdate\":\"1990/05/05\",\"national_id\":\"000ED0\",\"names\":{\"maiden_name\":\"\",\"middle_name\":\"Hope\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"application\":\"Radiology\",\"gender\":\"M\",\"patient_id\":25,\"site_code\":\"MPC\"}", "controller"=>"dde"}
  [4;36;1mUser Load (0.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/process_scan_data
Completed in 237ms (View: 2, DB: 19) | 200 OK [http://localhost/dde/process_scan_data]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (8.3ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:47:43) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000ED0') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.3ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:65:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (27.3ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:49:17) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

RuntimeError ({"birthdate_estimated"=>"false", "person_attributes"=>{"race"=>"", "citizenship"=>"Malawian", "cell_phone_number"=>"Unknown", "office_phone_number"=>"Unknown", "occupation"=>"Mechanic", "country_of_residence"=>"Malawi", "home_phone_number"=>"Unknown"}, "addresses"=>{"home_village"=>"Chadzala", "current_ta"=>"Area 15", "current_village"=>"Area 15", "current_district"=>"Lilongwe City", "current_residence"=>"Church", "home_ta"=>"Kabudula", "home_district"=>"Lilongwe"}, "birthdate"=>"1990-05-05", "assigned_site"=>"MPC", "names"=>{"maiden_name"=>"", "given_name_code"=>"E42", "middle_name"=>"Hope", "family_name_code"=>"K126", "given_name"=>"Alex", "family_name"=>"Kaphukusi"}, "created_at"=>"2015-10-22T11:40:25.989Z", "old_identification_number"=>"", "_rev"=>"1-28fc1de2911db348d959ebdc94a5c99f", "updated_at"=>"2015-10-22T11:40:25.989Z", "patient_id"=>"25", "_id"=>"000ED0", "gender"=>"M", "patient_assigned"=>"true", "type"=>"Person"}):
  app/controllers/dde_controller.rb:50:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (62.3ms)
Rendered rescues/_request_and_response (0.5ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:49:42) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

RuntimeError (--- 
birthdate_estimated: "false"
person_attributes: 
  race: ""
  citizenship: Malawian
  cell_phone_number: Unknown
  office_phone_number: Unknown
  occupation: Mechanic
  country_of_residence: Malawi
  home_phone_number: Unknown
addresses: 
  home_village: Chadzala
  current_ta: Area 15
  current_village: Area 15
  current_district: Lilongwe City
  current_residence: Church
  home_ta: Kabudula
  home_district: Lilongwe
birthdate: "1990-05-05"
assigned_site: MPC
names: 
  maiden_name: ""
  given_name_code: E42
  middle_name: Hope
  family_name_code: K126
  given_name: Alex
  family_name: Kaphukusi
created_at: "2015-10-22T11:40:25.989Z"
old_identification_number: ""
_rev: 1-28fc1de2911db348d959ebdc94a5c99f
updated_at: "2015-10-22T11:40:25.989Z"
patient_id: "25"
_id: 000ED0
gender: M
patient_assigned: "true"
type: Person
):
  app/controllers/dde_controller.rb:50:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (25.7ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:50:48) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000ED0') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:68:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (27.7ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:52:10) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of ActiveRecord::Base.
The error occurred while evaluating nil.[]):
  app/controllers/dde_controller.rb:50:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (27.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:53:06) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

RuntimeError ("{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}"):
  app/controllers/dde_controller.rb:50:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (61.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:53:30) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

RuntimeError (--- !str 
str: "{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}"
"@_rails_html_safe": false
):
  app/controllers/dde_controller.rb:50:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (25.8ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:54:06) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

RuntimeError (--- !map:HashWithIndifferentAccess 
action: process_result
person: !str 
  str: "{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}"
  "@_rails_html_safe": false
controller: dde
):
  app/controllers/dde_controller.rb:50:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (25.7ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:57:20) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

RuntimeError ("{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}"):
  app/controllers/dde_controller.rb:50:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (59.6ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:58:01) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

RuntimeError ("_id"):
  app/controllers/dde_controller.rb:50:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (26.0ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:58:06) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.2ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

RuntimeError ("_id"):
  app/controllers/dde_controller.rb:50:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (27.6ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:58:45) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

RuntimeError ({"birthdate_estimated"=>"false", "person_attributes"=>{"race"=>"", "citizenship"=>"Malawian", "cell_phone_number"=>"Unknown", "office_phone_number"=>"Unknown", "occupation"=>"Mechanic", "country_of_residence"=>"Malawi", "home_phone_number"=>"Unknown"}, "addresses"=>{"home_village"=>"Chadzala", "current_ta"=>"Area 15", "current_village"=>"Area 15", "current_district"=>"Lilongwe City", "current_residence"=>"Church", "home_ta"=>"Kabudula", "home_district"=>"Lilongwe"}, "birthdate"=>"1990-05-05", "assigned_site"=>"MPC", "names"=>{"maiden_name"=>"", "given_name_code"=>"E42", "middle_name"=>"Hope", "family_name_code"=>"K126", "given_name"=>"Alex", "family_name"=>"Kaphukusi"}, "created_at"=>"2015-10-22T11:40:25.989Z", "old_identification_number"=>"", "_rev"=>"1-28fc1de2911db348d959ebdc94a5c99f", "updated_at"=>"2015-10-22T11:40:25.989Z", "patient_id"=>"25", "_id"=>"000ED0", "gender"=>"M", "patient_assigned"=>"true", "type"=>"Person"}):
  app/controllers/dde_controller.rb:50:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (61.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 13:59:18) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

RuntimeError ("000ED0"):
  app/controllers/dde_controller.rb:50:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (25.2ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 14:01:44) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

RuntimeError ("000ED0"):
  app/controllers/dde_controller.rb:50:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (26.5ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 14:01:56) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of ActiveRecord::Base.
The error occurred while evaluating nil.[]):
  app/controllers/dde_controller.rb:67:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (59.9ms)
Rendered rescues/_request_and_response (0.5ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 14:03:04) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of ActiveRecord::Base.
The error occurred while evaluating nil.[]):
  app/controllers/dde_controller.rb:69:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (25.8ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 14:04:58) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of ActiveRecord::Base.
The error occurred while evaluating nil.[]):
  app/controllers/dde_controller.rb:69:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (26.6ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.4ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 14:05:28) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of ActiveRecord::Base.
The error occurred while evaluating nil.[]):
  app/controllers/dde_controller.rb:69:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (60.2ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 14:05:35) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;35;1mUser Load (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.0ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.0ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;35;1mPersonName Load (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 18ms (View: 1, DB: 21) | 200 OK [http://localhost/clinic/overview_tab]
  [4;36;1mSQL (0.0ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing ClinicController#overview_tab (for 127.0.0.1 at 2015-10-22 14:05:35) [GET]
  Parameters: {"action"=>"overview_tab", "controller"=>"clinic"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'simple_application_dashboard') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59' AND encounter.creator = 1)) GROUP BY encounter.encounter_type[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (name IN ('RADIOLOGY EXAMINATION',' APPOINTMENT')) AND (encounter_type.retired = 0) [0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT count(*) as number, encounter_type FROM `encounter` WHERE (encounter_type IN (121)) AND ((encounter.voided = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) GROUP BY encounter.encounter_type[0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 1 AND (`person`.`voided` = 0)) AND (person.voided = 0) [0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 1 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
Rendering clinic/overview_simple.rhtml
Completed in 19ms (View: 1, DB: 24) | 200 OK [http://localhost/clinic/overview_tab]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_scan_data (for 127.0.0.1 at 2015-10-22 14:08:00) [POST]
  Parameters: {"action"=>"process_scan_data", "person"=>"{\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":null,\"cell_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"country_of_residence\":null,\"home_phone_number\":\"Unknown\"},\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"birthdate\":\"1990/05/05\",\"national_id\":\"000ED0\",\"names\":{\"maiden_name\":\"\",\"middle_name\":\"Hope\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"application\":\"Radiology\",\"gender\":\"M\",\"patient_id\":25,\"site_code\":\"MPC\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/process_scan_data
Completed in 206ms (View: 2, DB: 24) | 200 OK [http://localhost/dde/process_scan_data]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 14:08:00) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of ActiveRecord::Base.
The error occurred while evaluating nil.[]):
  app/controllers/dde_controller.rb:70:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (60.5ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 14:08:53) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

RuntimeError ("ii"):
  app/controllers/dde_controller.rb:68:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (26.1ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 14:09:27) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

RuntimeError (nil):
  app/controllers/dde_controller.rb:68:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (25.6ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 14:09:43) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.<<):
  app/controllers/dde_controller.rb:72:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (60.9ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 14:11:59) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

RuntimeError ([]):
  app/controllers/dde_controller.rb:68:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (26.7ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 14:12:21) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000ED0') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.2ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.5ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'national_id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:77:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (26.0ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 14:14:00) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000ED0') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'national_id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m

RuntimeError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id):
  lib/dde.rb:215:in `search_and_or_create'
  lib/dde.rb:199:in `each'
  lib/dde.rb:199:in `search_and_or_create'
  app/controllers/dde_controller.rb:77:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (64.6ms)
Rendered rescues/_request_and_response (0.5ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 14:15:05) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000ED0') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'national_id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Load (0.4ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25) AND (patient.voided = 0) [0m
Redirected to http://localhost:3000/patients/show/25
Completed in 50ms (DB: 26) | 302 Found [http://localhost/process_result]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.5ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing PatientsController#show (for 127.0.0.1 at 2015-10-22 14:15:05) [GET]
  Parameters: {"action"=>"show", "controller"=>"patients", "id"=>"25"}
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25) AND (patient.voided = 0) [0m
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.5ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.6ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.5ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonName Load (0.2ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.6ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.4ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.3ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.4ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.5ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.5ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mRelationship Load (0.5ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.3ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.4ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.3ms)[0m   [0;1mSELECT * FROM `encounter` WHERE ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) AND (encounter.voided = 0) [0m
  [4;35;1mConceptName Load (0.5ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'SERVICES') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.4ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 31 AND DATE(obs_datetime) = '2015-10-22') AND (obs.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.6ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Diabetes Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 14 AND patient_id = 25) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;35;1mOrder Load Including Associations (0.7ms)[0m   [0mSELECT `orders`.`order_id` AS t0_r0, `orders`.`order_type_id` AS t0_r1, `orders`.`concept_id` AS t0_r2, `orders`.`orderer` AS t0_r3, `orders`.`encounter_id` AS t0_r4, `orders`.`instructions` AS t0_r5, `orders`.`start_date` AS t0_r6, `orders`.`auto_expire_date` AS t0_r7, `orders`.`discontinued` AS t0_r8, `orders`.`discontinued_date` AS t0_r9, `orders`.`discontinued_by` AS t0_r10, `orders`.`discontinued_reason` AS t0_r11, `orders`.`creator` AS t0_r12, `orders`.`date_created` AS t0_r13, `orders`.`voided` AS t0_r14, `orders`.`voided_by` AS t0_r15, `orders`.`date_voided` AS t0_r16, `orders`.`void_reason` AS t0_r17, `orders`.`patient_id` AS t0_r18, `orders`.`accession_number` AS t0_r19, `orders`.`obs_id` AS t0_r20, `orders`.`uuid` AS t0_r21, `orders`.`discontinued_reason_non_coded` AS t0_r22, `drug_order`.`order_id` AS t1_r0, `drug_order`.`drug_inventory_id` AS t1_r1, `drug_order`.`dose` AS t1_r2, `drug_order`.`equivalent_daily_dose` AS t1_r3, `drug_order`.`units` AS t1_r4, `drug_order`.`frequency` AS t1_r5, `drug_order`.`prn` AS t1_r6, `drug_order`.`complex` AS t1_r7, `drug_order`.`quantity` AS t1_r8 FROM `orders` LEFT OUTER JOIN `drug_order` ON drug_order.order_id = orders.order_id WHERE (((((orders.voided = 0) AND (drug_order.drug_inventory_id is NOT NULL)) AND (discontinued = 0 AND auto_expire_date > NOW())) AND ((orders.voided = 0) AND ((`orders`.`patient_id` = 25) AND (`orders`.`voided` = 0)))) AND ((`orders`.`patient_id` = 25) AND (`orders`.`voided` = 0))) [0m
  [4;36;1mPatientProgram Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_program`[0m
  [4;35;1mPatientState Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_state`[0m
  [4;36;1mPatientProgram Load (0.6ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0))) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mEncounterType Load (0.5ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'APPOINTMENT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (0.5ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.6ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 25
 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.6ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 25
 AND obs_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;35;1mEncounter Load (0.5ms)[0m   [0mSELECT * FROM encounter WHERE patient_id = 25 AND encounter_type IN (SELECT encounter_type_id FROM encounter_type WHERE name IN ('VITALS', 'TREATMENT', 'HIV RECEPTION', 'HIV STAGING', 'HIV CLINIC CONSULTATION', 'DISPENSING'))[0m
  [4;36;1mEncounter Load (0.5ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (NOT (DATE_FORMAT(encounter_datetime, '%Y-%m-%d') IN (NULL)) AND encounter_datetime < NOW()) AND (((encounter.voided = 0) AND ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0))) AND (`encounter`.`encounter_type` = 7)) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;35;1mConceptName Load (0.4ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'What was the patients adherence for this drug order') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.4ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'ART ADHERENCE') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mObservation Load (0.6ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter e USING(encounter_id) WHERE (concept_id = 6987 AND encounter_type = 68 AND patient_id = 25 AND
 encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY obs_datetime DESC[0m
  [4;36;1mEncounterType Load (0.4ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'DISPENSING') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.3ms)[0m   [0mSELECT * FROM `encounter` WHERE (`encounter`.`encounter_type` = 54) AND ((encounter.voided = 0) AND ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0))) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (0.6ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.5ms)[0m   [0;1mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5089)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.3ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HEIGHT (CM)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.3ms)[0m   [0mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5090)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mProgram Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `program`[0m
  [4;35;1mProgram Load (0.3ms)[0m   [0mSELECT * FROM `program` WHERE (`program`.`name` = 'HIV PROGRAM') AND (program.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;36;1mPatientProgram Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE (voided = 0 AND patient_id = 25 AND program_id = 1 AND location_id = 700) AND (patient_program.voided = 0) [0m
  [4;35;1mConceptName Load (0.2ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HIV STATUS') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.2ms)[0m   [0;1mSELECT * FROM `obs` WHERE (value_coded IS NOT NULL AND person_id = 25 AND concept_id = 3753) AND (obs.voided = 0) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mPatientProgram Load (0.1ms)[0m   [0mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)) AND (patient_program.voided = 0) [0m
  [4;36;1mLocation Load (1.3ms)[0m   [0;1mSELECT * FROM `location` WHERE (name LIKE '%Martin Preuss Centre - %') AND (location.retired = 0) [0m
  [4;35;1mPatientProgram Load (0.3ms)[0m   [0mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)) AND ((((patient_program.voided = 0) AND (location_id IN (700))) AND (date_enrolled < NOW() AND (date_completed IS NULL OR date_completed > NOW()))) AND ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)))) [0m
  [4;36;1mConceptName Load (0.7ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mConceptName Load (0.4ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Tests ordered') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.6ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 1271 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mConceptName Load (0.6ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mObservation Load (0.4ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mConceptName Load (0.4ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Sputum submission') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.4ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 7818 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mEncounterType Load (0.4ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'HIV Staging') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.5ms)[0m   [0mSELECT * FROM `encounter` WHERE (encounter_type = 52 and patient_id = 25) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;36;1mEncounterType Load (0.5ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB Registration') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.3ms)[0m   [0mSELECT * FROM `encounter` WHERE (encounter_type = 78 and patient_id = 25) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;36;1mEncounterType Load (0.4ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB CLINIC VISIT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.3ms)[0m   [0mSELECT * FROM `encounter` WHERE (patient_id = 25 AND encounter_type = 86 AND DATE(encounter_datetime) = '2015-10-22' ) AND (encounter.voided = 0) [0m
  [4;36;1mProgramLocationRestriction Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `program_location_restriction`[0m
  [4;35;1mProgramLocationRestriction Load (0.3ms)[0m   [0mSELECT * FROM `program_location_restriction` WHERE (`program_location_restriction`.`location_id` = 700) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;35;1mTask Load (0.4ms)[0m   [0mSELECT * FROM `task` WHERE (task.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HIV STATUS') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `obs` WHERE (value_coded IS NOT NULL AND person_id = 25 AND concept_id = 3753) AND (obs.voided = 0) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mConceptName Load (0.6ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'REASON FOR ART ELIGIBILITY') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.4ms)[0m   [0mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 7563)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
Rendering patients/index
Completed in 810ms (View: 10, DB: 58) | 200 OK [http://localhost/patients/show/25]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
W FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing PatientsController#visit_history (for 127.0.0.1 at 2015-10-22 14:15:08) [GET]
  Parameters: {"action"=>"visit_history", "controller"=>"patients", "patient_id"=>"25"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25) AND (patient.voided = 0) [0m
  [4;35;1mEncounter Load (0.6ms)[0m   [0mSELECT * FROM `encounter` WHERE (patient_id = 25 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (encounter.voided = 0) ORDER BY encounter_datetime DESC[0m
  [4;36;1mOrder Load Including Associations (0.6ms)[0m   [0;1mSELECT `orders`.`order_id` AS t0_r0, `orders`.`order_type_id` AS t0_r1, `orders`.`concept_id` AS t0_r2, `orders`.`orderer` AS t0_r3, `orders`.`encounter_id` AS t0_r4, `orders`.`instructions` AS t0_r5, `orders`.`start_date` AS t0_r6, `orders`.`auto_expire_date` AS t0_r7, `orders`.`discontinued` AS t0_r8, `orders`.`discontinued_date` AS t0_r9, `orders`.`discontinued_by` AS t0_r10, `orders`.`discontinued_reason` AS t0_r11, `orders`.`creator` AS t0_r12, `orders`.`date_created` AS t0_r13, `orders`.`voided` AS t0_r14, `orders`.`voided_by` AS t0_r15, `orders`.`date_voided` AS t0_r16, `orders`.`void_reason` AS t0_r17, `orders`.`patient_id` AS t0_r18, `orders`.`accession_number` AS t0_r19, `orders`.`obs_id` AS t0_r20, `orders`.`uuid` AS t0_r21, `orders`.`discontinued_reason_non_coded` AS t0_r22, `drug_order`.`order_id` AS t1_r0, `drug_order`.`drug_inventory_id` AS t1_r1, `drug_order`.`dose` AS t1_r2, `drug_order`.`equivalent_daily_dose` AS t1_r3, `drug_order`.`units` AS t1_r4, `drug_order`.`frequency` AS t1_r5, `drug_order`.`prn` AS t1_r6, `drug_order`.`complex` AS t1_r7, `drug_order`.`quantity` AS t1_r8 FROM `orders` LEFT OUTER JOIN `drug_order` ON drug_order.order_id = orders.order_id WHERE (((((orders.voided = 0) AND (drug_order.drug_inventory_id is NOT NULL)) AND (discontinued = 0 AND auto_expire_date > NOW())) AND ((orders.voided = 0) AND ((`orders`.`patient_id` = 25) AND (`orders`.`voided` = 0)))) AND ((`orders`.`patient_id` = 25) AND (`orders`.`voided` = 0))) [0m
  [4;35;1mPatientProgram Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_program`[0m
  [4;36;1mPatientState Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_state`[0m
  [4;35;1mPatientProgram Load (0.1ms)[0m   [0mSELECT * FROM `patient_program` WHERE ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0))) [0m
  [4;36;1mPerson Load (0.1ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (5.9ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mRelationship Load (0.1ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'APPOINTMENT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 25
 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 25
 AND obs_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM encounter WHERE patient_id = 25 AND encounter_type IN (SELECT encounter_type_id FROM encounter_type WHERE name IN ('VITALS', 'TREATMENT', 'HIV RECEPTION', 'HIV STAGING', 'HIV CLINIC CONSULTATION', 'DISPENSING'))[0m
  [4;36;1mEncounter Load (0.6ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (NOT (DATE_FORMAT(encounter_datetime, '%Y-%m-%d') IN (NULL)) AND encounter_datetime < NOW()) AND (((encounter.voided = 0) AND ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0))) AND (`encounter`.`encounter_type` = 7)) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'What was the patients adherence for this drug order') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'ART ADHERENCE') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter e USING(encounter_id) WHERE (concept_id = 6987 AND encounter_type = 68 AND patient_id = 25 AND
 encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY obs_datetime DESC[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'DISPENSING') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM `encounter` WHERE (`encounter`.`encounter_type` = 54) AND ((encounter.voided = 0) AND ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0))) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5089)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HEIGHT (CM)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5090)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mProgram Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `program`[0m
  [4;35;1mProgram Load (0.1ms)[0m   [0mSELECT * FROM `program` WHERE (`program`.`name` = 'HIV PROGRAM') AND (program.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;36;1mPatientProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE (voided = 0 AND patient_id = 25 AND program_id = 1 AND location_id = 700) AND (patient_program.voided = 0) [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HIV STATUS') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE (value_coded IS NOT NULL AND person_id = 25 AND concept_id = 3753) AND (obs.voided = 0) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mPatientProgram Load (0.1ms)[0m   [0mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)) AND (patient_program.voided = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (name LIKE '%Martin Preuss Centre - %') AND (location.retired = 0) [0m
  [4;35;1mPatientProgram Load (0.5ms)[0m   [0mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)) AND ((((patient_program.voided = 0) AND (location_id IN (700))) AND (date_enrolled < NOW() AND (date_completed IS NULL OR date_completed > NOW()))) AND ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)))) [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Tests ordered') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 1271 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Sputum submission') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 7818 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'HIV Staging') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM `encounter` WHERE (encounter_type = 52 and patient_id = 25) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB Registration') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM `encounter` WHERE (encounter_type = 78 and patient_id = 25) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB CLINIC VISIT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM `encounter` WHERE (patient_id = 25 AND encounter_type = 86 AND DATE(encounter_datetime) = '2015-10-22' ) AND (encounter.voided = 0) [0m
  [4;36;1mProgramLocationRestriction Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `program_location_restriction`[0m
  [4;35;1mProgramLocationRestriction Load (0.1ms)[0m   [0mSELECT * FROM `program_location_restriction` WHERE (`program_location_restriction`.`location_id` = 700) [0m
Rendering dashboards/visit_history_tab
Completed in 180ms (View: 7, DB: 40) | 200 OK [http://localhost/patients/visit_history?patient_id=25]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing PatientsController#visit_history (for 127.0.0.1 at 2015-10-22 14:15:08) [GET]
  Parameters: {"action"=>"visit_history", "controller"=>"patients", "patient_id"=>"25"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25) AND (patient.voided = 0) [0m
  [4;35;1mEncounter Load (0.2ms)[0m   [0mSELECT * FROM `encounter` WHERE (patient_id = 25 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (encounter.voided = 0) ORDER BY encounter_datetime DESC[0m
  [4;36;1mOrder Load Including Associations (0.8ms)[0m   [0;1mSELECT `orders`.`order_id` AS t0_r0, `orders`.`order_type_id` AS t0_r1, `orders`.`concept_id` AS t0_r2, `orders`.`orderer` AS t0_r3, `orders`.`encounter_id` AS t0_r4, `orders`.`instructions` AS t0_r5, `orders`.`start_date` AS t0_r6, `orders`.`auto_expire_date` AS t0_r7, `orders`.`discontinued` AS t0_r8, `orders`.`discontinued_date` AS t0_r9, `orders`.`discontinued_by` AS t0_r10, `orders`.`discontinued_reason` AS t0_r11, `orders`.`creator` AS t0_r12, `orders`.`date_created` AS t0_r13, `orders`.`voided` AS t0_r14, `orders`.`voided_by` AS t0_r15, `orders`.`date_voided` AS t0_r16, `orders`.`void_reason` AS t0_r17, `orders`.`patient_id` AS t0_r18, `orders`.`accession_number` AS t0_r19, `orders`.`obs_id` AS t0_r20, `orders`.`uuid` AS t0_r21, `orders`.`discontinued_reason_non_coded` AS t0_r22, `drug_order`.`order_id` AS t1_r0, `drug_order`.`drug_inventory_id` AS t1_r1, `drug_order`.`dose` AS t1_r2, `drug_order`.`equivalent_daily_dose` AS t1_r3, `drug_order`.`units` AS t1_r4, `drug_order`.`frequency` AS t1_r5, `drug_order`.`prn` AS t1_r6, `drug_order`.`complex` AS t1_r7, `drug_order`.`quantity` AS t1_r8 FROM `orders` LEFT OUTER JOIN `drug_order` ON drug_order.order_id = orders.order_id WHERE (((((orders.voided = 0) AND (drug_order.drug_inventory_id is NOT NULL)) AND (discontinued = 0 AND auto_expire_date > NOW())) AND ((orders.voided = 0) AND ((`orders`.`patient_id` = 25) AND (`orders`.`voided` = 0)))) AND ((`orders`.`patient_id` = 25) AND (`orders`.`voided` = 0))) [0m
  [4;35;1mPatientProgram Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_program`[0m
  [4;36;1mPatientState Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_state`[0m
  [4;35;1mPatientProgram Load (0.2ms)[0m   [0mSELECT * FROM `patient_program` WHERE ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0))) [0m
  [4;36;1mPerson Load (0.2ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonName Load (0.1ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;35;1mRelationship Load (0.1ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'APPOINTMENT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 25
 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 25
 AND obs_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM encounter WHERE patient_id = 25 AND encounter_type IN (SELECT encounter_type_id FROM encounter_type WHERE name IN ('VITALS', 'TREATMENT', 'HIV RECEPTION', 'HIV STAGING', 'HIV CLINIC CONSULTATION', 'DISPENSING'))[0m
  [4;36;1mEncounter Load (0.6ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (NOT (DATE_FORMAT(encounter_datetime, '%Y-%m-%d') IN (NULL)) AND encounter_datetime < NOW()) AND (((encounter.voided = 0) AND ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0))) AND (`encounter`.`encounter_type` = 7)) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'What was the patients adherence for this drug order') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'ART ADHERENCE') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter e USING(encounter_id) WHERE (concept_id = 6987 AND encounter_type = 68 AND patient_id = 25 AND
 encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY obs_datetime DESC[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'DISPENSING') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM `encounter` WHERE (`encounter`.`encounter_type` = 54) AND ((encounter.voided = 0) AND ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0))) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5089)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HEIGHT (CM)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5090)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mProgram Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `program`[0m
  [4;35;1mProgram Load (0.1ms)[0m   [0mSELECT * FROM `program` WHERE (`program`.`name` = 'HIV PROGRAM') AND (program.retired = 0) LIMIT 1[0m
  [4;36;1mGlobalProperty Load (0.1ms)[0m   [0;1mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;36;1mPatientProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE (voided = 0 AND patient_id = 25 AND program_id = 1 AND location_id = 700) AND (patient_program.voided = 0) [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HIV STATUS') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE (value_coded IS NOT NULL AND person_id = 25 AND concept_id = 3753) AND (obs.voided = 0) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mPatientProgram Load (0.1ms)[0m   [0mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)) AND (patient_program.voided = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (name LIKE '%Martin Preuss Centre - %') AND (location.retired = 0) [0m
  [4;35;1mPatientProgram Load (0.5ms)[0m   [0mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)) AND ((((patient_program.voided = 0) AND (location_id IN (700))) AND (date_enrolled < NOW() AND (date_completed IS NULL OR date_completed > NOW()))) AND ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)))) [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Tests ordered') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 1271 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Sputum submission') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 7818 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'HIV Staging') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM `encounter` WHERE (encounter_type = 52 and patient_id = 25) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;36;1mEncounterType Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB Registration') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM `encounter` WHERE (encounter_type = 78 and patient_id = 25) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;36;1mEncounterType Load (0.0ms)[0m   [0;1mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB CLINIC VISIT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM `encounter` WHERE (patient_id = 25 AND encounter_type = 86 AND DATE(encounter_datetime) = '2015-10-22' ) AND (encounter.voided = 0) [0m
  [4;36;1mProgramLocationRestriction Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `program_location_restriction`[0m
  [4;35;1mProgramLocationRestriction Load (0.1ms)[0m   [0mSELECT * FROM `program_location_restriction` WHERE (`program_location_restriction`.`location_id` = 700) [0m
Rendering dashboards/visit_history_tab
Completed in 176ms (View: 1, DB: 40) | 200 OK [http://localhost/patients/visit_history?patient_id=25]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing EncountersController#observations (for 127.0.0.1 at 2015-10-22 14:15:09) [GET]
  Parameters: {"action"=>"observations", "controller"=>"encounters", "id"=>"undefined"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.4ms)[0m   [0mSELECT * FROM `encounter` WHERE (`encounter`.`encounter_id` = 0) AND (encounter.voided = 0) [0m

ActiveRecord::RecordNotFound (Couldn't find Encounter with ID=undefined):
  app/controllers/generic_encounters_controller.rb:631:in `observations'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (67.4ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (not_found)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_scan_data (for 127.0.0.1 at 2015-10-22 14:19:01) [POST]
  Parameters: {"action"=>"process_scan_data", "person"=>"{\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":null,\"cell_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"country_of_residence\":null,\"home_phone_number\":\"Unknown\"},\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"birthdate\":\"1990/05/05\",\"national_id\":\"000ED0\",\"names\":{\"maiden_name\":\"\",\"middle_name\":\"Hope\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"application\":\"Radiology\",\"gender\":\"M\",\"patient_id\":25,\"site_code\":\"MPC\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/process_scan_data
Completed in 249ms (View: 2, DB: 23) | 200 OK [http://localhost/dde/process_scan_data]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (10.6ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 14:19:02) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;36;1mUser Load (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m

RuntimeError (--- 
patient: 
  identifiers: []

birthdate_estimated: "false"
person_attributes: 
  race: ""
  citizenship: Malawian
  cell_phone_number: Unknown
  office_phone_number: Unknown
  occupation: Mechanic
  country_of_residence: Malawi
  home_phone_number: Unknown
addresses: 
  home_village: Chadzala
  current_ta: Area 15
  current_village: Area 15
  current_district: Lilongwe City
  current_residence: Church
  home_ta: Kabudula
  home_district: Lilongwe
birthdate: "1990-05-05"
assigned_site: MPC
names: 
  maiden_name: ""
  given_name_code: E42
  middle_name: Hope
  family_name_code: K126
  given_name: Alex
  family_name: Kaphukusi
created_at: "2015-10-22T11:40:25.989Z"
old_identification_number: ""
_rev: 1-28fc1de2911db348d959ebdc94a5c99f
updated_at: "2015-10-22T11:40:25.989Z"
patient_id: "25"
_id: 000ED0
gender: M
patient_assigned: "true"
type: Person
):
  app/controllers/dde_controller.rb:68:in `process_result'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (27.7ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 14:25:19) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000ED0') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25) AND (patient.voided = 0) [0m
Redirected to http://localhost:3000/patients/show/25
Completed in 85ms (DB: 24) | 302 Found [http://localhost/process_result]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing PatientsController#show (for 127.0.0.1 at 2015-10-22 14:25:19) [GET]
  Parameters: {"action"=>"show", "controller"=>"patients", "id"=>"25"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mRelationship Load (0.1ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM `encounter` WHERE ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) AND (encounter.voided = 0) [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'SERVICES') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 31 AND DATE(obs_datetime) = '2015-10-22') AND (obs.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Diabetes Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 14 AND patient_id = 25) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mOrder Load Including Associations (0.6ms)[0m   [0;1mSELECT `orders`.`order_id` AS t0_r0, `orders`.`order_type_id` AS t0_r1, `orders`.`concept_id` AS t0_r2, `orders`.`orderer` AS t0_r3, `orders`.`encounter_id` AS t0_r4, `orders`.`instructions` AS t0_r5, `orders`.`start_date` AS t0_r6, `orders`.`auto_expire_date` AS t0_r7, `orders`.`discontinued` AS t0_r8, `orders`.`discontinued_date` AS t0_r9, `orders`.`discontinued_by` AS t0_r10, `orders`.`discontinued_reason` AS t0_r11, `orders`.`creator` AS t0_r12, `orders`.`date_created` AS t0_r13, `orders`.`voided` AS t0_r14, `orders`.`voided_by` AS t0_r15, `orders`.`date_voided` AS t0_r16, `orders`.`void_reason` AS t0_r17, `orders`.`patient_id` AS t0_r18, `orders`.`accession_number` AS t0_r19, `orders`.`obs_id` AS t0_r20, `orders`.`uuid` AS t0_r21, `orders`.`discontinued_reason_non_coded` AS t0_r22, `drug_order`.`order_id` AS t1_r0, `drug_order`.`drug_inventory_id` AS t1_r1, `drug_order`.`dose` AS t1_r2, `drug_order`.`equivalent_daily_dose` AS t1_r3, `drug_order`.`units` AS t1_r4, `drug_order`.`frequency` AS t1_r5, `drug_order`.`prn` AS t1_r6, `drug_order`.`complex` AS t1_r7, `drug_order`.`quantity` AS t1_r8 FROM `orders` LEFT OUTER JOIN `drug_order` ON drug_order.order_id = orders.order_id WHERE (((((orders.voided = 0) AND (drug_order.drug_inventory_id is NOT NULL)) AND (discontinued = 0 AND auto_expire_date > NOW())) AND ((orders.voided = 0) AND ((`orders`.`patient_id` = 25) AND (`orders`.`voided` = 0)))) AND ((`orders`.`patient_id` = 25) AND (`orders`.`voided` = 0))) [0m
  [4;35;1mPatientProgram Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_program`[0m
  [4;36;1mPatientState Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_state`[0m
  [4;35;1mPatientProgram Load (0.1ms)[0m   [0mSELECT * FROM `patient_program` WHERE ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0))) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mEncounterType Load (0.2ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'APPOINTMENT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 25
 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 25
 AND obs_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM encounter WHERE patient_id = 25 AND encounter_type IN (SELECT encounter_type_id FROM encounter_type WHERE name IN ('VITALS', 'TREATMENT', 'HIV RECEPTION', 'HIV STAGING', 'HIV CLINIC CONSULTATION', 'DISPENSING'))[0m
  [4;35;1mEncounter Load (0.6ms)[0m   [0mSELECT * FROM `encounter` WHERE (NOT (DATE_FORMAT(encounter_datetime, '%Y-%m-%d') IN (NULL)) AND encounter_datetime < NOW()) AND (((encounter.voided = 0) AND ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0))) AND (`encounter`.`encounter_type` = 7)) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'What was the patients adherence for this drug order') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'ART ADHERENCE') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter e USING(encounter_id) WHERE (concept_id = 6987 AND encounter_type = 68 AND patient_id = 25 AND
 encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY obs_datetime DESC[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'DISPENSING') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (`encounter`.`encounter_type` = 54) AND ((encounter.voided = 0) AND ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0))) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5089)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HEIGHT (CM)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5090)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mProgram Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `program`[0m
  [4;36;1mProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `program` WHERE (`program`.`name` = 'HIV PROGRAM') AND (program.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.0ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;35;1mPatientProgram Load (0.1ms)[0m   [0mSELECT * FROM `patient_program` WHERE (voided = 0 AND patient_id = 25 AND program_id = 1 AND location_id = 700) AND (patient_program.voided = 0) [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HIV STATUS') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (value_coded IS NOT NULL AND person_id = 25 AND concept_id = 3753) AND (obs.voided = 0) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mPatientProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)) AND (patient_program.voided = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (name LIKE '%Martin Preuss Centre - %') AND (location.retired = 0) [0m
  [4;36;1mPatientProgram Load (0.4ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)) AND ((((patient_program.voided = 0) AND (location_id IN (700))) AND (date_enrolled < NOW() AND (date_completed IS NULL OR date_completed > NOW()))) AND ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)))) [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Tests ordered') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 1271 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Sputum submission') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.0ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 7818 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'HIV Staging') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (encounter_type = 52 and patient_id = 25) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB Registration') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.0ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (encounter_type = 78 and patient_id = 25) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB CLINIC VISIT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (patient_id = 25 AND encounter_type = 86 AND DATE(encounter_datetime) = '2015-10-22' ) AND (encounter.voided = 0) [0m
  [4;35;1mProgramLocationRestriction Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `program_location_restriction`[0m
  [4;36;1mProgramLocationRestriction Load (0.1ms)[0m   [0;1mSELECT * FROM `program_location_restriction` WHERE (`program_location_restriction`.`location_id` = 700) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mTask Load (0.1ms)[0m   [0;1mSELECT * FROM `task` WHERE (task.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HIV STATUS') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `obs` WHERE (value_coded IS NOT NULL AND person_id = 25 AND concept_id = 3753) AND (obs.voided = 0) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mConceptName Load (0.2ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'REASON FOR ART ELIGIBILITY') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 7563)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
Rendering patients/index
Completed in 198ms (View: 1, DB: 38) | 200 OK [http://localhost/patients/show/25]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.6ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.5ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing PatientsController#visit_history (for 127.0.0.1 at 2015-10-22 14:25:20) [GET]
  Parameters: {"action"=>"visit_history", "controller"=>"patients", "patient_id"=>"25"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25) AND (patient.voided = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (patient_id = 25 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (encounter.voided = 0) ORDER BY encounter_datetime DESC[0m
  [4;35;1mOrder Load Including Associations (0.6ms)[0m   [0mSELECT `orders`.`order_id` AS t0_r0, `orders`.`order_type_id` AS t0_r1, `orders`.`concept_id` AS t0_r2, `orders`.`orderer` AS t0_r3, `orders`.`encounter_id` AS t0_r4, `orders`.`instructions` AS t0_r5, `orders`.`start_date` AS t0_r6, `orders`.`auto_expire_date` AS t0_r7, `orders`.`discontinued` AS t0_r8, `orders`.`discontinued_date` AS t0_r9, `orders`.`discontinued_by` AS t0_r10, `orders`.`discontinued_reason` AS t0_r11, `orders`.`creator` AS t0_r12, `orders`.`date_created` AS t0_r13, `orders`.`voided` AS t0_r14, `orders`.`voided_by` AS t0_r15, `orders`.`date_voided` AS t0_r16, `orders`.`void_reason` AS t0_r17, `orders`.`patient_id` AS t0_r18, `orders`.`accession_number` AS t0_r19, `orders`.`obs_id` AS t0_r20, `orders`.`uuid` AS t0_r21, `orders`.`discontinued_reason_non_coded` AS t0_r22, `drug_order`.`order_id` AS t1_r0, `drug_order`.`drug_inventory_id` AS t1_r1, `drug_order`.`dose` AS t1_r2, `drug_order`.`equivalent_daily_dose` AS t1_r3, `drug_order`.`units` AS t1_r4, `drug_order`.`frequency` AS t1_r5, `drug_order`.`prn` AS t1_r6, `drug_order`.`complex` AS t1_r7, `drug_order`.`quantity` AS t1_r8 FROM `orders` LEFT OUTER JOIN `drug_order` ON drug_order.order_id = orders.order_id WHERE (((((orders.voided = 0) AND (drug_order.drug_inventory_id is NOT NULL)) AND (discontinued = 0 AND auto_expire_date > NOW())) AND ((orders.voided = 0) AND ((`orders`.`patient_id` = 25) AND (`orders`.`voided` = 0)))) AND ((`orders`.`patient_id` = 25) AND (`orders`.`voided` = 0))) [0m
  [4;36;1mPatientProgram Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `patient_program`[0m
  [4;35;1mPatientState Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_state`[0m
  [4;36;1mPatientProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0))) [0m
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mRelationship Load (0.1ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'APPOINTMENT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 25
 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 25
 AND obs_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM encounter WHERE patient_id = 25 AND encounter_type IN (SELECT encounter_type_id FROM encounter_type WHERE name IN ('VITALS', 'TREATMENT', 'HIV RECEPTION', 'HIV STAGING', 'HIV CLINIC CONSULTATION', 'DISPENSING'))[0m
  [4;35;1mEncounter Load (0.6ms)[0m   [0mSELECT * FROM `encounter` WHERE (NOT (DATE_FORMAT(encounter_datetime, '%Y-%m-%d') IN (NULL)) AND encounter_datetime < NOW()) AND (((encounter.voided = 0) AND ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0))) AND (`encounter`.`encounter_type` = 7)) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'What was the patients adherence for this drug order') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'ART ADHERENCE') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter e USING(encounter_id) WHERE (concept_id = 6987 AND encounter_type = 68 AND patient_id = 25 AND
 encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY obs_datetime DESC[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'DISPENSING') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (`encounter`.`encounter_type` = 54) AND ((encounter.voided = 0) AND ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0))) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5089)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HEIGHT (CM)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.0ms)[0m   [0;1mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5090)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mProgram Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `program`[0m
  [4;36;1mProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `program` WHERE (`program`.`name` = 'HIV PROGRAM') AND (program.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;35;1mPatientProgram Load (0.1ms)[0m   [0mSELECT * FROM `patient_program` WHERE (voided = 0 AND patient_id = 25 AND program_id = 1 AND location_id = 700) AND (patient_program.voided = 0) [0m
  [4;36;1mConceptName Load (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HIV STATUS') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.0ms)[0m   [0mSELECT * FROM `obs` WHERE (value_coded IS NOT NULL AND person_id = 25 AND concept_id = 3753) AND (obs.voided = 0) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mPatientProgram Load (0.0ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)) AND (patient_program.voided = 0) [0m
  [4;35;1mLocation Load (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (name LIKE '%Martin Preuss Centre - %') AND (location.retired = 0) [0m
  [4;36;1mPatientProgram Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)) AND ((((patient_program.voided = 0) AND (location_id IN (700))) AND (date_enrolled < NOW() AND (date_completed IS NULL OR date_completed > NOW()))) AND ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)))) [0m
  [4;35;1mConceptName Load (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mConceptName Load (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Tests ordered') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.0ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 1271 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mConceptName Load (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mObservation Load (0.0ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Sputum submission') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.6ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 7818 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'HIV Staging') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.0ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (encounter_type = 52 and patient_id = 25) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;35;1mEncounterType Load (0.0ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB Registration') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (encounter_type = 78 and patient_id = 25) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB CLINIC VISIT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (patient_id = 25 AND encounter_type = 86 AND DATE(encounter_datetime) = '2015-10-22' ) AND (encounter.voided = 0) [0m
  [4;35;1mProgramLocationRestriction Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `program_location_restriction`[0m
  [4;36;1mProgramLocationRestriction Load (0.1ms)[0m   [0;1mSELECT * FROM `program_location_restriction` WHERE (`program_location_restriction`.`location_id` = 700) [0m
Rendering dashboards/visit_history_tab
Completed in 173ms (View: 1, DB: 31) | 200 OK [http://localhost/patients/visit_history?patient_id=25]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing PatientsController#visit_history (for 127.0.0.1 at 2015-10-22 14:25:21) [GET]
  Parameters: {"action"=>"visit_history", "controller"=>"patients", "patient_id"=>"25"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25) AND (patient.voided = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (patient_id = 25 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (encounter.voided = 0) ORDER BY encounter_datetime DESC[0m
  [4;35;1mOrder Load Including Associations (0.7ms)[0m   [0mSELECT `orders`.`order_id` AS t0_r0, `orders`.`order_type_id` AS t0_r1, `orders`.`concept_id` AS t0_r2, `orders`.`orderer` AS t0_r3, `orders`.`encounter_id` AS t0_r4, `orders`.`instructions` AS t0_r5, `orders`.`start_date` AS t0_r6, `orders`.`auto_expire_date` AS t0_r7, `orders`.`discontinued` AS t0_r8, `orders`.`discontinued_date` AS t0_r9, `orders`.`discontinued_by` AS t0_r10, `orders`.`discontinued_reason` AS t0_r11, `orders`.`creator` AS t0_r12, `orders`.`date_created` AS t0_r13, `orders`.`voided` AS t0_r14, `orders`.`voided_by` AS t0_r15, `orders`.`date_voided` AS t0_r16, `orders`.`void_reason` AS t0_r17, `orders`.`patient_id` AS t0_r18, `orders`.`accession_number` AS t0_r19, `orders`.`obs_id` AS t0_r20, `orders`.`uuid` AS t0_r21, `orders`.`discontinued_reason_non_coded` AS t0_r22, `drug_order`.`order_id` AS t1_r0, `drug_order`.`drug_inventory_id` AS t1_r1, `drug_order`.`dose` AS t1_r2, `drug_order`.`equivalent_daily_dose` AS t1_r3, `drug_order`.`units` AS t1_r4, `drug_order`.`frequency` AS t1_r5, `drug_order`.`prn` AS t1_r6, `drug_order`.`complex` AS t1_r7, `drug_order`.`quantity` AS t1_r8 FROM `orders` LEFT OUTER JOIN `drug_order` ON drug_order.order_id = orders.order_id WHERE (((((orders.voided = 0) AND (drug_order.drug_inventory_id is NOT NULL)) AND (discontinued = 0 AND auto_expire_date > NOW())) AND ((orders.voided = 0) AND ((`orders`.`patient_id` = 25) AND (`orders`.`voided` = 0)))) AND ((`orders`.`patient_id` = 25) AND (`orders`.`voided` = 0))) [0m
  [4;36;1mPatientProgram Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_program`[0m
  [4;35;1mPatientState Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_state`[0m
  [4;36;1mPatientProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0))) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPatient Load (0.0ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonName Load (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.2ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mRelationship Load (0.2ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.2ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.5ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'APPOINTMENT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.0ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 25
 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.0ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 25
 AND obs_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;36;1mEncounter Load (0.0ms)[0m   [0;1mSELECT * FROM encounter WHERE patient_id = 25 AND encounter_type IN (SELECT encounter_type_id FROM encounter_type WHERE name IN ('VITALS', 'TREATMENT', 'HIV RECEPTION', 'HIV STAGING', 'HIV CLINIC CONSULTATION', 'DISPENSING'))[0m
  [4;35;1mEncounter Load (0.6ms)[0m   [0mSELECT * FROM `encounter` WHERE (NOT (DATE_FORMAT(encounter_datetime, '%Y-%m-%d') IN (NULL)) AND encounter_datetime < NOW()) AND (((encounter.voided = 0) AND ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0))) AND (`encounter`.`encounter_type` = 7)) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;36;1mConceptName Load (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'What was the patients adherence for this drug order') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'ART ADHERENCE') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter e USING(encounter_id) WHERE (concept_id = 6987 AND encounter_type = 68 AND patient_id = 25 AND
 encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY obs_datetime DESC[0m
  [4;35;1mEncounterType Load (0.0ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'DISPENSING') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (`encounter`.`encounter_type` = 54) AND ((encounter.voided = 0) AND ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0))) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.2ms)[0m   [0mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5089)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (0.2ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HEIGHT (CM)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5090)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mProgram Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `program`[0m
  [4;36;1mProgram Load (0.2ms)[0m   [0;1mSELECT * FROM `program` WHERE (`program`.`name` = 'HIV PROGRAM') AND (program.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;35;1mPatientProgram Load (0.1ms)[0m   [0mSELECT * FROM `patient_program` WHERE (voided = 0 AND patient_id = 25 AND program_id = 1 AND location_id = 700) AND (patient_program.voided = 0) [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HIV STATUS') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.2ms)[0m   [0mSELECT * FROM `obs` WHERE (value_coded IS NOT NULL AND person_id = 25 AND concept_id = 3753) AND (obs.voided = 0) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mPatientProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)) AND (patient_program.voided = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (name LIKE '%Martin Preuss Centre - %') AND (location.retired = 0) [0m
  [4;36;1mPatientProgram Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)) AND ((((patient_program.voided = 0) AND (location_id IN (700))) AND (date_enrolled < NOW() AND (date_completed IS NULL OR date_completed > NOW()))) AND ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)))) [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Tests ordered') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 1271 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Sputum submission') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 7818 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'HIV Staging') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (encounter_type = 52 and patient_id = 25) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB Registration') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (encounter_type = 78 and patient_id = 25) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB CLINIC VISIT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (patient_id = 25 AND encounter_type = 86 AND DATE(encounter_datetime) = '2015-10-22' ) AND (encounter.voided = 0) [0m
  [4;35;1mProgramLocationRestriction Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `program_location_restriction`[0m
  [4;36;1mProgramLocationRestriction Load (0.1ms)[0m   [0;1mSELECT * FROM `program_location_restriction` WHERE (`program_location_restriction`.`location_id` = 700) [0m
Rendering dashboards/visit_history_tab
Completed in 189ms (View: 1, DB: 39) | 200 OK [http://localhost/patients/visit_history?patient_id=25]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.7ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing EncountersController#observations (for 127.0.0.1 at 2015-10-22 14:25:22) [GET]
  Parameters: {"action"=>"observations", "controller"=>"encounters", "id"=>"undefined"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.2ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (`encounter`.`encounter_id` = 0) AND (encounter.voided = 0) [0m

ActiveRecord::RecordNotFound (Couldn't find Encounter with ID=undefined):
  app/controllers/generic_encounters_controller.rb:631:in `observations'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (71.2ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_scan_data (for 127.0.0.1 at 2015-10-22 14:25:39) [POST]
  Parameters: {"action"=>"process_scan_data", "person"=>"{\"birthdate_estimated\":false,\"patient\":{\"identifiers\":[]},\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":null,\"cell_phone_number\":\"Unknown\",\"office_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"country_of_residence\":null,\"home_phone_number\":\"Unknown\"},\"return_path\":\"http://localhost:3000/process_result\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_district\":\"Lilongwe City\",\"current_residence\":\"Church\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"birthdate\":\"1990/05/05\",\"national_id\":\"000ED0\",\"names\":{\"maiden_name\":\"\",\"middle_name\":\"Hope\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"application\":\"Radiology\",\"gender\":\"M\",\"patient_id\":25,\"site_code\":\"MPC\"}", "controller"=>"dde"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
Rendering template within layouts/ts
Rendering dde/process_scan_data
Completed in 207ms (View: 2, DB: 24) | 200 OK [http://localhost/dde/process_scan_data]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing DdeController#process_result (for 127.0.0.1 at 2015-10-22 14:25:39) [POST]
  Parameters: {"action"=>"process_result", "person"=>"{\"person_attributes\":{\"citizenship\":\"Malawian\",\"race\":\"\",\"cell_phone_number\":\"Unknown\",\"occupation\":\"Mechanic\",\"office_phone_number\":\"Unknown\",\"country_of_residence\":\"Malawi\",\"home_phone_number\":\"Unknown\"},\"birthdate_estimated\":\"false\",\"assigned_site\":\"MPC\",\"birthdate\":\"1990-05-05\",\"addresses\":{\"home_village\":\"Chadzala\",\"current_ta\":\"Area 15\",\"current_village\":\"Area 15\",\"current_residence\":\"Church\",\"current_district\":\"Lilongwe City\",\"home_ta\":\"Kabudula\",\"home_district\":\"Lilongwe\"},\"names\":{\"maiden_name\":\"\",\"given_name_code\":\"E42\",\"middle_name\":\"Hope\",\"family_name_code\":\"K126\",\"given_name\":\"Alex\",\"family_name\":\"Kaphukusi\"},\"created_at\":\"2015-10-22T11:40:25.989Z\",\"old_identification_number\":\"\",\"updated_at\":\"2015-10-22T11:40:25.989Z\",\"_rev\":\"1-28fc1de2911db348d959ebdc94a5c99f\",\"patient_assigned\":\"true\",\"gender\":\"M\",\"_id\":\"000ED0\",\"patient_id\":\"25\",\"type\":\"Person\"}", "controller"=>"dde"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier` = '000ED0') AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPersonAddress Load (0.1ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred ASC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 13) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 12) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 14) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office Phone Number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 15) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 1) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttributeType Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPersonAttribute Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (`person_attribute`.`person_attribute_type_id` = 3) AND ((person_attribute.voided = 0) AND (`person_attribute`.`person_id` = 25 AND (`person_attribute`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0)) AND (patient_identifier.voided = 0) [0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`patient_identifier_type_id` = 3 AND (`patient_identifier_type`.`retired` = 0)) AND (patient_identifier_type.retired = 0) [0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Unknown ID') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Country of Residence') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Load (0.1ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25) AND (patient.voided = 0) [0m
Redirected to http://localhost:3000/patients/show/25
Completed in 85ms (DB: 27) | 302 Found [http://localhost/process_result]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
  [4;35;1mPatientIdentifierType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;36;1mPatientIdentifier Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier`[0m
  [4;35;1mPersonAttribute Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute`[0m
  [4;36;1mPersonAttributeType Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;35;1mEncounter Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `encounter`[0m
  [4;36;1mObservation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `obs`[0m
  [4;35;1mOrder Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `orders`[0m
  [4;36;1mEncounterType Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `encounter_type`[0m
  [4;35;1mLocation Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `location`[0m
  [4;36;1mDrugOrder Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `drug_order`[0m
  [4;35;1mUser Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mTask Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `task`[0m
  [4;35;1mGlobalProperty Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `global_property`[0m
  [4;36;1mPerson Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person`[0m
  [4;35;1mPersonName Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person_name`[0m
  [4;36;1mPersonAddress Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_address`[0m
  [4;35;1mRegimen Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `regimen`[0m
  [4;36;1mRelationship Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `relationship`[0m
  [4;35;1mConceptName Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `concept_name`[0m
  [4;36;1mConcept Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept`[0m


Processing PatientsController#show (for 127.0.0.1 at 2015-10-22 14:25:40) [GET]
  Parameters: {"action"=>"show", "controller"=>"patients", "id"=>"25"}
  [4;35;1mUser Load (0.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;35;1mPatient Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient`[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25) AND (patient.voided = 0) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mRelationship Load (0.1ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mEncounter Load (0.1ms)[0m   [0mSELECT * FROM `encounter` WHERE ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0) AND (encounter_datetime BETWEEN '2015-10-22 00:00:00' AND '2015-10-22 23:59:59')) AND (encounter.voided = 0) [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'SERVICES') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 31 AND DATE(obs_datetime) = '2015-10-22') AND (obs.voided = 0) [0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Diabetes Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (voided = 0 AND identifier_type = 14 AND patient_id = 25) AND (patient_identifier.voided = 0) LIMIT 1[0m
  [4;36;1mOrder Load Including Associations (0.8ms)[0m   [0;1mSELECT `orders`.`order_id` AS t0_r0, `orders`.`order_type_id` AS t0_r1, `orders`.`concept_id` AS t0_r2, `orders`.`orderer` AS t0_r3, `orders`.`encounter_id` AS t0_r4, `orders`.`instructions` AS t0_r5, `orders`.`start_date` AS t0_r6, `orders`.`auto_expire_date` AS t0_r7, `orders`.`discontinued` AS t0_r8, `orders`.`discontinued_date` AS t0_r9, `orders`.`discontinued_by` AS t0_r10, `orders`.`discontinued_reason` AS t0_r11, `orders`.`creator` AS t0_r12, `orders`.`date_created` AS t0_r13, `orders`.`voided` AS t0_r14, `orders`.`voided_by` AS t0_r15, `orders`.`date_voided` AS t0_r16, `orders`.`void_reason` AS t0_r17, `orders`.`patient_id` AS t0_r18, `orders`.`accession_number` AS t0_r19, `orders`.`obs_id` AS t0_r20, `orders`.`uuid` AS t0_r21, `orders`.`discontinued_reason_non_coded` AS t0_r22, `drug_order`.`order_id` AS t1_r0, `drug_order`.`drug_inventory_id` AS t1_r1, `drug_order`.`dose` AS t1_r2, `drug_order`.`equivalent_daily_dose` AS t1_r3, `drug_order`.`units` AS t1_r4, `drug_order`.`frequency` AS t1_r5, `drug_order`.`prn` AS t1_r6, `drug_order`.`complex` AS t1_r7, `drug_order`.`quantity` AS t1_r8 FROM `orders` LEFT OUTER JOIN `drug_order` ON drug_order.order_id = orders.order_id WHERE (((((orders.voided = 0) AND (drug_order.drug_inventory_id is NOT NULL)) AND (discontinued = 0 AND auto_expire_date > NOW())) AND ((orders.voided = 0) AND ((`orders`.`patient_id` = 25) AND (`orders`.`voided` = 0)))) AND ((`orders`.`patient_id` = 25) AND (`orders`.`voided` = 0))) [0m
  [4;35;1mPatientProgram Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_program`[0m
  [4;36;1mPatientState Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient_state`[0m
  [4;35;1mPatientProgram Load (0.1ms)[0m   [0mSELECT * FROM `patient_program` WHERE ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0))) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'APPOINTMENT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 25
 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 25
 AND obs_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM encounter WHERE patient_id = 25 AND encounter_type IN (SELECT encounter_type_id FROM encounter_type WHERE name IN ('VITALS', 'TREATMENT', 'HIV RECEPTION', 'HIV STAGING', 'HIV CLINIC CONSULTATION', 'DISPENSING'))[0m
  [4;35;1mEncounter Load (0.6ms)[0m   [0mSELECT * FROM `encounter` WHERE (NOT (DATE_FORMAT(encounter_datetime, '%Y-%m-%d') IN (NULL)) AND encounter_datetime < NOW()) AND (((encounter.voided = 0) AND ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0))) AND (`encounter`.`encounter_type` = 7)) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'What was the patients adherence for this drug order') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'ART ADHERENCE') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter e USING(encounter_id) WHERE (concept_id = 6987 AND encounter_type = 68 AND patient_id = 25 AND
 encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY obs_datetime DESC[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'DISPENSING') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (`encounter`.`encounter_type` = 54) AND ((encounter.voided = 0) AND ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0))) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5089)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (0.2ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HEIGHT (CM)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5090)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mProgram Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `program`[0m
  [4;36;1mProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `program` WHERE (`program`.`name` = 'HIV PROGRAM') AND (program.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;35;1mPatientProgram Load (0.1ms)[0m   [0mSELECT * FROM `patient_program` WHERE (voided = 0 AND patient_id = 25 AND program_id = 1 AND location_id = 700) AND (patient_program.voided = 0) [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HIV STATUS') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (value_coded IS NOT NULL AND person_id = 25 AND concept_id = 3753) AND (obs.voided = 0) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mPatientProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)) AND (patient_program.voided = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (name LIKE '%Martin Preuss Centre - %') AND (location.retired = 0) [0m
  [4;36;1mPatientProgram Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)) AND ((((patient_program.voided = 0) AND (location_id IN (700))) AND (date_enrolled < NOW() AND (date_completed IS NULL OR date_completed > NOW()))) AND ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)))) [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Tests ordered') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 1271 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mObservation Load (0.0ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Sputum submission') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 7818 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'HIV Staging') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (encounter_type = 52 and patient_id = 25) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB Registration') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (encounter_type = 78 and patient_id = 25) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB CLINIC VISIT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (patient_id = 25 AND encounter_type = 86 AND DATE(encounter_datetime) = '2015-10-22' ) AND (encounter.voided = 0) [0m
  [4;35;1mProgramLocationRestriction Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `program_location_restriction`[0m
  [4;36;1mProgramLocationRestriction Load (0.1ms)[0m   [0;1mSELECT * FROM `program_location_restriction` WHERE (`program_location_restriction`.`location_id` = 700) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) [0m
  [4;36;1mTask Load (0.2ms)[0m   [0;1mSELECT * FROM `task` WHERE (task.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HIV STATUS') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `obs` WHERE (value_coded IS NOT NULL AND person_id = 25 AND concept_id = 3753) AND (obs.voided = 0) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'REASON FOR ART ELIGIBILITY') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 7563)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
Rendering patients/index
Completed in 244ms (View: 2, DB: 39) | 200 OK [http://localhost/patients/show/25]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing PatientsController#visit_history (for 127.0.0.1 at 2015-10-22 14:25:41) [GET]
  Parameters: {"action"=>"visit_history", "controller"=>"patients", "patient_id"=>"25"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25) AND (patient.voided = 0) [0m
  [4;36;1mEncounter Load (0.2ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (patient_id = 25 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (encounter.voided = 0) ORDER BY encounter_datetime DESC[0m
  [4;35;1mOrder Load Including Associations (0.7ms)[0m   [0mSELECT `orders`.`order_id` AS t0_r0, `orders`.`order_type_id` AS t0_r1, `orders`.`concept_id` AS t0_r2, `orders`.`orderer` AS t0_r3, `orders`.`encounter_id` AS t0_r4, `orders`.`instructions` AS t0_r5, `orders`.`start_date` AS t0_r6, `orders`.`auto_expire_date` AS t0_r7, `orders`.`discontinued` AS t0_r8, `orders`.`discontinued_date` AS t0_r9, `orders`.`discontinued_by` AS t0_r10, `orders`.`discontinued_reason` AS t0_r11, `orders`.`creator` AS t0_r12, `orders`.`date_created` AS t0_r13, `orders`.`voided` AS t0_r14, `orders`.`voided_by` AS t0_r15, `orders`.`date_voided` AS t0_r16, `orders`.`void_reason` AS t0_r17, `orders`.`patient_id` AS t0_r18, `orders`.`accession_number` AS t0_r19, `orders`.`obs_id` AS t0_r20, `orders`.`uuid` AS t0_r21, `orders`.`discontinued_reason_non_coded` AS t0_r22, `drug_order`.`order_id` AS t1_r0, `drug_order`.`drug_inventory_id` AS t1_r1, `drug_order`.`dose` AS t1_r2, `drug_order`.`equivalent_daily_dose` AS t1_r3, `drug_order`.`units` AS t1_r4, `drug_order`.`frequency` AS t1_r5, `drug_order`.`prn` AS t1_r6, `drug_order`.`complex` AS t1_r7, `drug_order`.`quantity` AS t1_r8 FROM `orders` LEFT OUTER JOIN `drug_order` ON drug_order.order_id = orders.order_id WHERE (((((orders.voided = 0) AND (drug_order.drug_inventory_id is NOT NULL)) AND (discontinued = 0 AND auto_expire_date > NOW())) AND ((orders.voided = 0) AND ((`orders`.`patient_id` = 25) AND (`orders`.`voided` = 0)))) AND ((`orders`.`patient_id` = 25) AND (`orders`.`voided` = 0))) [0m
  [4;36;1mPatientProgram Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_program`[0m
  [4;35;1mPatientState Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_state`[0m
  [4;36;1mPatientProgram Load (0.2ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0))) [0m
  [4;35;1mPerson Load (0.2ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPatient Load (0.2ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonName Load (0.2ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mRelationship Load (0.0ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'APPOINTMENT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 25
 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 25
 AND obs_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM encounter WHERE patient_id = 25 AND encounter_type IN (SELECT encounter_type_id FROM encounter_type WHERE name IN ('VITALS', 'TREATMENT', 'HIV RECEPTION', 'HIV STAGING', 'HIV CLINIC CONSULTATION', 'DISPENSING'))[0m
  [4;35;1mEncounter Load (0.5ms)[0m   [0mSELECT * FROM `encounter` WHERE (NOT (DATE_FORMAT(encounter_datetime, '%Y-%m-%d') IN (NULL)) AND encounter_datetime < NOW()) AND (((encounter.voided = 0) AND ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0))) AND (`encounter`.`encounter_type` = 7)) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'What was the patients adherence for this drug order') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'ART ADHERENCE') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter e USING(encounter_id) WHERE (concept_id = 6987 AND encounter_type = 68 AND patient_id = 25 AND
 encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY obs_datetime DESC[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'DISPENSING') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (`encounter`.`encounter_type` = 54) AND ((encounter.voided = 0) AND ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0))) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5089)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HEIGHT (CM)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.0ms)[0m   [0;1mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5090)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mProgram Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `program`[0m
  [4;36;1mProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `program` WHERE (`program`.`name` = 'HIV PROGRAM') AND (program.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;35;1mPatientProgram Load (0.1ms)[0m   [0mSELECT * FROM `patient_program` WHERE (voided = 0 AND patient_id = 25 AND program_id = 1 AND location_id = 700) AND (patient_program.voided = 0) [0m
  [4;36;1mConceptName Load (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HIV STATUS') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.0ms)[0m   [0mSELECT * FROM `obs` WHERE (value_coded IS NOT NULL AND person_id = 25 AND concept_id = 3753) AND (obs.voided = 0) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mPatientProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)) AND (patient_program.voided = 0) [0m
  [4;35;1mLocation Load (0.0ms)[0m   [0mSELECT * FROM `location` WHERE (name LIKE '%Martin Preuss Centre - %') AND (location.retired = 0) [0m
  [4;36;1mPatientProgram Load (0.5ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)) AND ((((patient_program.voided = 0) AND (location_id IN (700))) AND (date_enrolled < NOW() AND (date_completed IS NULL OR date_completed > NOW()))) AND ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)))) [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Tests ordered') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 1271 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Sputum submission') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 7818 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'HIV Staging') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (encounter_type = 52 and patient_id = 25) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB Registration') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (encounter_type = 78 and patient_id = 25) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;35;1mEncounterType Load (0.0ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB CLINIC VISIT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.0ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (patient_id = 25 AND encounter_type = 86 AND DATE(encounter_datetime) = '2015-10-22' ) AND (encounter.voided = 0) [0m
  [4;35;1mProgramLocationRestriction Columns (0.7ms)[0m   [0mSHOW FIELDS FROM `program_location_restriction`[0m
  [4;36;1mProgramLocationRestriction Load (0.1ms)[0m   [0;1mSELECT * FROM `program_location_restriction` WHERE (`program_location_restriction`.`location_id` = 700) [0m
Rendering dashboards/visit_history_tab
Completed in 174ms (View: 1, DB: 36) | 200 OK [http://localhost/patients/visit_history?patient_id=25]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (0.9ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (6.0ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing PatientsController#visit_history (for 127.0.0.1 at 2015-10-22 14:25:41) [GET]
  Parameters: {"action"=>"visit_history", "controller"=>"patients", "patient_id"=>"25"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mPatient Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `patient`[0m
  [4;35;1mPatient Load (0.2ms)[0m   [0mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25) AND (patient.voided = 0) [0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (patient_id = 25 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (encounter.voided = 0) ORDER BY encounter_datetime DESC[0m
  [4;35;1mOrder Load Including Associations (0.6ms)[0m   [0mSELECT `orders`.`order_id` AS t0_r0, `orders`.`order_type_id` AS t0_r1, `orders`.`concept_id` AS t0_r2, `orders`.`orderer` AS t0_r3, `orders`.`encounter_id` AS t0_r4, `orders`.`instructions` AS t0_r5, `orders`.`start_date` AS t0_r6, `orders`.`auto_expire_date` AS t0_r7, `orders`.`discontinued` AS t0_r8, `orders`.`discontinued_date` AS t0_r9, `orders`.`discontinued_by` AS t0_r10, `orders`.`discontinued_reason` AS t0_r11, `orders`.`creator` AS t0_r12, `orders`.`date_created` AS t0_r13, `orders`.`voided` AS t0_r14, `orders`.`voided_by` AS t0_r15, `orders`.`date_voided` AS t0_r16, `orders`.`void_reason` AS t0_r17, `orders`.`patient_id` AS t0_r18, `orders`.`accession_number` AS t0_r19, `orders`.`obs_id` AS t0_r20, `orders`.`uuid` AS t0_r21, `orders`.`discontinued_reason_non_coded` AS t0_r22, `drug_order`.`order_id` AS t1_r0, `drug_order`.`drug_inventory_id` AS t1_r1, `drug_order`.`dose` AS t1_r2, `drug_order`.`equivalent_daily_dose` AS t1_r3, `drug_order`.`units` AS t1_r4, `drug_order`.`frequency` AS t1_r5, `drug_order`.`prn` AS t1_r6, `drug_order`.`complex` AS t1_r7, `drug_order`.`quantity` AS t1_r8 FROM `orders` LEFT OUTER JOIN `drug_order` ON drug_order.order_id = orders.order_id WHERE (((((orders.voided = 0) AND (drug_order.drug_inventory_id is NOT NULL)) AND (discontinued = 0 AND auto_expire_date > NOW())) AND ((orders.voided = 0) AND ((`orders`.`patient_id` = 25) AND (`orders`.`voided` = 0)))) AND ((`orders`.`patient_id` = 25) AND (`orders`.`voided` = 0))) [0m
  [4;36;1mPatientProgram Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `patient_program`[0m
  [4;35;1mPatientState Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `patient_state`[0m
  [4;36;1mPatientProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0))) [0m
  [4;35;1mPerson Load (0.1ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mPatient Load (0.1ms)[0m   [0;1mSELECT * FROM `patient` WHERE (`patient`.`patient_id` = 25 AND (`patient`.`voided` = 0)) AND (patient.voided = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAddress Load (0.1ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mPatientIdentifierType Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mPatientIdentifier Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mPersonName Load (0.1ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPatientIdentifierType Load (0.1ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mPatientIdentifier Load (0.1ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person` WHERE (`person`.`person_id` = 25 AND (`person`.`voided` = 0)) AND (person.voided = 0) LIMIT 1[0m
  [4;36;1mRelationship Load (0.1ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mPersonAttributeType Load (0.1ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mPersonAttribute Load (0.1ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'APPOINTMENT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 25
 AND encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Appointment date') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT `obs`.* FROM `obs` INNER JOIN encounter ON obs.encounter_id = encounter.encounter_id WHERE (concept_id = 5096 AND encounter_type = 7 AND patient_id = 25
 AND obs_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY encounter_datetime DESC,encounter.date_created DESC LIMIT 1[0m
  [4;36;1mEncounter Load (0.0ms)[0m   [0;1mSELECT * FROM encounter WHERE patient_id = 25 AND encounter_type IN (SELECT encounter_type_id FROM encounter_type WHERE name IN ('VITALS', 'TREATMENT', 'HIV RECEPTION', 'HIV STAGING', 'HIV CLINIC CONSULTATION', 'DISPENSING'))[0m
  [4;35;1mEncounter Load (0.6ms)[0m   [0mSELECT * FROM `encounter` WHERE (NOT (DATE_FORMAT(encounter_datetime, '%Y-%m-%d') IN (NULL)) AND encounter_datetime < NOW()) AND (((encounter.voided = 0) AND ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0))) AND (`encounter`.`encounter_type` = 7)) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'What was the patients adherence for this drug order') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mEncounterType Load (0.0ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'ART ADHERENCE') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT `obs`.* FROM `obs` INNER JOIN encounter e USING(encounter_id) WHERE (concept_id = 6987 AND encounter_type = 68 AND patient_id = 25 AND
 encounter_datetime >= '2015-10-22 00:00:00' AND encounter_datetime <= '2015-10-22 23:59:59') AND (obs.voided = 0) ORDER BY obs_datetime DESC[0m
  [4;35;1mEncounterType Load (0.0ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'DISPENSING') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (`encounter`.`encounter_type` = 54) AND ((encounter.voided = 0) AND ((`encounter`.`patient_id` = 25) AND (`encounter`.`voided` = 0))) ORDER BY encounter_datetime DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mConceptName Load (0.2ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'WEIGHT (KG)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.2ms)[0m   [0mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5089)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'ARV Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 4) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 3) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'National id') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier` WHERE (`patient_identifier`.`identifier_type` = 3) AND ((patient_identifier.voided = 0) AND (`patient_identifier`.`patient_id` = 25 AND (`patient_identifier`.`voided` = 0))) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_address` WHERE (`person_address`.`person_id` = 25 AND (`person_address`.`voided` = 0)) AND (person_address.voided = 0) ORDER BY person_address.preferred DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_name` WHERE (`person_name`.`person_id` = 25 AND (`person_name`.`voided` = 0)) AND (person_name.voided = 0) ORDER BY person_name.preferred DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'EID Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Pre ART Number (Old format)') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = NULL) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Archived filing number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 18) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `patient_identifier_type` WHERE (`patient_identifier_type`.`name` = 'Filing Number') AND (patient_identifier_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT identifier FROM `patient_identifier` WHERE (patient_id = 25 and identifier_type = 17) AND (patient_identifier.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Occupation') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 13 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Cell phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 12 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Office phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 15 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Home phone number') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 14 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `relationship` WHERE (person_a = 25) AND (relationship.voided = 0) ORDER BY date_created DESC LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Race') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 1 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `person_attribute_type` WHERE (`person_attribute_type`.`name` = 'Citizenship') AND (person_attribute_type.retired = 0) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `person_attribute` WHERE (voided = 0 AND person_attribute_type_id = 3 AND person_id = 25) AND (person_attribute.voided = 0) LIMIT 1[0m
  [4;35;1mConceptName Load (0.3ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HEIGHT (CM)') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE ((((obs.voided = 0) AND (`obs`.`concept_id` = 5090)) AND ((obs.voided = 0) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0)))) AND (`obs`.`person_id` = 25 AND (`obs`.`voided` = 0))) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;35;1mProgram Columns (0.6ms)[0m   [0mSHOW FIELDS FROM `program`[0m
  [4;36;1mProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `program` WHERE (`program`.`name` = 'HIV PROGRAM') AND (program.retired = 0) LIMIT 1[0m
  [4;35;1mGlobalProperty Load (0.1ms)[0m   [0mSELECT * FROM `global_property` WHERE (`global_property`.`property` = 'current_health_center_id') LIMIT 1[0m
  [4;36;1mLocation Load (0.1ms)[0m   [0;1mSELECT * FROM `location` WHERE (`location`.`location_id` = 700) AND (location.retired = 0) [0m
  [4;35;1mPatientProgram Load (0.1ms)[0m   [0mSELECT * FROM `patient_program` WHERE (voided = 0 AND patient_id = 25 AND program_id = 1 AND location_id = 700) AND (patient_program.voided = 0) [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'HIV STATUS') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (value_coded IS NOT NULL AND person_id = 25 AND concept_id = 3753) AND (obs.voided = 0) ORDER BY obs_datetime DESC,date_created DESC LIMIT 1[0m
  [4;36;1mPatientProgram Load (0.1ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)) AND (patient_program.voided = 0) [0m
  [4;35;1mLocation Load (0.1ms)[0m   [0mSELECT * FROM `location` WHERE (name LIKE '%Martin Preuss Centre - %') AND (location.retired = 0) [0m
  [4;36;1mPatientProgram Load (0.3ms)[0m   [0;1mSELECT * FROM `patient_program` WHERE ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)) AND ((((patient_program.voided = 0) AND (location_id IN (700))) AND (date_enrolled < NOW() AND (date_completed IS NULL OR date_completed > NOW()))) AND ((patient_program.voided = 0) AND ((`patient_program`.`patient_id` = 25) AND (`patient_program`.`voided` = 0)))) [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Tests ordered') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 1271 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mConceptName Load (0.1ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mObservation Load (0.1ms)[0m   [0mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;35;1mConceptName Load (0.1ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (`concept_name`.`name` = 'Sputum submission') AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') LIMIT 1[0m
  [4;36;1mObservation Load (0.1ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id = 7818 AND (value_coded in (6849,6850,6851,8005,8006) OR value_text in ('AAFB(1st)','AAFB(2nd)','AAFB(3rd)','Culture(1st)','Culture(2nd)'))) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `concept_name`.* FROM `concept_name` INNER JOIN `concept` ON `concept`.concept_id = `concept_name`.concept_id AND concept.`retired` = 0 WHERE (name IN ('AAFB(1st) results','AAFB(2nd) results','AAFB(3rd) results','Culture(1st) Results','Culture-2 Results')) AND (concept_name.voided = 0 AND concept.retired = 0 AND concept_name.name != '') [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `obs` WHERE (person_id = 25 AND concept_id IN (7819,7820,7821,8007,8008)) AND (obs.voided = 0) ORDER BY obs_datetime desc LIMIT 3[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'HIV Staging') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (encounter_type = 52 and patient_id = 25) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB Registration') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (encounter_type = 78 and patient_id = 25) AND (encounter.voided = 0) ORDER BY encounter.encounter_id DESC LIMIT 1[0m
  [4;35;1mEncounterType Load (0.1ms)[0m   [0mSELECT * FROM `encounter_type` WHERE (`encounter_type`.`name` = 'TB CLINIC VISIT') AND (encounter_type.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (patient_id = 25 AND encounter_type = 86 AND DATE(encounter_datetime) = '2015-10-22' ) AND (encounter.voided = 0) [0m
  [4;35;1mProgramLocationRestriction Columns (0.8ms)[0m   [0mSHOW FIELDS FROM `program_location_restriction`[0m
  [4;36;1mProgramLocationRestriction Load (0.1ms)[0m   [0;1mSELECT * FROM `program_location_restriction` WHERE (`program_location_restriction`.`location_id` = 700) [0m
Rendering dashboards/visit_history_tab
Completed in 179ms (View: 1, DB: 44) | 200 OK [http://localhost/patients/visit_history?patient_id=25]
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mPatientIdentifierType Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `patient_identifier_type`[0m
  [4;35;1mPatientIdentifier Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `patient_identifier`[0m
  [4;36;1mPersonAttribute Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `person_attribute`[0m
  [4;35;1mPersonAttributeType Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `person_attribute_type`[0m
  [4;36;1mEncounter Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `encounter`[0m
  [4;35;1mObservation Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `obs`[0m
  [4;36;1mOrder Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `orders`[0m
  [4;35;1mEncounterType Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `encounter_type`[0m
  [4;36;1mLocation Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `location`[0m
  [4;35;1mDrugOrder Columns (0.9ms)[0m   [0mSHOW FIELDS FROM `drug_order`[0m
  [4;36;1mUser Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mTask Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `task`[0m
  [4;36;1mGlobalProperty Columns (0.8ms)[0m   [0;1mSHOW FIELDS FROM `global_property`[0m
  [4;35;1mPerson Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `person`[0m
  [4;36;1mPersonName Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `person_name`[0m
  [4;35;1mPersonAddress Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `person_address`[0m
  [4;36;1mRegimen Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `regimen`[0m
  [4;35;1mRelationship Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `relationship`[0m
  [4;36;1mConceptName Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `concept_name`[0m
  [4;35;1mConcept Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `concept`[0m


Processing EncountersController#observations (for 127.0.0.1 at 2015-10-22 14:25:42) [GET]
  Parameters: {"action"=>"observations", "controller"=>"encounters", "id"=>"undefined"}
  [4;36;1mUser Load (0.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`user_id` = 1) AND (users.retired = 0) [0m
  [4;35;1mLocation Load (0.2ms)[0m   [0mSELECT * FROM `location` WHERE (`location`.`location_id` = 721) AND (location.retired = 0) LIMIT 1[0m
  [4;36;1mEncounter Load (0.1ms)[0m   [0;1mSELECT * FROM `encounter` WHERE (`encounter`.`encounter_id` = 0) AND (encounter.voided = 0) [0m

ActiveRecord::RecordNotFound (Couldn't find Encounter with ID=undefined):
  app/controllers/generic_encounters_controller.rb:631:in `observations'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:35:in `call'
  warden (0.10.7) lib/warden/manager.rb:34:in `catch'
  warden (0.10.7) lib/warden/manager.rb:34:in `call'
  devise (1.0.11) lib/devise/rails/warden_compat.rb:43:in `call'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/hope/.rbenv/versions/1.8.7-p374/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (69.3ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (not_found)
c^C[2015-10-22 14:32:49] INFO  going to shutdown ...
[2015-10-22 14:32:49] INFO  WEBrick::HTTPServer#start done.
Exiting
]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ ^C
]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ ld [K[K[Kls dcq[K[K[Kscq[Krqq[K[Kipt/initial_database_setup.sh[1Pscript/initial_database_setup.sh[1Pcript/initial_database_setup.sh[1Pscript/initial_database_setup.shgscript/initial_database_setup.shescript/initial_database_setup.shdscript/initial_database_setup.shiscript/initial_database_setup.shtscript/initial_database_setup.sh script/initial_database_setup.sh
]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ cd /v[Kb[KA[K[K[K[K[Kgedit ../ART/script/initial_database_setup.sh 
]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ gedit ../ART/script/initial_database_setup.sh [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[8Pscript/initial_database_setup.sh[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[25Pscript/server[K[K[K[K[K[K[K[K[K[K[K[K[Kmysql --user=$USERNAME --password=$PASSWORD $DATABASE < db/openmrs_metadata _1_7.sql[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C --password=$PASSWORD $DATABASE < db/openmrs_metadata_1[1P_7.sql[A]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C --password=$PASSWORD $DATABASE < db/openmrs_metadata_1_[1P7.sql[A]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C --password=$PASSWORD $DATABASE < db/openmrs_metadata_1_7[1P.sql[A]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C --password=$PASSWORD $DATABASE < db/openmrs_metadata_1_7.[1Psql[A]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C --password=$PASSWORD $DATABASE < db/openmrs_metadata_1_7.s[1Pql[A]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C --password=$PASSWORD $DATABASE < db/openmrs_metadata_1_7.sq[1Pl[A]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C --password=$PASSWORD $DATABASE < db/openmrs_metadata_1_7.sql[K[A]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C --password=$PASSWORD $DATABASE < db/openmrs_metadata_1_7.sql [K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1P
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1P[1P[1P[1P[1P[1P[1@u[C[1@ [1@r[1@o[1@o[1@t[C[C[C[C[C[C[C[C[C[C[C[1P[1P[1P[1P[1P[1P[1P[1P[1P[1@p[C[C[C[C[C[C[C[C[C[C[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1@l[1@e[1@t[1@m[1@e[1@i[1@n[C[C[C[C[C[C[C[C[C[C[C[1P[1P[1P[1P[1P[1P[1P[1P[1P[1@b[1@a[1@r[1@t[1@2[1@_[1@d[1@e[1@v[1@e[1@l[1@o[1@p[1@m[1@e[1@n[1@t
]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ mysql -u root -pletmein bart2_development < db/openmrs_metadata_1_7.sql[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K[K../ART/sc[K[Kdb/openmrs_metadata_1_7.ssql 
]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ mysql -u root -pletmein bart2_development < ../ART/db/openmrs_metadata_1_7.ssql [A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C ../ART/db/openmrs_metadata_1_7.sq[1P[A]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C../ART/db/openmrs_metadata_1_7.sql[1P [A]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C ../ART/db/openmrs_metadata_1_7.sql [K[A]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C ../ART/db/openmrs_metadata_1_7.sql  [K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1P
[K[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1P[1@c[1@p[C[1@ [C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cdb/me[K[Kopenmrs_[K[K[K[K[K[K[K[K
]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ git status
On branch dde
Your branch is up-to-date with 'origin/dde'.

Changes not staged for commit:
  (use "git add/rm <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	[31mmodified:   app/controllers/dde_controller.rb[m
	[31mmodified:   db/openmrs_metadata_1_7.sql[m
	[31mmodified:   lib/dde.rb[m
	[31mmodified:   script/extras.sh[m
	[31mmodified:   script/initial_database_setup.sh[m
	[31mdeleted:    vendor/cache/domain_name-0.5.21.gem[m
	[31mdeleted:    vendor/cache/json-1.8.1.gem[m
	[31mdeleted:    vendor/cache/mysql2-0.2.23.gem[m
	[31mdeleted:    vendor/cache/pdfkit-0.6.2.gem[m
	[31mdeleted:    vendor/cache/unf_ext-0.0.6.gem[m

Untracked files:
  (use "git add <file>..." to include in what will be committed)

	[31mserver[m
	[31mvendor/cache/domain_name-0.5.25.gem[m
	[31mvendor/cache/json-1.8.3.gem[m
	[31mvendor/cache/mysql2-0.2.24.gem[m
	[31mvendor/cache/pdfkit-0.8.2.gem[m
	[31mvendor/cache/unf_ext-0.0.7.1.gem[m

no changes added to commit (use "git add" and/or "git commit -a")
]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ gi[K[Kgit add .
warning: You ran 'git add' with neither '-A (--all)' or '--ignore-removal',
whose behaviour will change in Git 2.0 with respect to paths you removed.
Paths like 'vendor/cache/domain_name-0.5.21.gem' that are
removed from your working tree are ignored with this version of Git.

* 'git add --ignore-removal <pathspec>', which is the current default,
  ignores paths you removed from your working tree.

* 'git add --all <pathspec>' will let you also record the removals.

Run 'git status' to check the paths you removed from your working tree.

]0;hope@apple: /var/www/Radiologyhope@apple:/var/www/Radiology$ git status
On branch